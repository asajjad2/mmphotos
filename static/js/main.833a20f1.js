/*! For license information please see main.833a20f1.js.LICENSE.txt */
!function(){"use strict";var e={213:function(e,t,n){n.d(t,{Z:function(){return i}});var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,i=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){return r.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}))},463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(v,e)||!f.call(d,e)&&(h.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function j(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Te(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Ie(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var De=!1;function Ne(e,t,n){if(De)return e(t,n);De=!0;try{return Ce(e,t,n)}finally{De=!1,(null!==_e||null!==Se)&&(Ae(),Ie())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(le){Re=!1}function Oe(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ve=!1,Ue=null,Be={onError:function(e){Me=!0,Fe=e}};function je(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Oe.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Ye=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,St,Et,Tt=!1,It=[],Ct=null,At=null,Dt=null,Nt=new Map,Pt=new Map,Rt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Vt(e)&&n.delete(t)}function Bt(){Tt=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==At&&Vt(At)&&(At=null),null!==Dt&&Vt(Dt)&&(Dt=null),Nt.forEach(Ut),Pt.forEach(Ut)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return jt(t,e)}if(0<It.length){jt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&jt(Ct,e),null!==At&&jt(At,e),null!==Dt&&jt(Dt,e),Nt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=Xt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Dt=Mt(Dt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Nt.set(a,Mt(Nt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Xt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Xt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=an(dn),pn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return Sn}var Tn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Tn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Dn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Nn),Rn=[9,13,27,32],Ln=l&&"CompositionEvent"in window,On=null;l&&"documentMode"in document&&(On=document.documentMode);var Mn=l&&"TextEvent"in window&&!On,Fn=l&&(!Ln||On&&8<On&&11>=On),Vn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Vr(e,0)}function Xn(e){if(W(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Xn(Wn)){var t=[];Gn(t,Wn,e,we(e)),Ne(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Wn)}function ar(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Sr={};function Er(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return _r[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Tr=Er("animationend"),Ir=Er("animationiteration"),Cr=Er("animationstart"),Ar=Er("transitionend"),Dr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Dr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Nr.length;Rr++){var Lr=Nr[Rr];Pr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(Ir,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(je.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ve||(Ve=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Ur(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ne((function(){var r=a,i=we(n),o=[];e:{var u=Dr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Tr:case Ir:case Cr:s=mn;break;case Ar:s=Dn;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==h&&(null!=(p=Pe(v,h))&&l.push(Gr(v,p,d)))),f)break;v=v.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[vi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=vn,p="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,p="onPointerLeave",h="onPointerEnter",v="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(p,v+"leave",s,n,i)).target=f,u.relatedTarget=d,p=null,gi(i)===r&&((l=new l(h,v+"enter",c,n,i)).target=d,l.relatedTarget=f,p=l),f=p,s&&c)e:{for(h=c,v=0,d=l=s;d;d=Wr(d))v++;for(d=0,p=h;p;p=Wr(p))d++;for(;0<v-d;)l=Wr(l),v--;for(;0<d-v;)h=Wr(h),d--;for(;v--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Kn(u))if(Yn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Ln)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(m=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=jn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Ln&&Bn(e,t)?(e=en(),Zt=Jt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Vr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,vi="__reactContainer$"+fi,pi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Si(e){return{current:e}}function Ei(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ti(e,t){_i++,xi[_i]=e.current,e.current=t}var Ii={},Ci=Si(Ii),Ai=Si(!1),Di=Ii;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ei(Ai),Ei(Ci)}function Li(e,t,n){if(Ci.current!==Ii)throw Error(a(168));Ti(Ci,t),Ti(Ai,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Di=Ci.current,Ti(Ci,e),Ti(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Oi(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ci),Ti(Ci,e)):Ei(Ai),Ti(Ai,n)}var Vi=null,Ui=!1,Bi=!1;function ji(e){null===Vi?Vi=[e]:Vi.push(e)}function zi(){if(!Bi&&null!==Vi){Bi=!0;var e=0,t=kt;try{var n=Vi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,Ui=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),We(Ze,zi),i}finally{kt=t,Bi=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,Xi=null,$i=1,Yi="";function Ji(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=$i,Wi[Qi++]=Yi,Wi[Qi++]=Xi,Xi=e;var r=$i;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else $i=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===Xi;)Xi=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:$i,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function va(e){null===aa?aa=[e]:aa.push(e)}var pa=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ma.current;Ei(ma),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function La(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function Oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,p=u;switch(h=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=p.payload)?v.call(d,f,h):v)||void 0===h)break e;f=F({},f,h);break e;case 2:Da=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=La(e,a,i))&&(nc(t,e,i,r),Oa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=La(e,a,i))&&(nc(t,e,i,r),Oa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=La(e,i,r))&&(nc(t,e,r,n),Oa(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Pi(t)?Di:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Pi(t)?Di:Ci.current,i.context=Ni(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case x:return(t=Vc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function p(i,a,u,s){for(var c=null,l=null,f=a,p=a=0,y=null;null!==f&&p<u.length;p++){f.index>p?(y=f,f=null):y=f.sibling;var m=d(i,f,u[p],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,p),null===l?c=m:l.sibling=m,l=m,f=y}if(p===u.length)return n(i,f),ia&&Ji(i,p),c;if(null===f){for(;p<u.length;p++)null!==(f=h(i,u[p],s))&&(a=o(f,a,p),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,p),c}for(f=r(i,f);p<u.length;p++)null!==(y=v(f,i,p,u[p],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?p:y.key),a=o(y,a,p),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,p),c}function y(i,u,s,c){var l=O(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,p=u,y=u=0,m=null,g=s.next();null!==p&&!g.done;y++,g=s.next()){p.index>y?(m=p,p=null):m=p.sibling;var k=d(i,p,g.value,c);if(null===k){null===p&&(p=m);break}e&&p&&null===k.alternate&&t(i,p),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,p=m}if(g.done)return n(i,p),ia&&Ji(i,y),l;if(null===p){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(p=r(i,p);!g.done;y++,g=s.next())null!==(g=v(p,i,y,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&p.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Oc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return p(r,a,o,s);if(O(o))return y(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Xa(!0),Ya=Xa(!1),Ja={},Za=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ti(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,vo=0,po=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(vo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,vo=0,mo=yo=po=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?po.memoizedState=mo=e:mo=mo.next=e,mo}function Io(){if(null===yo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?po.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?po.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((vo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,po.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function Po(e,t){var n=po,r=Io(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Oo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Lo.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&vo)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Lo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Oo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&nc(t,e,1,-1)}function Vo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,po,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Io().memoizedState}function jo(e,t,n,r){var i=To();po.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}po.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return jo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function Xo(){}function $o(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=pt(),po.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Io().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ia(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===po||null!==t&&t===po}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Vo,useDebugValue:Xo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&vo)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Oo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Lo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=As.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Yo,useReducer:Ao,useRef:Bo,useState:function(){return Ao(Co)},useDebugValue:Xo,useDeferredValue:function(e){return Jo(Io(),yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],Io().memoizedState]},useMutableSource:No,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Yo,useReducer:Do,useRef:Bo,useState:function(){return Do(Co)},useDebugValue:Xo,useDeferredValue:function(e){var t=Io();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[Do(Co)[0],Io().memoizedState]},useMutableSource:No,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function vu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),hu(0,t)},n}function pu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,La(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ya(t,null,n,r):$a(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Iu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Rs,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Rs,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Rs,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Rs,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Pi(n)?Di:Ci.current;return a=Ni(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)qu(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ni(t,c=Pi(n)?Di:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Da=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Da?("function"===typeof l&&(Ba(t,n,l,r),s=t.memoizedState),(u=Da||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Ni(t,s=Pi(n)?Di:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Da=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var v=t.memoizedState;u!==f||h!==v||Ai.current||Da?("function"===typeof d&&(Ba(t,n,d,r),v=t.memoizedState),(c=Da||za(t,n,c,r,h,v,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),ro(e,t.containerInfo)}function Nu(e,t,n,r,i){return da(),va(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Ru,Lu,Ou={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Oc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Ou,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Uu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Oc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Ou,o);if(0===(1&t.mode))return Uu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Uu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),nc(r,e,i,-1))}return pc(),Uu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=$i,Wi[Qi++]=Yi,Wi[Qi++]=Xi,$i=e.id,Yi=e.overflow,Xi=t),(t=Vu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Rc(r,u):(u=Oc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Ou,i}return e=(u=e.child).sibling,i=Rc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){return null!==r&&va(r),$a(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function ju(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ju(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ju(t,!0,n,null,a);break;case"together":ju(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Hu(t),null;case 3:return r=t.stateNode,io(),Ei(Ai),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ru(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=X(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Lu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):pc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>zs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Ye()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ai),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=X(e,i),r=X(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xu=!1,$u=!1,Yu="function"===typeof WeakSet?WeakSet:Set,Ju=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[pi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!$u&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,hs(e,t,n),$u=r):hs(e,t,n);break;default:hs(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ps(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ps(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Sc(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Sc(e,e.return,y)}}break;case 1:ps(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(ps(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Sc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Y(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;null!=v?ne(i,!!o.multiple,v,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Sc(e,e.return,y)}}break;case 6:if(ps(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Sc(e,e.return,y)}}break;case 3:if(ps(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(y){Sc(e,e.return,y)}break;case 4:default:ps(t,e),ms(e);break;case 13:ps(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(js=Ye())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,ps(t,e),$u=l):ps(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(v=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){Sc(r,n,y)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==v?(v.return=d,Ju=v):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",u))}catch(y){Sc(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Sc(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ps(t,e),ms(e),4&r&&vs(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Ju=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Xu;var c=$u;if(Xu=o,($u=s)&&!c)for(Ju=i;null!==Ju;)s=(o=Ju).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Ju=s):xs(i);for(;null!==a;)Ju=a,ks(a,t,n),a=a.sibling;Ju=i,Xu=u,$u=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ju=a):bs(e)}}function bs(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&is(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function ws(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function xs(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{is(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var _s,Ss=Math.ceil,Es=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Is=b.ReactCurrentBatchConfig,Cs=0,As=null,Ds=null,Ns=0,Ps=0,Rs=Si(0),Ls=0,Os=null,Ms=0,Fs=0,Vs=0,Us=null,Bs=null,js=0,zs=1/0,qs=null,Ks=!1,Gs=null,Hs=null,Ws=!1,Qs=null,Xs=0,$s=0,Ys=null,Js=-1,Zs=0;function ec(){return 0!==(6&Cs)?Ye():-1!==Js?Js:Js=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ns?Ns&-Ns:null!==pa.transition?(0===Zs&&(Zs=pt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$s)throw $s=0,Ys=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===As||(e===As&&(0===(2&Cs)&&(Fs|=n),4===Ls&&uc(e,Ns)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(zs=Ye()+500,Ui&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===As?Ns:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,ji(e)}(sc.bind(null,e)):ji(sc.bind(null,e)),oi((function(){0===(6&Cs)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===As?Ns:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=vc();for(As===e&&Ns===t||(qs=null,zs=Ye()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Es.current=o,Cs=i,null!==Ds?t=0:(As=null,Ns=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Os,hc(e,0),uc(e,r),rc(e,Ye()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=vt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Os,hc(e,0),uc(e,r),rc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Bs,qs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=js+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Bs,qs),t);break}wc(e,Bs,qs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Bs,qs),r);break}wc(e,Bs,qs);break;default:throw Error(a(329))}}}return rc(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Us;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bs,Bs=n,null!==t&&oc(t)),e}function oc(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function uc(e,t){for(t&=~Vs,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Os,hc(e,0),uc(e,t),rc(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bs,qs),rc(e,Ye()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(zs=Ye()+500,Ui&&zi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&xc();var t=Cs;Cs|=1;var n=Is.transition,r=kt;try{if(Is.transition=null,kt=1,e)return e()}finally{kt=r,Is.transition=n,0===(6&(Cs=t))&&zi()}}function fc(){Ps=Rs.current,Ei(Rs)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ei(Ai),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(As=e,Ds=e=Rc(e.current,null),Ns=Ps=t,Ls=0,Os=null,Vs=Fs=Ms=0,Bs=Us=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function dc(e,t){for(;;){var n=Ds;try{if(wa(),fo.current=ou,go){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(vo=0,mo=yo=po=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Os=t,Ds=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ns,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=mu(u);if(null!==v){v.flags&=-257,gu(v,u,s,0,t),1&v.mode&&yu(o,l,t),c=l;var p=(t=v).updateQueue;if(null===p){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}if(0===(1&t)){yu(o,l,t),pc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),va(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Us?Us=[o]:Us.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function vc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function pc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===As||0===(268435455&Ms)&&0===(268435455&Fs)||uc(As,Ns)}function yc(e,t){var n=Cs;Cs|=2;var r=vc();for(As===e&&Ns===t||(qs=null,hc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Es.current=r,null!==Ds)throw Error(a(261));return As=null,Ns=0,Ls}function mc(){for(;null!==Ds;)kc(Ds)}function gc(){for(;null!==Ds&&!Xe();)kc(Ds)}function kc(e){var t=_s(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?bc(e):Ds=t,Ts.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wu(n,t,Ps)))return void(Ds=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(Ds=n);if(null===e)return Ls=6,void(Ds=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Ls&&(Ls=5)}function wc(e,t,n){var r=kt,i=Is.transition;try{Is.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ds=As=null,Ns=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var v;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(v=h.firstChild);)d=h,h=v;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(v=h.nextSibling))break;d=(h=d).parentNode}h=v}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var y=p.memoizedProps,m=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}p=ts,ts=!1}(e,n),ys(n,e),vr(ti),Kt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),$e(),Cs=s,kt=u,Is.transition=o}else e.current=n;if(Ws&&(Ws=!1,Qs=e,Xs=i),0===(o=e.pendingLanes)&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&Xs)&&0!==e.tag&&xc(),0!==(1&(o=e.pendingLanes))?e===Ys?$s++:($s=0,Ys=e):$s=0,zi()}(e,t,n,r)}finally{Is.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=bt(Xs),t=Is.transition,n=kt;try{if(Is.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Xs=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Ju=e.current;null!==Ju;){var o=Ju,u=o.child;if(0!==(16&Ju.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,v=f.return;if(as(f),f===l){Ju=null;break}if(null!==d){d.return=v,Ju=d;break}Ju=v}}}var p=o.alternate;if(null!==p){var y=p.child;if(null!==y){p.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Ju=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(o=Ju).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ju=g;break e}Ju=o.return}}var k=e.current;for(Ju=k;null!==Ju;){var b=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ju=b;else e:for(u=k;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){Sc(s,s.return,x)}if(s===u){Ju=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ju=w;break e}Ju=s.return}}if(Cs=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Is.transition=t}}return!1}function _c(e,t,n){e=La(e,t=vu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=La(t,e=pu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ns&n)===n&&(4===Ls||3===Ls&&(130023424&Ns)===Ns&&500>Ye()-js?hc(e,0):Vs|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Aa(e,t))&&(mt(e,t,n),rc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return We(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new Dc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Oc(n.children,i,o,t);case S:u=8,i|=8;break;case E:return(e=Nc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Nc(13,n,t,i)).elementType=A,e.lanes=o,e;case D:return(e=Nc(19,n,t,i)).elementType=D,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case I:u=9;break e;case C:u=11;break e;case N:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Nc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Nc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Nc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Na(a),e}function jc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Oi(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Bc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Ra(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,La(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Kc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=La(i,t,o))&&(nc(e,i,o,a),Oa(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}_s=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Du(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Ni(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Na(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===N)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Du(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Nu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Nu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),_u(e,t,r,i=ya(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),qu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),qa(t,r,i),Ga(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[vi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[vi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}$c.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},$c.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[vi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Ye()),0===(6&Cs)&&(zs=Ye()+500,zi()))}break;case 13:lc((function(){var t=Aa(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Aa(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ae=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Ie,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return jc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[vi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,p(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function D(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},L={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,v=!1,p=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!p)if(null!==r(c))p=!0,R(x);else{var t=r(l);null!==t&&L(w,t.startTime-e)}}function x(e,n){p=!1,y&&(y=!1,g(T),T=-1),v=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&L(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,E=null,T=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function D(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(S=!1,E=null)}}else S=!1}if("function"===typeof k)_=function(){k(D)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,P=N.port2;N.port1.onmessage=D,_=function(){P.postMessage(null)}}else _=function(){m(D,0)};function R(e){E=e,S||(S=!0,_())}function L(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(T),T=-1):y=!0,L(w,a-o))):(e.sortIndex=u,n(c,e),p||v||(p=!0,R(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return j},SDK_VERSION:function(){return He},_DEFAULT_ENTRY_NAME:function(){return Re},_addComponent:function(){return Fe},_addOrOverwriteComponent:function(){return Ve},_apps:function(){return Oe},_clearComponents:function(){return ze},_components:function(){return Me},_getProvider:function(){return Be},_registerComponent:function(){return Ue},_removeServiceInstance:function(){return je},deleteApp:function(){return $e},getApp:function(){return Qe},getApps:function(){return Xe},initializeApp:function(){return We},onLog:function(){return Ze},registerVersion:function(){return Je},setLogLevel:function(){return et}});var t=n(791),r=n(164);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=n(184),f={selectedImage:""},h=(0,t.createContext)(),d=function(e){var n=e.children,r=c((0,t.useState)(f),2),i=r[0],a=r[1];return(0,l.jsx)(h.Provider,{value:{selectedImage:i.selectedImage,setSelectedImage:function(e){a((function(t){return o(o({},t),{},{selectedImage:e})}))}},children:n})},v=function(){return(0,l.jsxs)("section",{className:"title",children:[(0,l.jsx)("h1",{children:"Muhammad Munaf"}),(0,l.jsx)("h2",{class:"sub",children:"The Photographer"}),(0,l.jsx)("p",{class:"about",children:"Nunc vitae mauris sit amet est aliquet blandit eu in urna. Suspendisse at accumsan ex. Donec eu dui et lectus fermentum rhoncus. Ut tempus in velit in mattis."})]})};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(){y=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(C){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new E(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(T([])));g&&g!==t&&n.call(g,i)&&(v=g);var k=d.prototype=f.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==p(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=d,u(k,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),u(k,o,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function m(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){m(a,r,i,o,u,"next",e)}function u(e){m(a,r,i,o,u,"throw",e)}o(void 0)}))}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function x(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function C(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function A(e){var t=I();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C(this,n)}}function D(e,t,n){return D=I()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&S(i,n.prototype),i},D.apply(null,arguments)}function N(e){var t="function"===typeof Map?new Map:void 0;return N=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return D(e,arguments,T(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),S(n,e)},N(e)}var P=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},R={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(P(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},L=function(e){return function(e){var t=P(e);return R.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function O(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=O(e[n],t[n]));return e}var M=function(){function e(){var t=this;k(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return w(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function F(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[L(JSON.stringify({alg:"none",type:"JWT"})),L(JSON.stringify(a)),""].join(".")}function V(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function U(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){return"object"===typeof indexedDB}var j=function(e){E(n,e);var t=A(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(_(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(_(a),z.prototype.create),a}return w(n)}(N(Error)),z=function(){function e(t,n,r){k(this,e),this.service=t,this.serviceName=n,this.errors=r}return w(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?q(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new j(n,a,t);return o}}]),e}();function q(e,t){return e.replace(K,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var K=/\{\$([^}]+)}/g;function G(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function H(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(W(u)&&W(s)){if(!H(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function W(e){return null!==e&&"object"===typeof e}function Q(e,t){var n=new X(e,t);return n.subscribe.bind(n)}var X=function(){function e(t,n){var r=this;k(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return w(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=x(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=$),void 0===r.error&&(r.error=$),void 0===r.complete&&(r.complete=$);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function $(){}function Y(e){return e&&e._delegate?e._delegate:e}function J(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z=function(){function e(t,n,r){k(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return w(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ee="[DEFAULT]",te=function(){function e(t,n){k(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return w(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new M;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ee})}catch(s){}var t,n=x(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=g(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(J(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),J(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=x(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Hp){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ee?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Hp){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee;return this.component?this.component.multipleInstances?e:ee:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ne,re,ie=function(){function e(t){k(this,e),this.name=t,this.providers=new Map}return w(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new te(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ae=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(re||(re={}));var oe={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},ue=re.INFO,se=(i(ne={},re.DEBUG,"log"),i(ne,re.VERBOSE,"log"),i(ne,re.INFO,"info"),i(ne,re.WARN,"warn"),i(ne,re.ERROR,"error"),ne),ce=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=se[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},le=function(){function e(t){k(this,e),this.name=t,this._logLevel=ue,this._logHandler=ce,this._userLogHandler=null,ae.push(this)}return w(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in re))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?oe[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,re.DEBUG].concat(t)),this._logHandler.apply(this,[this,re.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,re.VERBOSE].concat(t)),this._logHandler.apply(this,[this,re.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,re.INFO].concat(t)),this._logHandler.apply(this,[this,re.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,re.WARN].concat(t)),this._logHandler.apply(this,[this,re.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,re.ERROR].concat(t)),this._logHandler.apply(this,[this,re.ERROR].concat(t))}}]),e}();var fe,he;var de=new WeakMap,ve=new WeakMap,pe=new WeakMap,ye=new WeakMap,me=new WeakMap;var ge={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ve.get(e);if("objectStoreNames"===t)return e.objectStoreNames||pe.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return we(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ke(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(xe(this),n),we(de.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return we(e.apply(xe(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[xe(this),t].concat(r));return pe.set(a,t.sort?t.sort():[t]),we(a)}}function be(e){return"function"===typeof e?ke(e):(e instanceof IDBTransaction&&function(e){if(!ve.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ve.set(e,t)}}(e),t=e,(fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,ge):e);var t}function we(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(we(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&de.set(t,e)})).catch((function(){})),me.set(t,e),t}(e);if(ye.has(e))return ye.get(e);var t=be(e);return t!==e&&(ye.set(e,t),me.set(t,e)),t}var xe=function(e){return me.get(e)};var _e,Se,Ee=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],Ie=new Map;function Ce(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Ie.get(t))return Ie.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Te.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ee.includes(n))){var a=function(){var e=g(y().mark((function e(t){var a,o,u,s,c,l,f=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ie.set(t,a),a}}}ge=function(e){return o(o({},e),{},{get:function(t,n,r){return Ce(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ce(t,n)||e.has(t,n)}})}(ge);var Ae=function(){function e(t){k(this,e),this.container=t}return w(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var De="@firebase/app",Ne="0.7.29",Pe=new le("@firebase/app"),Re="[DEFAULT]",Le=(i(_e={},De,"fire-core"),i(_e,"@firebase/app-compat","fire-core-compat"),i(_e,"@firebase/analytics","fire-analytics"),i(_e,"@firebase/analytics-compat","fire-analytics-compat"),i(_e,"@firebase/app-check","fire-app-check"),i(_e,"@firebase/app-check-compat","fire-app-check-compat"),i(_e,"@firebase/auth","fire-auth"),i(_e,"@firebase/auth-compat","fire-auth-compat"),i(_e,"@firebase/database","fire-rtdb"),i(_e,"@firebase/database-compat","fire-rtdb-compat"),i(_e,"@firebase/functions","fire-fn"),i(_e,"@firebase/functions-compat","fire-fn-compat"),i(_e,"@firebase/installations","fire-iid"),i(_e,"@firebase/installations-compat","fire-iid-compat"),i(_e,"@firebase/messaging","fire-fcm"),i(_e,"@firebase/messaging-compat","fire-fcm-compat"),i(_e,"@firebase/performance","fire-perf"),i(_e,"@firebase/performance-compat","fire-perf-compat"),i(_e,"@firebase/remote-config","fire-rc"),i(_e,"@firebase/remote-config-compat","fire-rc-compat"),i(_e,"@firebase/storage","fire-gcs"),i(_e,"@firebase/storage-compat","fire-gcs-compat"),i(_e,"@firebase/firestore","fire-fst"),i(_e,"@firebase/firestore-compat","fire-fst-compat"),i(_e,"fire-js","fire-js"),i(_e,"firebase","fire-js-all"),_e),Oe=new Map,Me=new Map;function Fe(e,t){try{e.container.addComponent(t)}catch(n){Pe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ve(e,t){e.container.addOrOverwriteComponent(t)}function Ue(e){var t=e.name;if(Me.has(t))return Pe.debug("There were multiple attempts to register component ".concat(t,".")),!1;Me.set(t,e);var n,r=x(Oe.values());try{for(r.s();!(n=r.n()).done;){Fe(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Be(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function je(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Re;Be(e,t).clearInstance(n)}function ze(){Me.clear()}var qe=(i(Se={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(Se,"bad-app-name","Illegal App name: '{$appName}"),i(Se,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),i(Se,"app-deleted","Firebase App named '{$appName}' already deleted"),i(Se,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),i(Se,"invalid-log-argument","First argument to `onLog` must be null or a function."),i(Se,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),i(Se,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),i(Se,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),i(Se,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Se),Ke=new z("app","Firebase",qe),Ge=function(){function e(t,n,r){var i=this;k(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Z("app",(function(){return i}),"PUBLIC"))}return w(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ke.create("app-deleted",{appName:this._name})}}]),e}(),He="9.9.1";function We(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Re,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ke.create("bad-app-name",{appName:String(i)});var a=Oe.get(i);if(a){if(H(e,a.options)&&H(r,a.config))return a;throw Ke.create("duplicate-app",{appName:i})}var o,u=new ie(i),s=x(Me.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Ge(e,r,u);return Oe.set(i,l),l}function Qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=Oe.get(e);if(!t)throw Ke.create("no-app",{appName:e});return t}function Xe(){return Array.from(Oe.values())}function $e(e){return Ye.apply(this,arguments)}function Ye(){return Ye=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Oe.has(n)){e.next=6;break}return Oe.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}function Je(e,t,n){var r,i=null!==(r=Le[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Pe.warn(u.join(" "))}Ue(new Z("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ze(e,t){if(null!==e&&"function"!==typeof e)throw Ke.create("invalid-log-argument");!function(e,t){var n,r=x(ae);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=oe[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:re[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function et(e){var t;t=e,ae.forEach((function(e){e.setLogLevel(t)}))}var tt="firebase-heartbeat-store",nt=null;function rt(){return nt||(nt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=we(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(we(u.result),e.oldVersion,e.newVersion,we(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(tt)}}).catch((function(e){throw Ke.create("storage-open",{originalErrorMessage:e.message})}))),nt}function it(e){return at.apply(this,arguments)}function at(){return at=g(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,rt();case 3:return r=e.sent,e.abrupt("return",r.transaction(tt).objectStore(tt).get(st(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Ke.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),at.apply(this,arguments)}function ot(e,t){return ut.apply(this,arguments)}function ut(){return ut=g(y().mark((function e(t,n){var r,i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,rt();case 3:return i=e.sent,a=i.transaction(tt,"readwrite"),o=a.objectStore(tt),e.next=8,o.put(n,st(t));case 8:return e.abrupt("return",a.done);case 11:throw e.prev=11,e.t0=e.catch(0),Ke.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ut.apply(this,arguments)}function st(e){return"".concat(e.name,"!").concat(e.options.appId)}var ct=function(){function e(t){var n=this;k(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new vt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return w(e,[{key:"triggerHeartbeat",value:function(){var e=g(y().mark((function e(){var t,n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=lt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=g(y().mark((function e(){var t,n,r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=lt(),n=ft(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=L(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function lt(){return(new Date).toISOString().substring(0,10)}function ft(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=x(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),pt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),pt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ht,dt,vt=function(){function e(t){k(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return w(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=g(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,it(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=g(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ot(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=g(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ot(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(J(r.heartbeats),J(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function pt(e){return L(JSON.stringify({version:2,heartbeats:e})).length}ht="",Ue(new Z("platform-logger",(function(e){return new Ae(e)}),"PRIVATE")),Ue(new Z("heartbeat",(function(e){return new ct(e)}),"PRIVATE")),Je(De,Ne,ht),Je(De,Ne,"esm2017"),Je("fire-js","");var yt=function(){function e(t,n){var r=this;k(this,e),this._delegate=t,this.firebase=n,Fe(t,new Z("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return w(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),$e(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Re;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Re;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Fe(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ve(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),mt=(i(dt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(dt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),dt),gt=new z("app-compat","Firebase",mt);var kt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=We(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(G(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Je,setLogLevel:et,onLog:Ze,apps:null,SDK_VERSION:He,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ue(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw gt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&O(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!G(n,e=e||Re))throw gt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(yt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){O(n,e)},createSubscribe:Q,ErrorFactory:z,deepExtend:O}),n}(),bt=new le("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){bt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var wt=self.firebase.SDK_VERSION;wt&&wt.indexOf("LITE")>=0&&bt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var xt=kt;!function(e){Je("@firebase/app-compat","0.1.30",e)}();function _t(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}function St(){return St="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_t(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},St.apply(this,arguments)}xt.registerVersion("firebase","9.9.1","app-compat");var Et,Tt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},It={},Ct=Ct||{},At=Tt||self;function Dt(){}function Nt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Pt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Rt="closure_uid_"+(1e9*Math.random()>>>0),Lt=0;function Ot(e,t,n){return e.call.apply(e.bind,arguments)}function Mt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ft(e,t,n){return(Ft=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ot:Mt).apply(null,arguments)}function Vt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ut(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Bt(){this.s=this.s,this.o=this.o}var jt={};Bt.prototype.s=!1,Bt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Rt)&&e[Rt]||(e[Rt]=++Lt)}(this);delete jt[e]}},Bt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var zt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},qt=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Kt(e){return Array.prototype.concat.apply([],arguments)}function Gt(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ht(e){return/^[\s\xa0]*$/.test(e)}var Wt,Qt=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Xt(e,t){return-1!=e.indexOf(t)}function $t(e,t){return e<t?-1:e>t?1:0}e:{var Yt=At.navigator;if(Yt){var Jt=Yt.userAgent;if(Jt){Wt=Jt;break e}}Wt=""}function Zt(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function en(e){var t={};for(var n in e)t[n]=e[n];return t}var tn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<tn.length;a++)n=tn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function rn(e){return rn[" "](e),e}rn[" "]=Dt;var an,on=Xt(Wt,"Opera"),un=Xt(Wt,"Trident")||Xt(Wt,"MSIE"),sn=Xt(Wt,"Edge"),cn=sn||un,ln=Xt(Wt,"Gecko")&&!(Xt(Wt.toLowerCase(),"webkit")&&!Xt(Wt,"Edge"))&&!(Xt(Wt,"Trident")||Xt(Wt,"MSIE"))&&!Xt(Wt,"Edge"),fn=Xt(Wt.toLowerCase(),"webkit")&&!Xt(Wt,"Edge");function hn(){var e=At.document;return e?e.documentMode:void 0}e:{var dn="",vn=function(){var e=Wt;return ln?/rv:([^\);]+)(\)|;)/.exec(e):sn?/Edge\/([\d\.]+)/.exec(e):un?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):fn?/WebKit\/(\S+)/.exec(e):on?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(vn&&(dn=vn?vn[1]:""),un){var pn=hn();if(null!=pn&&pn>parseFloat(dn)){an=String(pn);break e}}an=dn}var yn,mn={};function gn(){return function(e){var t=mn;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Qt(String(an)).split("."),n=Qt("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=$t(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||$t(0==a[2].length,0==o[2].length)||$t(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(At.document&&un){var kn=hn();yn=kn||(parseInt(an,10)||void 0)}else yn=void 0;var bn=yn,wn=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{At.addEventListener("test",Dt,t),At.removeEventListener("test",Dt,t)}catch(eS){}return e}();function xn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function _n(e,t){if(xn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ln){e:{try{rn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Sn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&_n.Z.h.call(this)}}xn.prototype.h=function(){this.defaultPrevented=!0},Ut(_n,xn);var Sn={2:"touch",3:"pen",4:"mouse"};_n.prototype.h=function(){_n.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var En="closure_listenable_"+(1e6*Math.random()|0),Tn=0;function In(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Tn,this.ca=this.fa=!1}function Cn(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function An(e){this.src=e,this.g={},this.h=0}function Dn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=zt(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Cn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Nn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}An.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Nn(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new In(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Pn="closure_lm_"+(1e6*Math.random()|0),Rn={};function Ln(e,t,n,r,i){if(r&&r.once)return Mn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ln(e,t[a],n,r,i);return null}return n=qn(n),e&&e[En]?e.N(t,n,Pt(r)?!!r.capture:!!r,i):On(e,t,n,!1,r,i)}function On(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Pt(i)?!!i.capture:!!i,u=jn(e);if(u||(e[Pn]=u=new An(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Bn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)wn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Un(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Mn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Mn(e,t[a],n,r,i);return null}return n=qn(n),e&&e[En]?e.O(t,n,Pt(r)?!!r.capture:!!r,i):On(e,t,n,!0,r,i)}function Fn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Fn(e,t[a],n,r,i);else r=Pt(r)?!!r.capture:!!r,n=qn(n),e&&e[En]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Nn(a=e.g[t],n,r,i))&&(Cn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=jn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Nn(t,n,r,i)),(n=-1<e?t[e]:null)&&Vn(n))}function Vn(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[En])Dn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Un(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=jn(t))?(Dn(n,e),0==n.h&&(n.src=null,t[Pn]=null)):Cn(e)}}}function Un(e){return e in Rn?Rn[e]:Rn[e]="on"+e}function Bn(e,t){if(e.ca)e=!0;else{t=new _n(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Vn(e),e=n.call(r,t)}return e}function jn(e){return(e=e[Pn])instanceof An?e:null}var zn="__closure_events_fn_"+(1e9*Math.random()>>>0);function qn(e){return"function"===typeof e?e:(e[zn]||(e[zn]=function(t){return e.handleEvent(t)}),e[zn])}function Kn(){Bt.call(this),this.i=new An(this),this.P=this,this.I=null}function Gn(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new xn(t,e);else if(t instanceof xn)t.target=t.target||e;else{var i=t;nn(t=new xn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Hn(o,r,!0,t)&&i}if(i=Hn(o=t.g=e,r,!0,t)&&i,i=Hn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Hn(o=t.g=n[a],r,!1,t)&&i}function Hn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Dn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Ut(Kn,Bt),Kn.prototype[En]=!0,Kn.prototype.removeEventListener=function(e,t,n,r){Fn(this,e,t,n,r)},Kn.prototype.M=function(){if(Kn.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Cn(n[r]);delete t.g[e],t.h--}}this.I=null},Kn.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Kn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Wn=At.JSON.stringify;function Qn(){var e=nr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Xn,$n=function(){function e(){k(this,e),this.h=this.g=null}return w(e,[{key:"add",value:function(e,t){var n=Yn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Yn=new(function(){function e(t,n){k(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return w(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Jn}),(function(e){return e.reset()})),Jn=function(){function e(){k(this,e),this.next=this.g=this.h=null}return w(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Zn(e){At.setTimeout((function(){throw e}),0)}function er(e,t){Xn||function(){var e=At.Promise.resolve(void 0);Xn=function(){e.then(rr)}}(),tr||(Xn(),tr=!0),nr.add(e,t)}var tr=!1,nr=new $n;function rr(){for(var e;e=Qn();){try{e.h.call(e.g)}catch(eS){Zn(eS)}var t=Yn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}tr=!1}function ir(e,t){Kn.call(this),this.h=e||1,this.g=t||At,this.j=Ft(this.kb,this),this.l=Date.now()}function ar(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function or(e,t,n){if("function"===typeof e)n&&(e=Ft(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ft(e.handleEvent,e)}return 2147483647<Number(t)?-1:At.setTimeout(e,t||0)}function ur(e){e.g=or((function(){e.g=null,e.i&&(e.i=!1,ur(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ut(ir,Kn),(Et=ir.prototype).da=!1,Et.S=null,Et.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Gn(this,"tick"),this.da&&(ar(this),this.start()))}},Et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Et.M=function(){ir.Z.M.call(this),ar(this),delete this.g};var sr=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return w(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ur(this)}},{key:"M",value:function(){St(T(n.prototype),"M",this).call(this),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Bt);function cr(e){Bt.call(this),this.h=e,this.g={}}Ut(cr,Bt);var lr=[];function fr(e,t,n,r){Array.isArray(n)||(n&&(lr[0]=n.toString()),n=lr);for(var i=0;i<n.length;i++){var a=Ln(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function hr(e){Zt(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Vn(e)}),e),e.g={}}function dr(){this.g=!0}function vr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Wn(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}cr.prototype.M=function(){cr.Z.M.call(this),hr(this)},cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dr.prototype.Aa=function(){this.g=!1},dr.prototype.info=function(){};var pr={},yr=null;function mr(){return yr=yr||new Kn}function gr(e){xn.call(this,pr.Ma,e)}function kr(e){var t=mr();Gn(t,new gr(t,e))}function br(e,t){xn.call(this,pr.STAT_EVENT,e),this.stat=t}function wr(e){var t=mr();Gn(t,new br(t,e))}function xr(e,t){xn.call(this,pr.Na,e),this.size=t}function _r(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return At.setTimeout((function(){e()}),t)}pr.Ma="serverreachability",Ut(gr,xn),pr.STAT_EVENT="statevent",Ut(br,xn),pr.Na="timingevent",Ut(xr,xn);var Sr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Er={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Tr(){}function Ir(e){return e.h||(e.h=e.i())}function Cr(){}Tr.prototype.h=null;var Ar,Dr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Nr(){xn.call(this,"d")}function Pr(){xn.call(this,"c")}function Rr(){}function Lr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new cr(this),this.P=Mr,e=cn?125:void 0,this.W=new ir(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Or}function Or(){this.i=null,this.g="",this.h=!1}Ut(Nr,xn),Ut(Pr,xn),Ut(Rr,Tr),Rr.prototype.g=function(){return new XMLHttpRequest},Rr.prototype.i=function(){return{}},Ar=new Rr;var Mr=45e3,Fr={},Vr={};function Ur(e,t,n){e.K=1,e.v=si(ni(t)),e.s=n,e.U=!0,Br(e,null)}function Br(e,t){e.F=Date.now(),Kr(e),e.A=ni(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),wi(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Or,e.g=xa(e.l,n?t:null,!e.s),0<e.O&&(e.L=new sr(Ft(e.Ia,e,e.g),e.O)),fr(e.V,e.g,"readystatechange",e.gb),t=e.H?en(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),kr(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function jr(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function zr(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=qr(e,n))==Vr){4==t&&(e.o=4,wr(14),i=!1),vr(e.j,e.m,null,"[Incomplete Response]");break}if(r==Fr){e.o=4,wr(15),vr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}vr(e.j,e.m,r,null),Xr(e,r)}jr(e)&&r!=Vr&&r!=Fr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,wr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),va(t),t.L=!0,wr(11))):(vr(e.j,e.m,n,"[Invalid Chunked Response]"),Qr(e),Wr(e))}function qr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Vr:(n=Number(t.substring(n,r)),isNaN(n)?Fr:(r+=1)+n>t.length?Vr:(t=t.substr(r,n),e.C=r+n,t))}function Kr(e){e.Y=Date.now()+e.P,Gr(e,e.P)}function Gr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=_r(Ft(e.eb,e),t)}function Hr(e){e.B&&(At.clearTimeout(e.B),e.B=null)}function Wr(e){0==e.l.G||e.I||ma(e.l,e)}function Qr(e){Hr(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ar(e.W),hr(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Xr(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ci(n.i,e)))if(n.I=e.N,!e.J&&Ci(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ya(n),aa(n)}da(n),wr(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=_r(Ft(n.ab,n),6e3));if(1>=Ii(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else ka(n,11)}else if((e.J||n.g==e)&&ya(n),!Ht(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Xt(l,"spdy")||Xt(l,"quic")||Xt(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Ai(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,ui(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=wa(r,r.H?r.la:null,r.W),d.J){Di(r.i,d);var v=d,p=r.K;p&&v.setTimeout(p),v.B&&(Hr(v),Kr(v)),r.g=d}else ha(r);0<n.l.length&&sa(n)}else"stop"!=a[0]&&"close"!=a[0]||ka(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ka(n,7):ia(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}kr(4)}catch(a){}}function $r(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Nt(e)||"string"===typeof e)qt(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Nt(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Nt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Yr(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Yr)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Jr(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Zr(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Zr(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Zr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Et=Lr.prototype).setTimeout=function(e){this.P=e},Et.gb=function(e){e=e.target;var t=this.L;t&&3==Zi(e)?t.l():this.Ia(e)},Et.Ia=function(e){try{if(e==this.g)e:{var t=Zi(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||cn||this.g&&(this.h.h||this.g.ga()||ea(this.g)))){this.I||4!=t||7==n||kr(8==n||0>=r?3:2),Hr(this);var i=this.g.ba();this.N=i;t:if(jr(this)){var a=ea(this.g);e="";var o=a.length,u=4==Zi(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Qr(this),Wr(this);var s="";break t}this.h.i=new At.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ht(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,wr(12),Qr(this),Wr(this);break e}vr(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Xr(this,i)}this.U?(zr(this,t,s),cn&&this.i&&3==t&&(fr(this.V,this.W,"tick",this.fb),this.W.start())):(vr(this.j,this.m,s,null),Xr(this,s)),4==t&&Qr(this),this.i&&!this.I&&(4==t?ma(this.l,this):(this.i=!1,Kr(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,wr(12)):(this.o=0,wr(13)),Qr(this),Wr(this)}}}catch(t){}},Et.fb=function(){if(this.g){var e=Zi(this.g),t=this.g.ga();this.C<t.length&&(Hr(this),zr(this,e,t),this.i&&4!=e&&Kr(this))}},Et.cancel=function(){this.I=!0,Qr(this)},Et.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(kr(3),wr(17)),Qr(this),this.o=2,Wr(this)):Gr(this,this.Y-e)},(Et=Yr.prototype).R=function(){Jr(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Et.T=function(){return Jr(this),this.g.concat()},Et.get=function(e,t){return Zr(this.h,e)?this.h[e]:t},Et.set=function(e,t){Zr(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Et.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var ei=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ti(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ti){this.g=void 0!==t?t:e.g,ri(this,e.j),this.s=e.s,ii(this,e.i),ai(this,e.m),this.l=e.l,t=e.h;var n=new mi;n.i=t.i,t.g&&(n.g=new Yr(t.g),n.h=t.h),oi(this,n),this.o=e.o}else e&&(n=String(e).match(ei))?(this.g=!!t,ri(this,n[1]||"",!0),this.s=ci(n[2]||""),ii(this,n[3]||"",!0),ai(this,n[4]),this.l=ci(n[5]||"",!0),oi(this,n[6]||"",!0),this.o=ci(n[7]||"")):(this.g=!!t,this.h=new mi(null,this.g))}function ni(e){return new ti(e)}function ri(e,t,n){e.j=n?ci(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ii(e,t,n){e.i=n?ci(t,!0):t}function ai(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function oi(e,t,n){t instanceof mi?(e.h=t,function(e,t){t&&!e.j&&(gi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ki(this,t),wi(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=li(t,pi)),e.h=new mi(t,e.g))}function ui(e,t,n){e.h.set(t,n)}function si(e){return ui(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ci(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function li(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,fi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function fi(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ti.prototype.toString=function(){var e=[],t=this.j;t&&e.push(li(t,hi,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(li(t,hi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(li(n,"/"==n.charAt(0)?vi:di,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",li(n,yi)),e.join("")};var hi=/[#\/\?@]/g,di=/[#\?:]/g,vi=/[#\?]/g,pi=/[#\?@]/g,yi=/#/g;function mi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function gi(e){e.g||(e.g=new Yr,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ki(e,t){gi(e),t=xi(e,t),Zr(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Zr((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Jr(e)))}function bi(e,t){return gi(e),t=xi(e,t),Zr(e.g.h,t)}function wi(e,t,n){ki(e,t),0<n.length&&(e.i=null,e.g.set(xi(e,t),Gt(n)),e.h+=n.length)}function xi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Et=mi.prototype).add=function(e,t){gi(this),this.i=null,e=xi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Et.forEach=function(e,t){gi(this),this.g.forEach((function(n,r){qt(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Et.T=function(){gi(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Et.R=function(e){gi(this);var t=[];if("string"===typeof e)bi(this,e)&&(t=Kt(t,this.g.get(xi(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Kt(t,e[n])}return t},Et.set=function(e,t){return gi(this),this.i=null,bi(this,e=xi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Et.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var _i=w((function e(t,n){k(this,e),this.h=t,this.g=n}));function Si(e){this.l=e||Ei,At.PerformanceNavigationTiming?e=0<(e=At.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(At.g&&At.g.Ea&&At.g.Ea()&&At.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ei=10;function Ti(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ii(e){return e.h?1:e.g?e.g.size:0}function Ci(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ai(e,t){e.g?e.g.add(t):e.h=t}function Di(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ni(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=x(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Gt(e.i)}function Pi(){}function Ri(){this.g=new Pi}function Li(e,t,n){var r=n||"";try{$r(e,(function(e,n){var i=e;Pt(e)&&(i=Wn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Oi(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Mi(e){this.l=e.$b||null,this.j=e.ib||!1}function Fi(e,t){Kn.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Vi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Si.prototype.cancel=function(){if(this.i=Ni(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=x(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Pi.prototype.stringify=function(e){return At.JSON.stringify(e,void 0)},Pi.prototype.parse=function(e){return At.JSON.parse(e,void 0)},Ut(Mi,Tr),Mi.prototype.g=function(){return new Fi(this.l,this.j)},Mi.prototype.i=function(e){return function(){return e}}({}),Ut(Fi,Kn);var Vi=0;function Ui(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Bi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ji(e)}function ji(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Et=Fi.prototype).open=function(e,t){if(this.readyState!=Vi)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ji(this)},Et.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||At).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bi(this)),this.readyState=Vi},Et.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof At.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ui(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Et.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bi(this):ji(this),3==this.readyState&&Ui(this)}},Et.Ua=function(e){this.g&&(this.response=this.responseText=e,Bi(this))},Et.Ta=function(e){this.g&&(this.response=e,Bi(this))},Et.ha=function(){this.g&&Bi(this)},Et.setRequestHeader=function(e,t){this.v.append(e,t)},Et.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Et.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var zi=At.JSON.parse;function qi(e){Kn.call(this),this.headers=new Yr,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ki,this.K=this.L=!1}Ut(qi,Kn);var Ki="",Gi=/^https?$/i,Hi=["POST","PUT"];function Wi(e){return"content-type"==e.toLowerCase()}function Qi(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Xi(e),Yi(e)}function Xi(e){e.D||(e.D=!0,Gn(e,"complete"),Gn(e,"error"))}function $i(e){if(e.h&&"undefined"!=typeof Ct&&(!e.C[1]||4!=Zi(e)||2!=e.ba()))if(e.v&&4==Zi(e))or(e.Fa,0,e);else if(Gn(e,"readystatechange"),4==Zi(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ei)[1]||null;if(!a&&At.self&&At.self.location){var o=At.self.location.protocol;a=o.substr(0,o.length-1)}i=!Gi.test(a?a.toLowerCase():"")}t=i}if(t)Gn(e,"complete"),Gn(e,"success");else{e.m=6;try{var u=2<Zi(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Xi(e)}}finally{Yi(e)}}}function Yi(e,t){if(e.g){Ji(e);var n=e.g,r=e.C[0]?Dt:null;e.g=null,e.C=null,t||Gn(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ji(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(At.clearTimeout(e.A),e.A=null)}function Zi(e){return e.g?e.g.readyState:0}function ea(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ki:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Z_){return null}}function ta(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Zt(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ui(e,t,n))}function na(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ra(e){this.za=0,this.l=[],this.h=new dr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=na("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=na("baseRetryDelayMs",5e3,e),this.$a=na("retryDelaySeedMs",1e4,e),this.Ya=na("forwardChannelMaxRetries",2,e),this.ra=na("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Si(e&&e.concurrentRequestLimit),this.Ca=new Ri,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ia(e){if(oa(e),3==e.G){var t=e.V++,n=ni(e.F);ui(n,"SID",e.J),ui(n,"RID",t),ui(n,"TYPE","terminate"),la(e,n),(t=new Lr(e,e.h,t,void 0)).K=2,t.v=si(ni(n)),n=!1,At.navigator&&At.navigator.sendBeacon&&(n=At.navigator.sendBeacon(t.v.toString(),"")),!n&&At.Image&&((new Image).src=t.v,n=!0),n||(t.g=xa(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Kr(t)}ba(e)}function aa(e){e.g&&(va(e),e.g.cancel(),e.g=null)}function oa(e){aa(e),e.u&&(At.clearTimeout(e.u),e.u=null),ya(e),e.i.cancel(),e.m&&("number"===typeof e.m&&At.clearTimeout(e.m),e.m=null)}function ua(e,t){e.l.push(new _i(e.Za++,t)),3==e.G&&sa(e)}function sa(e){Ti(e.i)||e.m||(e.m=!0,er(e.Ha,e),e.C=0)}function ca(e,t){var n;n=t?t.m:e.V++;var r=ni(e.F);ui(r,"SID",e.J),ui(r,"RID",n),ui(r,"AID",e.U),la(e,r),e.o&&e.s&&ta(r,e.o,e.s),n=new Lr(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=fa(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Ai(e.i,n),Ur(n,r,t)}function la(e,t){e.j&&$r({},(function(e,n){ui(t,n,e)}))}function fa(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Ft(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Li(l,o,"req"+c+"_")}catch($a){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ha(e){e.g||e.u||(e.Y=1,er(e.Ga,e),e.A=0)}function da(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=_r(Ft(e.Ga,e),ga(e,e.A)),e.A++,!0)}function va(e){null!=e.B&&(At.clearTimeout(e.B),e.B=null)}function pa(e){e.g=new Lr(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=ni(e.oa);ui(t,"RID","rpc"),ui(t,"SID",e.J),ui(t,"CI",e.N?"0":"1"),ui(t,"AID",e.U),la(e,t),ui(t,"TYPE","xmlhttp"),e.o&&e.s&&ta(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=si(ni(t)),n.s=null,n.U=!0,Br(n,e)}function ya(e){null!=e.v&&(At.clearTimeout(e.v),e.v=null)}function ma(e,t){var n=null;if(e.g==t){ya(e),va(e),e.g=null;var r=2}else{if(!Ci(e.i,t))return;n=t.D,Di(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Gn(r=mr(),new xr(r,n,t,i)),sa(e)}else ha(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ii(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=_r(Ft(e.Ha,e,t),ga(e,e.C)),e.C++,!0))}(e,t)||2==r&&da(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ka(e,5);break;case 4:ka(e,10);break;case 3:ka(e,6);break;default:ka(e,2)}}function ga(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function ka(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Ft(e.jb,e);n||(n=new ti("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||ri(n,"https"),si(n)),function(e,t){var n=new dr;if(At.Image){var r=new Image;r.onload=Vt(Oi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Vt(Oi,n,r,"TestLoadImage: error",!1,t),r.onabort=Vt(Oi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Vt(Oi,n,r,"TestLoadImage: timeout",!1,t),At.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else wr(2);e.G=0,e.j&&e.j.va(t),ba(e),oa(e)}function ba(e){e.G=0,e.I=-1,e.j&&(0==Ni(e.i).length&&0==e.l.length||(e.i.i.length=0,Gt(e.l),e.l.length=0),e.j.ua())}function wa(e,t,n){var r=function(e){return e instanceof ti?ni(e):new ti(e,void 0)}(n);if(""!=r.i)t&&ii(r,t+"."+r.i),ai(r,r.m);else{var i=At.location;r=function(e,t,n,r){var i=new ti(null,void 0);return e&&ri(i,e),t&&ii(i,t),n&&ai(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Zt(e.aa,(function(e,t){ui(r,t,e)})),t=e.D,n=e.sa,t&&n&&ui(r,t,n),ui(r,"VER",e.ma),la(e,r),r}function xa(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new qi(new Mi({ib:!0})):new qi(e.qa)).L=e.H,t}function _a(){}function Sa(){if(un&&!(10<=Number(bn)))throw Error("Environmental error: no available transport.")}function Ea(e,t){Kn.call(this),this.g=new ra(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Ht(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ht(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ca(this)}function Ta(e){Nr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ia(){Pr.call(this),this.status=1}function Ca(e){this.g=e}(Et=qi.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ar.g(),this.C=this.u?Ir(this.u):Ir(Ar),this.g.onreadystatechange=Ft(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Qi(this,a)}e=n||"";var i=new Yr(this.headers);r&&$r(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Wi,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=At.FormData&&e instanceof At.FormData,!(0<=zt(Hi,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ji(this),0<this.B&&((this.K=function(e){return un&&gn()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ft(this.pa,this)):this.A=or(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Qi(this,a)}},Et.pa=function(){"undefined"!=typeof Ct&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gn(this,"timeout"),this.abort(8))},Et.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Gn(this,"complete"),Gn(this,"abort"),Yi(this))},Et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yi(this,!0)),qi.Z.M.call(this)},Et.Fa=function(){this.s||(this.F||this.v||this.l?$i(this):this.cb())},Et.cb=function(){$i(this)},Et.ba=function(){try{return 2<Zi(this)?this.g.status:-1}catch(J_){return-1}},Et.ga=function(){try{return this.g?this.g.responseText:""}catch(J_){return""}},Et.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),zi(t)}},Et.Da=function(){return this.m},Et.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Et=ra.prototype).ma=8,Et.G=1,Et.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(Z_){}},Et.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Lr(this,this.h,e,void 0),n=this.s;if(this.P&&(n?nn(n=en(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=fa(this,t,r),ui(i=ni(this.F),"RID",e),ui(i,"CVER",22),this.D&&ui(i,"X-HTTP-Session-Id",this.D),la(this,i),this.o&&n&&ta(i,this.o,n),Ai(this.i,t),this.Ra&&ui(i,"TYPE","init"),this.ja?(ui(i,"$req",r),ui(i,"SID","null"),t.$=!0,Ur(t,i,null)):Ur(t,i,r),this.G=2}}else 3==this.G&&(e?ca(this,e):0==this.l.length||Ti(this.i)||ca(this))},Et.Ga=function(){if(this.u=null,pa(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=_r(Ft(this.bb,this),e)}},Et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,wr(10),aa(this),pa(this))},Et.ab=function(){null!=this.v&&(this.v=null,aa(this),da(this),wr(19))},Et.jb=function(e){e?(this.h.info("Successfully pinged google.com"),wr(2)):(this.h.info("Failed to ping google.com"),wr(1))},(Et=_a.prototype).xa=function(){},Et.wa=function(){},Et.va=function(){},Et.ua=function(){},Et.Oa=function(){},Sa.prototype.g=function(e,t){return new Ea(e,t)},Ut(Ea,Kn),Ea.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),er(Ft(e.hb,e,t))),wr(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=wa(e,null,e.W),sa(e)},Ea.prototype.close=function(){ia(this.g)},Ea.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,ua(this.g,t)}else this.v?((t={}).__data__=Wn(e),ua(this.g,t)):ua(this.g,e)},Ea.prototype.M=function(){this.g.j=null,delete this.j,ia(this.g),delete this.g,Ea.Z.M.call(this)},Ut(Ta,Nr),Ut(Ia,Pr),Ut(Ca,_a),Ca.prototype.xa=function(){Gn(this.g,"a")},Ca.prototype.wa=function(e){Gn(this.g,new Ta(e))},Ca.prototype.va=function(e){Gn(this.g,new Ia(e))},Ca.prototype.ua=function(){Gn(this.g,"b")},Sa.prototype.createWebChannel=Sa.prototype.g,Ea.prototype.send=Ea.prototype.u,Ea.prototype.open=Ea.prototype.m,Ea.prototype.close=Ea.prototype.close,Sr.NO_ERROR=0,Sr.TIMEOUT=8,Sr.HTTP_ERROR=6,Er.COMPLETE="complete",Cr.EventType=Dr,Dr.OPEN="a",Dr.CLOSE="b",Dr.ERROR="c",Dr.MESSAGE="d",Kn.prototype.listen=Kn.prototype.N,qi.prototype.listenOnce=qi.prototype.O,qi.prototype.getLastError=qi.prototype.La,qi.prototype.getLastErrorCode=qi.prototype.Da,qi.prototype.getStatus=qi.prototype.ba,qi.prototype.getResponseJson=qi.prototype.Qa,qi.prototype.getResponseText=qi.prototype.ga,qi.prototype.send=qi.prototype.ea;var Aa=It.createWebChannelTransport=function(){return new Sa},Da=It.getStatEventTarget=function(){return mr()},Na=It.ErrorCode=Sr,Pa=It.EventType=Er,Ra=It.Event=pr,La=It.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Oa=It.FetchXmlHttpFactory=Mi,Ma=It.WebChannel=Cr,Fa=It.XhrIo=qi,Va="@firebase/firestore",Ua=function(){function e(t){k(this,e),this.uid=t}return w(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ua.UNAUTHENTICATED=new Ua(null),Ua.GOOGLE_CREDENTIALS=new Ua("google-credentials-uid"),Ua.FIRST_PARTY=new Ua("first-party-uid"),Ua.MOCK_USER=new Ua("mock-user");var Ba="9.9.1",ja=new le("@firebase/firestore");function za(){return ja.logLevel}function qa(e){if(ja.logLevel<=re.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ha);ja.debug.apply(ja,["Firestore (".concat(Ba,"): ").concat(e)].concat(J(i)))}}function Ka(e){if(ja.logLevel<=re.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ha);ja.error.apply(ja,["Firestore (".concat(Ba,"): ").concat(e)].concat(J(i)))}}function Ga(e){if(ja.logLevel<=re.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ha);ja.warn.apply(ja,["Firestore (".concat(Ba,"): ").concat(e)].concat(J(i)))}}function Ha(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Wa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Ba,") INTERNAL ASSERTION FAILED: ")+e;throw Ka(t),new Error(t)}function Qa(e,t){e||Wa()}function Xa(e,t){return e}var $a={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ya=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return w(n)}(j),Ja=w((function e(){var t=this;k(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Za=w((function e(t,n){k(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),eo=function(){function e(){k(this,e)}return w(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ua.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),to=function(){function e(t){k(this,e),this.token=t,this.changeListener=null}return w(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),no=function(){function e(t){k(this,e),this.t=t,this.currentUser=Ua.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return w(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Ja;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Ja,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){qa("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(qa("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ja)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(qa("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Qa("string"==typeof n.accessToken),new Za(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Qa(null===e||"string"==typeof e),new Ua(e)}}]),e}(),ro=w((function e(t,n,r){k(this,e),this.type="FirstParty",this.user=Ua.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),io=function(){function e(t,n,r){k(this,e),this.h=t,this.l=n,this.m=r}return w(e,[{key:"getToken",value:function(){return Promise.resolve(new ro(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ua.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ao=w((function e(t){k(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),oo=function(){function e(t){k(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return w(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&qa("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,qa("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){qa("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):qa("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Qa("string"==typeof t.token),e.p=t.token,new ao(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function uo(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var so=function(){function e(){k(this,e)}return w(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=uo(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function co(e,t){return e<t?-1:e>t?1:0}function lo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function fo(e){return e+"\0"}var ho=function(){function e(t,n){if(k(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Ya($a.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ya($a.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ya($a.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ya($a.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return w(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?co(this.nanoseconds,e.nanoseconds):co(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),vo=function(){function e(t){k(this,e),this.timestamp=t}return w(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new ho(0,0))}},{key:"max",value:function(){return new e(new ho(253402300799,999999999))}}]),e}(),po=function(){function e(t,n,r){k(this,e),void 0===n?n=0:n>t.length&&Wa(),void 0===r?r=t.length-n:r>t.length-n&&Wa(),this.segments=t,this.offset=n,this.len=r}return w(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),yo=function(e){E(n,e);var t=A(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Ya($a.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,J(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(po),mo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,go=function(e){E(n,e);var t=A(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return mo.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Ya($a.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Ya($a.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Ya($a.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Ya($a.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(po),ko=function(){function e(t){k(this,e),this.path=t}return w(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===yo.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(yo.fromString(t))}},{key:"fromName",value:function(t){return new e(yo.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(yo.emptyPath())}},{key:"comparator",value:function(e,t){return yo.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new yo(t.slice()))}}]),e}(),bo=w((function e(t,n,r,i){k(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function wo(e){return e.fields.find((function(e){return 2===e.kind}))}function xo(e){return e.fields.filter((function(e){return 2!==e.kind}))}bo.UNKNOWN_ID=-1;var _o=w((function e(t,n){k(this,e),this.fieldPath=t,this.kind=n})),So=function(){function e(t,n){k(this,e),this.sequenceNumber=t,this.offset=n}return w(e,null,[{key:"empty",value:function(){return new e(0,Io.min())}}]),e}();function Eo(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=vo.fromTimestamp(1e9===r?new ho(n+1,0):new ho(n,r));return new Io(i,ko.empty(),t)}function To(e){return new Io(e.readTime,e.key,-1)}var Io=function(){function e(t,n,r){k(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return w(e,null,[{key:"min",value:function(){return new e(vo.min(),ko.empty(),-1)}},{key:"max",value:function(){return new e(vo.max(),ko.empty(),-1)}}]),e}();function Co(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ko.comparator(e.documentKey,t.documentKey))?n:co(e.largestBatchId,t.largestBatchId)}var Ao="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Do=function(){function e(){k(this,e),this.onCommittedListeners=[]}return w(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function No(e){return Po.apply(this,arguments)}function Po(){return Po=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===$a.FAILED_PRECONDITION&&t.message===Ao){e.next=2;break}throw t;case 2:qa("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Po.apply(this,arguments)}var Ro=function(){function e(t){var n=this;k(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return w(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Wa(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=x(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Lo=function(){function e(t,n){var r=this;k(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new Ja,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new Fo(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=zo(e.target.error);r.T.reject(new Fo(t,n))}}return w(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(qa("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Uo(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Fo(n,t)}}}]),e}(),Oo=function(){function e(t,n,r){k(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(V())&&Ka("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return w(e,[{key:"k",value:function(){var e=g(y().mark((function e(t){var n=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return qa("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Fo(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ya($a.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Ya($a.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Fo(t,n))},i.onupgradeneeded=function(e){qa("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.O(t,i.transaction,e.oldVersion,n.version).next((function(){qa("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.M&&(this.db.onversionchange=function(e){return n.M(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.M=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=g(y().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(y().mark((function e(){var n,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=Lo.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),Ro.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,qa("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return qa("SimpleDb","Removing database:",e),Bo(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!B())return!1;if(e.S())return!0;var t=V(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/mmphotos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Mo=function(){function e(t){k(this,e),this.$=t,this.B=!1,this.L=null}return w(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return Bo(this.$.delete())}}]),e}(),Fo=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this,$a.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return w(n)}(Ya);function Vo(e){return"IndexedDbTransactionError"===e.name}var Uo=function(){function e(t){k(this,e),this.store=t}return w(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(qa("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(qa("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Bo(n)}},{key:"add",value:function(e){return qa("SimpleDb","ADD",this.store.name,e,e),Bo(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Bo(this.store.get(e)).next((function(n){return void 0===n&&(n=null),qa("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return qa("SimpleDb","DELETE",this.store.name,e),Bo(this.store.delete(e))}},{key:"count",value:function(){return qa("SimpleDb","COUNT",this.store.name),Bo(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Ro((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Ro((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){qa("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new Ro((function(n,r){t.onerror=function(e){var t=zo(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new Ro((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Mo(i),o=t(i.primaryKey,i.value,a);if(o instanceof Ro){var u=o.catch((function(e){return a.done(),Ro.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Ro.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Bo(e){return new Ro((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=zo(e.target.error);n(t)}}))}var jo=!1;function zo(e){var t=Oo.v(V());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Ya("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return jo||(jo=!0,setTimeout((function(){throw r}),0)),r}}return e}var qo=function(){function e(t,n){k(this,e),this.asyncQueue=t,this.X=n,this.task=null}return w(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;qa("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=qa,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Vo(e.t4)){e.next=17;break}qa("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,No(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Ko=function(){function e(t,n){k(this,e),this.localStore=t,this.persistence=n}return w(e,[{key:"tt",value:function(){var e=g(y().mark((function e(){var t,n=this,r=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Ro.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return qa("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return qa("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=To(t);Co(r,n)>0&&(n=r)})),new Io(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Go=function(){function e(t,n){var r=this;k(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return w(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function Ho(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Wo(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Qo(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Go.ot=-1;var Xo=function(){function e(t,n){k(this,e),this.comparator=t,this.root=n||Yo.EMPTY}return w(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Yo.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Yo.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new $o(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new $o(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new $o(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new $o(this.root,e,this.comparator,!0)}}]),e}(),$o=function(){function e(t,n,r,i){k(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return w(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Yo=function(){function e(t,n,r,i,a){k(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return w(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Wa();if(this.right.isRed())throw Wa();var e=this.left.check();if(e!==this.right.check())throw Wa();return e+(this.isRed()?0:1)}}]),e}();Yo.EMPTY=null,Yo.RED=!0,Yo.BLACK=!1,Yo.EMPTY=new(function(){function e(){k(this,e),this.size=0}return w(e,[{key:"key",get:function(){throw Wa()}},{key:"value",get:function(){throw Wa()}},{key:"color",get:function(){throw Wa()}},{key:"left",get:function(){throw Wa()}},{key:"right",get:function(){throw Wa()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Yo(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Jo=function(){function e(t){k(this,e),this.comparator=t,this.data=new Xo(this.comparator)}return w(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Zo(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Zo(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Zo=function(){function e(t){k(this,e),this.iter=t}return w(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function eu(e){return e.hasNext()?e.getNext():void 0}var tu=function(){function e(t){k(this,e),this.fields=t,t.sort(go.comparator)}return w(e,[{key:"unionWith",value:function(t){var n,r=new Jo(go.comparator),i=x(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=x(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=x(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return lo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var nu=function(e){function t(e){k(this,t),this.binaryString=e}return w(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return co(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();nu.EMPTY_BYTE_STRING=new nu("");var ru=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iu(e){if(Qa(!!e),"string"==typeof e){var t=0,n=ru.exec(e);if(Qa(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:au(e.seconds),nanos:au(e.nanos)}}function au(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ou(e){return"string"==typeof e?nu.fromBase64String(e):nu.fromUint8Array(e)}function uu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function su(e){var t=e.mapValue.fields.__previous_value__;return uu(t)?su(t):t}function cu(e){var t=iu(e.mapValue.fields.__local_write_time__.timestampValue);return new ho(t.seconds,t.nanos)}var lu=w((function e(t,n,r,i,a,o,u,s){k(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),fu=function(){function e(t,n){k(this,e),this.projectId=t,this.database=n||"(default)"}return w(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function hu(e){return null==e}function du(e){return 0===e&&1/e==-1/0}function vu(e){return"number"==typeof e&&Number.isInteger(e)&&!du(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var pu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yu={nullValue:"NULL_VALUE"};function mu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?uu(e)?4:Nu(e)?9007199254740991:10:Wa()}function gu(e,t){if(e===t)return!0;var n=mu(e);if(n!==mu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return cu(e).isEqual(cu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=iu(e.timestampValue),r=iu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ou(e.bytesValue).isEqual(ou(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return au(e.geoPointValue.latitude)===au(t.geoPointValue.latitude)&&au(e.geoPointValue.longitude)===au(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return au(e.integerValue)===au(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=au(e.doubleValue),r=au(t.doubleValue);return n===r?du(n)===du(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return lo(e.arrayValue.values||[],t.arrayValue.values||[],gu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ho(n)!==Ho(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gu(n[i],r[i])))return!1;return!0}(e,t);default:return Wa()}}function ku(e,t){return void 0!==(e.values||[]).find((function(e){return gu(e,t)}))}function bu(e,t){if(e===t)return 0;var n=mu(e),r=mu(t);if(n!==r)return co(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return co(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=au(e.integerValue||e.doubleValue),r=au(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return wu(e.timestampValue,t.timestampValue);case 4:return wu(cu(e),cu(t));case 5:return co(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ou(e),r=ou(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=co(n[i],r[i]);if(0!==a)return a}return co(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=co(au(e.latitude),au(t.latitude));return 0!==n?n:co(au(e.longitude),au(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=bu(n[i],r[i]);if(a)return a}return co(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===pu.mapValue&&t===pu.mapValue)return 0;if(e===pu.mapValue)return 1;if(t===pu.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=co(r[o],a[o]);if(0!==u)return u;var s=bu(n[r[o]],i[a[o]]);if(0!==s)return s}return co(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Wa()}}function wu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return co(e,t);var n=iu(e),r=iu(t),i=co(n.seconds,r.seconds);return 0!==i?i:co(n.nanos,r.nanos)}function xu(e){return _u(e)}function _u(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=iu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ou(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ko.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=x(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=_u(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=x(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(_u(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Wa();var t,n}function Su(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Eu(e){return!!e&&"integerValue"in e}function Tu(e){return!!e&&"arrayValue"in e}function Iu(e){return!!e&&"nullValue"in e}function Cu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Au(e){return!!e&&"mapValue"in e}function Du(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Wo(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Du(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Du(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Nu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Pu(e){return"nullValue"in e?yu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Su(fu.empty(),ko.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Wa()}function Ru(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Su(fu.empty(),ko.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?pu:Wa()}function Lu(e,t){var n=bu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ou(e,t){var n=bu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Mu=function(){function e(t){k(this,e),this.value=t}return w(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Au(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Du(t)}},{key:"setAll",value:function(e){var t=this,n=go.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Du(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Au(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return gu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Au(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Wo(t,(function(t,n){return e[t]=n}));var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Du(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Fu(e){var t=[];return Wo(e.fields,(function(e,n){var r=new go([e]);if(Au(n)){var i=Fu(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=x(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new tu(t)}var Vu=function(){function e(t,n,r,i,a,o){k(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return w(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Mu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Mu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=vo.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,vo.min(),vo.min(),Mu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,vo.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,vo.min(),Mu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,vo.min(),Mu.empty(),2)}}]),e}(),Uu=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;k(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function Bu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Uu(e,t,n,r,i,a,o)}function ju(e){var t=Xa(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+xu(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),hu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return xu(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return xu(e)})).join(",")),t.ut=n}return t.ut}function zu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!is(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!gu(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!os(e.startAt,t.startAt)&&os(e.endAt,t.endAt)}function qu(e){return ko.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ku(e,t){return e.filters.filter((function(e){return e instanceof Wu&&e.field.isEqual(t)}))}function Gu(e,t,n){var r,i=yu,a=!0,o=x(Ku(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=yu,c=!0;switch(u.op){case"<":case"<=":s=Pu(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=yu}Lu({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Lu({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Hu(e,t,n){var r,i=pu,a=!0,o=x(Ku(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=pu,c=!0;switch(u.op){case">=":case">":s=Ru(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=pu}Ou({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ou({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Wu=function(e){E(n,e);var t=A(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(bu(t,this.value)):null!==t&&mu(this.value)===mu(t)&&this.at(bu(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wa()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Qu(e,t,r):"array-contains"===t?new Ju(e,r):"in"===t?new Zu(e,r):"not-in"===t?new es(e,r):"array-contains-any"===t?new ts(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new Xu(e,n):new $u(e,n)}}]),n}(function(){return w((function e(){k(this,e)}))}()),Qu=function(e){E(n,e);var t=A(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e,r,i)).key=ko.fromName(i.referenceValue),a}return w(n,[{key:"matches",value:function(e){var t=ko.comparator(e.key,this.key);return this.at(t)}}]),n}(Wu),Xu=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,"in",r)).keys=Yu("in",r),i}return w(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Wu),$u=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,"not-in",r)).keys=Yu("not-in",r),i}return w(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Wu);function Yu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ko.fromName(e.referenceValue)}))}var Ju=function(e){E(n,e);var t=A(n);function n(e,r){return k(this,n),t.call(this,e,"array-contains",r)}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Tu(t)&&ku(t.arrayValue,this.value)}}]),n}(Wu),Zu=function(e){E(n,e);var t=A(n);function n(e,r){return k(this,n),t.call(this,e,"in",r)}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ku(this.value.arrayValue,t)}}]),n}(Wu),es=function(e){E(n,e);var t=A(n);function n(e,r){return k(this,n),t.call(this,e,"not-in",r)}return w(n,[{key:"matches",value:function(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ku(this.value.arrayValue,t)}}]),n}(Wu),ts=function(e){E(n,e);var t=A(n);function n(e,r){return k(this,n),t.call(this,e,"array-contains-any",r)}return w(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Tu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ku(t.value.arrayValue,e)}))}}]),n}(Wu),ns=w((function e(t,n){k(this,e),this.position=t,this.inclusive=n})),rs=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";k(this,e),this.field=t,this.dir=n}));function is(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function as(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ko.comparator(ko.fromName(o.referenceValue),n.key):bu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function os(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!gu(e.position[n],t.position[n]))return!1;return!0}var us=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;k(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function ss(e,t,n,r,i,a,o,u){return new us(e,t,n,r,i,a,o,u)}function cs(e){return new us(e)}function ls(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function fs(e){var t,n=x(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function hs(e){return null!==e.collectionGroup}function ds(e){var t=Xa(e);if(null===t.lt){t.lt=[];var n=fs(t),r=ls(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new rs(n)),t.lt.push(new rs(go.keyField(),"asc"));else{var i,a=!1,o=x(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new rs(go.keyField(),s))}}}return t.lt}function vs(e){var t=Xa(e);if(!t.ft)if("F"===t.limitType)t.ft=Bu(t.path,t.collectionGroup,ds(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=x(ds(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new rs(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new ns(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ns(t.startAt.position,t.startAt.inclusive):null;t.ft=Bu(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function ps(e,t,n){return new us(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ys(e,t){return zu(vs(e),vs(t))&&e.limitType===t.limitType}function ms(e){return"".concat(ju(vs(e)),"|lt:").concat(e.limitType)}function gs(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(xu(t.value));var t})).join(", "),"]")),hu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return xu(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return xu(e)})).join(",")),"Target(".concat(t,")")}(vs(e)),"; limitType=").concat(e.limitType,")")}function ks(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ko.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=x(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=x(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=as(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ds(e),t))&&!(e.endAt&&!function(e,t,n){var r=as(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ds(e),t))}(e,t)}function bs(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ws(e){return function(t,n){var r,i=!1,a=x(ds(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=xs(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function xs(e,t,n){var r=e.field.isKeyField()?ko.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?bu(r,i):Wa()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wa()}}function _s(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:du(t)?"-0":t}}function Ss(e){return{integerValue:""+e}}function Es(e,t){return vu(t)?Ss(t):_s(e,t)}var Ts=w((function e(){k(this,e),this._=void 0}));function Is(e,t,n){return e instanceof Ds?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ns?Ps(e,t):e instanceof Rs?Ls(e,t):function(e,t){var n=As(e,t),r=Ms(n)+Ms(e._t);return Eu(n)&&Eu(e._t)?Ss(r):_s(e.wt,r)}(e,t)}function Cs(e,t,n){return e instanceof Ns?Ps(e,t):e instanceof Rs?Ls(e,t):n}function As(e,t){return e instanceof Os?Eu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Ds=function(e){E(n,e);var t=A(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n)}(Ts),Ns=function(e){E(n,e);var t=A(n);function n(e){var r;return k(this,n),(r=t.call(this)).elements=e,r}return w(n)}(Ts);function Ps(e,t){var n,r=Fs(t),i=x(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return gu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Rs=function(e){E(n,e);var t=A(n);function n(e){var r;return k(this,n),(r=t.call(this)).elements=e,r}return w(n)}(Ts);function Ls(e,t){var n,r=Fs(t),i=x(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!gu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Os=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).wt=e,i._t=r,i}return w(n)}(Ts);function Ms(e){return au(e.integerValue||e.doubleValue)}function Fs(e){return Tu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Vs=w((function e(t,n){k(this,e),this.field=t,this.transform=n}));var Us=w((function e(t,n){k(this,e),this.version=t,this.transformResults=n})),Bs=function(){function e(t,n){k(this,e),this.updateTime=t,this.exists=n}return w(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function js(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var zs=w((function e(){k(this,e)}));function qs(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new tc(e.key,Bs.none()):new Qs(e.key,e.data,Bs.none());var n,r=e.data,i=Mu.empty(),a=new Jo(go.comparator),o=x(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Xs(e.key,i,new tu(a.toArray()),Bs.none())}function Ks(e,t,n){e instanceof Qs?function(e,t,n){var r=e.value.clone(),i=Ys(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Xs?function(e,t,n){if(js(e.precondition,t)){var r=Ys(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll($s(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Gs(e,t,n,r){return e instanceof Qs?function(e,t,n,r){if(!js(e.precondition,t))return n;var i=e.value.clone(),a=Js(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Xs?function(e,t,n,r){if(!js(e.precondition,t))return n;var i=Js(e.fieldTransforms,r,t),a=t.data;return a.setAll($s(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return js(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Hs(e,t){var n,r=null,i=x(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=As(a.transform,o||null);null!=u&&(null===r&&(r=Mu.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Ws(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&lo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ns&&t instanceof Ns||e instanceof Rs&&t instanceof Rs?lo(e.elements,t.elements,gu):e instanceof Os&&t instanceof Os?gu(e._t,t._t):e instanceof Ds&&t instanceof Ds}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Qs=function(e){E(n,e);var t=A(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return k(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return w(n,[{key:"getFieldMask",value:function(){return null}}]),n}(zs),Xs=function(e){E(n,e);var t=A(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return k(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return w(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(zs);function $s(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ys(e,t,n){var r=new Map;Qa(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Cs(o,u,n[i]))}return r}function Js(e,t,n){var r,i=new Map,a=x(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Is(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Zs,ec,tc=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return w(n,[{key:"getFieldMask",value:function(){return null}}]),n}(zs),nc=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return w(n,[{key:"getFieldMask",value:function(){return null}}]),n}(zs),rc=w((function e(t){k(this,e),this.count=t}));function ic(e){switch(e){default:return Wa();case $a.CANCELLED:case $a.UNKNOWN:case $a.DEADLINE_EXCEEDED:case $a.RESOURCE_EXHAUSTED:case $a.INTERNAL:case $a.UNAVAILABLE:case $a.UNAUTHENTICATED:return!1;case $a.INVALID_ARGUMENT:case $a.NOT_FOUND:case $a.ALREADY_EXISTS:case $a.PERMISSION_DENIED:case $a.FAILED_PRECONDITION:case $a.ABORTED:case $a.OUT_OF_RANGE:case $a.UNIMPLEMENTED:case $a.DATA_LOSS:return!0}}function ac(e){if(void 0===e)return Ka("GRPC error has no .code"),$a.UNKNOWN;switch(e){case Zs.OK:return $a.OK;case Zs.CANCELLED:return $a.CANCELLED;case Zs.UNKNOWN:return $a.UNKNOWN;case Zs.DEADLINE_EXCEEDED:return $a.DEADLINE_EXCEEDED;case Zs.RESOURCE_EXHAUSTED:return $a.RESOURCE_EXHAUSTED;case Zs.INTERNAL:return $a.INTERNAL;case Zs.UNAVAILABLE:return $a.UNAVAILABLE;case Zs.UNAUTHENTICATED:return $a.UNAUTHENTICATED;case Zs.INVALID_ARGUMENT:return $a.INVALID_ARGUMENT;case Zs.NOT_FOUND:return $a.NOT_FOUND;case Zs.ALREADY_EXISTS:return $a.ALREADY_EXISTS;case Zs.PERMISSION_DENIED:return $a.PERMISSION_DENIED;case Zs.FAILED_PRECONDITION:return $a.FAILED_PRECONDITION;case Zs.ABORTED:return $a.ABORTED;case Zs.OUT_OF_RANGE:return $a.OUT_OF_RANGE;case Zs.UNIMPLEMENTED:return $a.UNIMPLEMENTED;case Zs.DATA_LOSS:return $a.DATA_LOSS;default:return Wa()}}(ec=Zs||(Zs={}))[ec.OK=0]="OK",ec[ec.CANCELLED=1]="CANCELLED",ec[ec.UNKNOWN=2]="UNKNOWN",ec[ec.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ec[ec.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ec[ec.NOT_FOUND=5]="NOT_FOUND",ec[ec.ALREADY_EXISTS=6]="ALREADY_EXISTS",ec[ec.PERMISSION_DENIED=7]="PERMISSION_DENIED",ec[ec.UNAUTHENTICATED=16]="UNAUTHENTICATED",ec[ec.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ec[ec.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ec[ec.ABORTED=10]="ABORTED",ec[ec.OUT_OF_RANGE=11]="OUT_OF_RANGE",ec[ec.UNIMPLEMENTED=12]="UNIMPLEMENTED",ec[ec.INTERNAL=13]="INTERNAL",ec[ec.UNAVAILABLE=14]="UNAVAILABLE",ec[ec.DATA_LOSS=15]="DATA_LOSS";var oc=function(){function e(t,n){k(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return w(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Wo(this.inner,(function(t,n){var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Qo(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),uc=new Xo(ko.comparator);function sc(){return uc}var cc=new Xo(ko.comparator);function lc(){for(var e=cc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function fc(e){var t=cc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function hc(){return vc()}function dc(){return vc()}function vc(){return new oc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var pc=new Xo(ko.comparator),yc=new Jo(ko.comparator);function mc(){for(var e=yc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var gc=new Jo(co);function kc(){return gc}var bc=function(){function e(t,n,r,i,a){k(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return w(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,wc.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(vo.min(),r,kc(),sc(),mc())}}]),e}(),wc=function(){function e(t,n,r,i,a){k(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return w(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(nu.EMPTY_BYTE_STRING,n,mc(),mc(),mc())}}]),e}(),xc=w((function e(t,n,r,i){k(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),_c=w((function e(t,n){k(this,e),this.targetId=t,this.It=n})),Sc=w((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;k(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Ec=function(){function e(){k(this,e),this.Tt=0,this.Et=Cc(),this.At=nu.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return w(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=mc(),t=mc(),n=mc();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Wa()}})),new wc(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=Cc()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),Tc=function(){function e(t){k(this,e),this.Mt=t,this.Ft=new Map,this.$t=sc(),this.Bt=Ic(),this.Lt=new Jo(co)}return w(e,[{key:"Ut",value:function(e){var t,n=x(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=x(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:Wa()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(qu(i))if(0===n){var a=new ko(i.path);this.Kt(t,a,Vu.newNoDocument(a,vo.min()))}else Qa(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&qu(a.target)){var o=new ko(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,Vu.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=mc();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new bc(e,n,this.Lt,this.$t,r);return this.$t=sc(),this.Bt=Ic(),this.Lt=new Jo(co),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new Ec,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new Jo(co),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||qa("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new Ec),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Ic(){return new Xo(ko.comparator)}function Cc(){return new Xo(ko.comparator)}var Ac={asc:"ASCENDING",desc:"DESCENDING"},Dc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nc=w((function e(t,n){k(this,e),this.databaseId=t,this.dt=n}));function Pc(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rc(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Lc(e,t){return Pc(e,t.toTimestamp())}function Oc(e){return Qa(!!e),vo.fromTimestamp(function(e){var t=iu(e);return new ho(t.seconds,t.nanos)}(e))}function Mc(e,t){return function(e){return new yo(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Fc(e){var t=yo.fromString(e);return Qa(ol(t)),t}function Vc(e,t){return Mc(e.databaseId,t.path)}function Uc(e,t){var n=Fc(t);if(n.get(1)!==e.databaseId.projectId)throw new Ya($a.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ya($a.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ko(qc(n))}function Bc(e,t){return Mc(e.databaseId,t)}function jc(e){var t=Fc(e);return 4===t.length?yo.emptyPath():qc(t)}function zc(e){return new yo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qc(e){return Qa(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Kc(e,t,n){return{name:Vc(e,t),fields:n.value.mapValue.fields}}function Gc(e,t,n){var r=Uc(e,t.name),i=Oc(t.updateTime),a=new Mu({mapValue:{fields:t.fields}}),o=Vu.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Hc(e,t){return"found"in t?function(e,t){Qa(!!t.found),t.found.name,t.found.updateTime;var n=Uc(e,t.found.name),r=Oc(t.found.updateTime),i=new Mu({mapValue:{fields:t.found.fields}});return Vu.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Qa(!!t.missing),Qa(!!t.readTime);var n=Uc(e,t.missing),r=Oc(t.readTime);return Vu.newNoDocument(n,r)}(e,t):Wa()}function Wc(e,t){var n;if(t instanceof Qs)n={update:Kc(e,t.key,t.value)};else if(t instanceof tc)n={delete:Vc(e,t.key)};else if(t instanceof Xs)n={update:Kc(e,t.key,t.data),updateMask:al(t.fieldMask)};else{if(!(t instanceof nc))return Wa();n={verify:Vc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ds)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ns)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Os)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Wa()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Lc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Wa()}(e,t.precondition)),n}function Qc(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Bs.updateTime(Oc(e.updateTime)):void 0!==e.exists?Bs.exists(e.exists):Bs.none()}(t.currentDocument):Bs.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Qa("REQUEST_TIME"===t.setToServerValue),n=new Ds;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Ns(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Rs(i)}else"increment"in t?n=new Os(e,t.increment):Wa();var a=go.fromServerFormat(t.fieldPath);return new Vs(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Uc(e,t.update.name),a=new Mu({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new tu(t.map((function(e){return go.fromServerFormat(e)})))}(t.updateMask);return new Xs(i,a,o,n,r)}return new Qs(i,a,n,r)}if(t.delete){var u=Uc(e,t.delete);return new tc(u,n)}if(t.verify){var s=Uc(e,t.verify);return new nc(s,n)}return Wa()}function Xc(e,t){return{documents:[Bc(e,t.path)]}}function $c(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Bc(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Bc(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Cu(e.value))return{unaryFilter:{field:tl(e.field),op:"IS_NAN"}};if(Iu(e.value))return{unaryFilter:{field:tl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Cu(e.value))return{unaryFilter:{field:tl(e.field),op:"IS_NOT_NAN"}};if(Iu(e.value))return{unaryFilter:{field:tl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tl(e.field),op:el(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:tl(e.field),direction:Zc(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||hu(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Yc(e){var t=jc(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Qa(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Jc(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new rs(nl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return hu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ns(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ns(n,t)}(n.endAt)),ss(t,i,u,o,s,"F",c,l)}function Jc(e){return e?void 0!==e.unaryFilter?[il(e)]:void 0!==e.fieldFilter?[rl(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Jc(e)})).reduce((function(e,t){return e.concat(t)})):Wa():[]}function Zc(e){return Ac[e]}function el(e){return Dc[e]}function tl(e){return{fieldPath:e.canonicalString()}}function nl(e){return go.fromServerFormat(e.fieldPath)}function rl(e){return Wu.create(nl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wa()}}(e.fieldFilter.op),e.fieldFilter.value)}function il(e){switch(e.unaryFilter.op){case"IS_NAN":var t=nl(e.unaryFilter.field);return Wu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=nl(e.unaryFilter.field);return Wu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=nl(e.unaryFilter.field);return Wu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=nl(e.unaryFilter.field);return Wu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Wa()}}function al(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function ol(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function ul(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=cl(t)),t=sl(e.get(n),t);return cl(t)}function sl(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function cl(e){return e+"\x01\x01"}function ll(e){var t=e.length;if(Qa(t>=2),2===t)return Qa("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),yo.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Wa(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Wa()}a=o+2}return new yo(r)}var fl=["userId","batchId"];function hl(e,t){return[e,ul(t)]}function dl(e,t,n){return[e,ul(t),n]}var vl={},pl=["prefixPath","collectionGroup","readTime","documentId"],yl=["prefixPath","collectionGroup","documentId"],ml=["collectionGroup","readTime","prefixPath","documentId"],gl=["canonicalId","targetId"],kl=["targetId","path"],bl=["path","targetId"],wl=["collectionId","parent"],xl=["indexId","uid"],_l=["uid","sequenceNumber"],Sl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],El=["indexId","uid","orderedDocumentKey"],Tl=["userId","collectionPath","documentId"],Il=["userId","collectionPath","largestBatchId"],Cl=["userId","collectionGroup","largestBatchId"],Al=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Dl=[].concat(J(Al),["documentOverlays"]),Nl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Pl=Nl,Rl=[].concat(Pl,["indexConfiguration","indexState","indexEntries"]),Ll=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return w(n)}(Do);function Ol(e,t){var n=Xa(e);return Oo.N(n.ee,t)}var Ml=function(){function e(t,n,r,i){k(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return w(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ks(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=x(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Gs(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=x(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Gs(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=dc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=qs(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(vo.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),mc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(function(e,t){return Ws(e,t)}))&&lo(this.baseMutations,e.baseMutations,(function(e,t){return Ws(e,t)}))}}]),e}(),Fl=function(){function e(t,n,r,i){k(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return w(e,null,[{key:"from",value:function(t,n,r){Qa(t.mutations.length===r.length);for(var i=pc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Vl=function(){function e(t,n){k(this,e),this.largestBatchId=t,this.mutation=n}return w(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Ul=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vo.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vo.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nu.EMPTY_BYTE_STRING;k(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return w(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Bl=w((function e(t){k(this,e),this.ne=t}));function jl(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:zl(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Vc(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Pc(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ql(t.version)};else{if(!t.isUnknownDocument())return Wa();r.unknownDocument={path:n.path.toArray(),version:ql(t.version)}}return r}function zl(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ql(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Kl(e){var t=new ho(e.seconds,e.nanoseconds);return vo.fromTimestamp(t)}function Gl(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Qc(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Qc(e.ne,t)})),u=ho.fromMillis(t.localWriteTimeMs);return new Ml(t.batchId,u,n,o)}function Hl(e){var t,n,r=Kl(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Kl(e.lastLimboFreeSnapshotVersion):vo.min();return void 0!==e.query.documents?(Qa(1===(n=e.query).documents.length),t=vs(cs(jc(n.documents[0])))):t=function(e){return vs(Yc(e))}(e.query),new Ul(t,e.targetId,0,e.lastListenSequenceNumber,r,i,nu.fromBase64String(e.resumeToken))}function Wl(e,t){var n,r=ql(t.snapshotVersion),i=ql(t.lastLimboFreeSnapshotVersion);n=qu(t.target)?Xc(e.ne,t.target):$c(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ju(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Ql(e){var t=Yc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ps(t,t.limit,"L"):t}function Xl(e,t){return new Vl(t.largestBatchId,Qc(e.ne,t.overlayMutation))}function $l(e,t){var n=t.path.lastSegment();return[e,ul(t.path.popLast()),n]}function Yl(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:ql(r.readTime),documentKey:ul(r.documentKey.path),largestBatchId:r.largestBatchId}}var Jl=function(){function e(){k(this,e)}return w(e,[{key:"getBundleMetadata",value:function(e,t){return Zl(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Kl(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Zl(e).put({bundleId:(n=t).id,createTime:ql(Oc(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return ef(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Ql(t.bundledQuery),readTime:Kl(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return ef(e).put(function(e){return{name:e.name,readTime:ql(Oc(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Zl(e){return Ol(e,"bundles")}function ef(e){return Ol(e,"namedQueries")}var tf=function(){function e(t,n){k(this,e),this.wt=t,this.userId=n}return w(e,[{key:"getOverlay",value:function(e,t){var n=this;return nf(e).get($l(this.userId,t)).next((function(e){return e?Xl(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=hc();return Ro.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Vl(t,a);i.push(r.ie(e,o))})),Ro.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(ul(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(nf(e).W("collectionPathOverlayIndex",i))})),Ro.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=hc(),a=ul(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return nf(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=x(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Xl(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=hc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nf(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Xl(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return nf(e).put(function(e,t,n){var r=c($l(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Wc(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function nf(e){return Ol(e,"documentOverlays")}var rf=function(){function e(){k(this,e)}return w(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(au(e.integerValue));else if("doubleValue"in e){var n=au(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),du(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(ou(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?Nu(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Wa()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),ko.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function af(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function of(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=af(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}rf.ye=new rf;var uf=function(){function e(){k(this,e),this.buffer=new Uint8Array(1024),this.position=0}return w(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=x(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=x(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=of(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=of(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Oe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),sf=function(){function e(t){k(this,e),this.Me=t}return w(e,[{key:"de",value:function(e){this.Me.pe(e)}},{key:"he",value:function(e){this.Me.be(e)}},{key:"ae",value:function(e){this.Me.ve(e)}},{key:"ue",value:function(){this.Me.Ce()}}]),e}(),cf=function(){function e(t){k(this,e),this.Me=t}return w(e,[{key:"de",value:function(e){this.Me.Ee(e)}},{key:"he",value:function(e){this.Me.Pe(e)}},{key:"ae",value:function(e){this.Me.De(e)}},{key:"ue",value:function(){this.Me.Ne()}}]),e}(),lf=function(){function e(){k(this,e),this.Me=new uf,this.Fe=new sf(this.Me),this.$e=new cf(this.Me)}return w(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Oe",value:function(){return this.Me.Oe()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),ff=function(){function e(t,n,r,i){k(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return w(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function hf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=df(e.arrayValue,t.arrayValue))?n:0!==(n=df(e.directionalValue,t.directionalValue))?n:ko.comparator(e.documentKey,t.documentKey)}function df(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var vf=function(){function e(t){k(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=x(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return w(e,[{key:"Ge",value:function(e){var t=wo(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=xo(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=x(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),pf=function(){function e(){k(this,e),this.ze=new yf}return w(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),Ro.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ro.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ro.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ro.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ro.resolve(null)}},{key:"getIndexType",value:function(e,t){return Ro.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Ro.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ro.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Ro.resolve(Io.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Ro.resolve(Io.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Ro.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ro.resolve()}}]),e}(),yf=function(){function e(){k(this,e),this.index={}}return w(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Jo(yo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Jo(yo.comparator)).toArray()}}]),e}(),mf=new Uint8Array(0),gf=function(){function e(t,n){k(this,e),this.user=t,this.databaseId=n,this.He=new yf,this.Je=new oc((function(e){return ju(e)}),(function(e,t){return zu(e,t)})),this.uid=t.uid||""}return w(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:ul(i)};return kf(e).put(a)}return Ro.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[fo(t),""],!1,!0);return kf(e).K(r).next((function(e){var r,i=x(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(ll(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=wf(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=xf(e);return a.next((function(e){o.put(Yl(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=wf(e),r=xf(e),i=bf(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=bf(e),i=!0,a=new Map;return Ro.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=mc(),o=[];return Ro.forEach(a,(function(i,a){var u;qa("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(ju(t)));var s=function(e,t){var n=wo(t);if(void 0===n)return null;var r,i=x(Ku(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=x(xo(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=x(Ku(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=x(xo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Gu(e,o.fieldPath,e.startAt):Hu(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ns(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=x(xo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Hu(e,o.fieldPath,e.endAt):Gu(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ns(r,i)}(a,i),h=n.Ze(i,a,l),d=n.Ze(i,a,f),v=n.tn(i,a,c),p=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,v);return Ro.forEach(p,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=ko.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Ro.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):mf,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],a),v=o.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,J(u.createRange(h,d,v)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new ff(e,ko.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new ff(e,ko.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new vf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=x(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Ro.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Jo(go.comparator),r=!1,i=x(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=x(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new lf,i=x(xo(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);rf.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Oe()}},{key:"nn",value:function(e){var t=new lf;return rf.ye.re(e,t.Be(0)),t.Oe()}},{key:"un",value:function(e,t){var n=new lf;return rf.ye.re(Su(this.databaseId,t),n.Be(function(e){var t=xo(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new lf);var i,a=0,o=x(xo(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=x(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&Tu(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);rf.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Oe();return t}},{key:"an",value:function(e,t,n){var r,i=J(e),a=[],o=x(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=x(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new lf;f.seed(l.Oe()),rf.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Wu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=wf(e),i=xf(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return Ro.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new So(t.sequenceNumber,new Io(Kl(t.readTime),new ko(ll(t.documentKey)),t.largestBatchId)):So.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new _o(go.fromServerFormat(n),r)}));return new bo(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:co(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=wf(e),a=xf(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Ro.forEach(t,(function(t){return a.put(Yl(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Ro.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Ro.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Ro.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?Ro.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return bf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return bf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=bf(e),i=new Jo(hf);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new ff(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new Jo(hf),r=this.on(t,e);if(null==r)return n;var i=wo(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Tu(a)){var o,u=x(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new ff(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new ff(t.indexId,e.key,mf,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;qa("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=eu(a),s=eu(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=eu(o)):l?(i(u),u=eu(a)):(u=eu(a),s=eu(o))}}(r,i,hf,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),Ro.waitFor(o)}},{key:"ln",value:function(e){var t=1;return xf(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return hf(e,t)})).filter((function(e,t,n){return!t||0!==hf(e,n[t-1])}));var r=[];r.push(e);var i,a=x(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=hf(o,e),s=hf(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,mf,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,mf,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(_f)}},{key:"getMinOffset",value:function(e,t){var n=this;return Ro.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||Wa()}))})).next(_f)}}]),e}();function kf(e){return Ol(e,"collectionParents")}function bf(e){return Ol(e,"indexEntries")}function wf(e){return Ol(e,"indexConfiguration")}function xf(e){return Ol(e,"indexState")}function _f(e){Qa(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Co(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Io(t.readTime,t.documentKey,n)}var Sf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ef=function(){function e(t,n,r){k(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return w(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Tf(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Qa(1===u)})));var c,l=[],f=x(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=dl(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return Ro.waitFor(a).next((function(){return l}))}function If(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Wa();t=e.noDocument}return JSON.stringify(t).length}Ef.DEFAULT_COLLECTION_PERCENTILE=10,Ef.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ef.DEFAULT=new Ef(41943040,Ef.DEFAULT_COLLECTION_PERCENTILE,Ef.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ef.DISABLED=new Ef(-1,0,0);var Cf=function(){function e(t,n,r,i){k(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return w(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Df(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Nf(e),o=Df(e);return o.add({}).next((function(u){Qa("number"==typeof u);var s,c=new Ml(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Wc(e.ne,t)})),i=n.mutations.map((function(t){return Wc(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new Jo((function(e,t){return co(e.canonicalString(),t.canonicalString())})),d=x(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=dl(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(p,vl))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),Ro.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Df(e).get(t).next((function(e){return e?(Qa(e.userId===n.userId),Gl(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?Ro.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Df(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Qa(t.batchId>=r),a=Gl(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Df(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Df(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return Gl(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=hl(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Nf(e).J({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=ll(l);if(s===n.userId&&t.path.isEqual(h))return Df(e).get(f).next((function(e){if(!e)throw Wa();Qa(e.userId===n.userId),a.push(Gl(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Jo(co),i=[];return t.forEach((function(t){var a=hl(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Nf(e).J({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=ll(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Ro.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=hl(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Jo(co);return Nf(e).J({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=ll(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Df(e).get(t).next((function(e){if(null===e)throw Wa();Qa(e.userId===n.userId),r.push(Gl(n.wt,e))})))})),Ro.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Tf(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),Ro.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ro.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Nf(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=ll(e[1]);i.push(a)}else r.done()})).next((function(){Qa(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Af(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return Pf(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return Qa(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Af(e,t,n){var r=hl(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Nf(e).J({range:a,H:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Df(e){return Ol(e,"mutations")}function Nf(e){return Ol(e,"documentMutations")}function Pf(e){return Ol(e,"mutationQueues")}var Rf=function(){function e(t){k(this,e),this.En=t}return w(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),Lf=function(){function e(t,n){k(this,e),this.referenceDelegate=t,this.wt=n}return w(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new Rf(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return vo.fromTimestamp(new ho(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Of(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return Qa(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Of(e).J((function(o,u){var s=Hl(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Ro.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Of(e).J((function(e,n){var r=Hl(n);t(r)}))}},{key:"bn",value:function(e){return Mf(e).get("targetGlobalKey").next((function(e){return Qa(null!==e),e}))}},{key:"Pn",value:function(e,t){return Mf(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return Of(e).put(Wl(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ju(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Of(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Hl(n);zu(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Ff(e);return t.forEach((function(t){var o=ul(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Ro.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Ff(e);return Ro.forEach(t,(function(t){var a=ul(t.path);return Ro.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Ff(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ff(e),i=mc();return r.J({range:n,H:!0},(function(e,t,n){var r=ll(e[1]),a=new ko(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=ul(t.path),r=IDBKeyRange.bound([n],[fo(n)],!1,!0),i=0;return Ff(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return Of(e).get(t).next((function(e){return e?Hl(e):null}))}}]),e}();function Of(e){return Ol(e,"targets")}function Mf(e){return Ol(e,"targetGlobal")}function Ff(e){return Ol(e,"targetDocuments")}function Vf(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=co(r,o);return 0===s?co(i,u):s}var Uf=function(){function e(t){k(this,e),this.Sn=t,this.buffer=new Jo(Vf),this.Dn=0}return w(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Vf(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Bf=function(){function e(t,n,r){k(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return w(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;qa("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Vo(e.t0)){e.next=12;break}qa("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,No(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),jf=function(){function e(t,n){k(this,e),this.On=t,this.params=n}return w(e,[{key:"calculateTargetCount",value:function(e,t){return this.On.Mn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Ro.resolve(Go.ot);var r=new Uf(t);return this.On.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.On.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.On.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.On.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(qa("LruGarbageCollector","Garbage collection skipped; disabled"),Ro.resolve(Sf)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(qa("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Sf):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.On.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(qa("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),za()<=re.DEBUG&&qa("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Ro.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),zf=function(){function e(t,n){k(this,e),this.db=t,this.garbageCollector=function(e,t){return new jf(e,t)}(this,n)}return w(e,[{key:"Mn",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return qf(e,n)}},{key:"removeReference",value:function(e,t,n){return qf(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return qf(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return Pf(e).Y((function(r){return Af(e,r,t).next((function(e){return e&&(n=!0),Ro.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,vo.min()),Ff(e).delete([0,ul(o.path)])}))}));i.push(s)}})).next((function(){return Ro.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return qf(e,t)}},{key:"Ln",value:function(e,t){var n,r=Ff(e),i=Go.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Go.ot&&t(new ko(ll(n)),i),i=s,n=u):i=Go.ot})).next((function(){i!==Go.ot&&t(new ko(ll(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function qf(e,t){return Ff(e).put(function(e,t){return{targetId:0,path:ul(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Kf=function(){function e(){k(this,e),this.changes=new oc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return w(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Vu.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ro.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Gf=function(){function e(t){k(this,e),this.wt=t}return w(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Xf(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Xf(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],zl(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Vu.newInvalidDocument(t);return Xf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($f(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:Vu.newInvalidDocument(t)};return Xf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($f(t))},(function(e,i){r={document:n.Kn(t,i),size:If(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=sc();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=sc(),i=new Xo(ko.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,If(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return Ro.resolve();var r=new Jo(Jf);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound($f(r.first()),$f(r.last())),a=r.getIterator(),o=a.getNext();return Xf(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=ko.fromSegments([].concat(J(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Jf(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q($f(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),zl(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xf(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=sc(),i=x(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(ko.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=sc(),o=Yf(t,n),u=Yf(t,Io.max());return Xf(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(ko.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Wf(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Qf(e).get("remoteDocumentGlobalKey").next((function(e){return Qa(!!e),e}))}},{key:"qn",value:function(e,t){return Qf(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Gc(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ko.fromSegments(t.noDocument.path),i=Kl(t.noDocument.readTime);n=Vu.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Wa();var a=ko.fromSegments(t.unknownDocument.path),o=Kl(t.unknownDocument.version);n=Vu.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new ho(e[0],e[1]);return vo.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(vo.min()))return n}return Vu.newInvalidDocument(e)}}]),e}();function Hf(e){return new Gf(e)}var Wf=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new oc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return w(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Jo((function(e,t){return co(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=jl(t.zn.wt,o);i=i.add(a.path.popLast());var c=If(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=jl(t.zn.wt,o.convertToNoDocument(vo.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),Ro.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Kf);function Qf(e){return Ol(e,"remoteDocumentGlobal")}function Xf(e){return Ol(e,"remoteDocumentsV14")}function $f(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Yf(e,t){var n=t.documentKey.path.toArray();return[e,zl(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Jf(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=co(n[a],r[a]))return i;return(i=co(n.length,r.length))||((i=co(n[n.length-2],r[r.length-2]))||co(n[n.length-1],r[r.length-1]))}var Zf=w((function e(t,n){k(this,e),this.overlayedDocument=t,this.mutatedFields=n})),eh=function(){function e(t,n,r,i){k(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return w(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Gs(r.mutation,e,tu.empty(),ho.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,mc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mc(),i=hc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=lc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=hc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,mc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=sc(),a=vc(),o=vc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Xs)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Gs(o.mutation,t,o.mutation.getFieldMask(),ho.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Zf(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=vc(),i=new Xo((function(e,t){return e-t})),a=mc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=x(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||tu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||mc()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=dc();c.forEach((function(e){if(!a.has(e)){var n=qs(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Ro.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ko.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hs(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Ro.resolve(hc()),u=-1,s=a;return o.next((function(t){return Ro.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Ro.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,mc())})).next((function(e){return{batchId:u,changes:fc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ko(t)).next((function(e){var t=lc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=lc();return this.indexManager.getCollectionParents(e,i).next((function(o){return Ro.forEach(o,(function(o){var u=function(e,t){return new us(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Vu.newInvalidDocument(n)))}));var n=lc();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Gs(a.mutation,i,tu.empty(),ho.now()),ks(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Ro.resolve(Vu.newInvalidDocument(t))}}]),e}(),th=function(){function e(t){k(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return w(e,[{key:"getBundleMetadata",value:function(e,t){return Ro.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:Oc(n.createTime)}),Ro.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ro.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:Ql(e.bundledQuery),readTime:Oc(e.readTime)}}(t)),Ro.resolve()}}]),e}(),nh=function(){function e(){k(this,e),this.overlays=new Xo(ko.comparator),this.Xn=new Map}return w(e,[{key:"getOverlay",value:function(e,t){return Ro.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=hc();return Ro.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),Ro.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),Ro.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=hc(),i=t.length+1,a=new ko(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ro.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Xo((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=hc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=hc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Ro.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Vl(t,n));var a=this.Xn.get(t);void 0===a&&(a=mc(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),rh=function(){function e(){k(this,e),this.Zn=new Jo(ih.ts),this.es=new Jo(ih.ns)}return w(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ih(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new ih(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new ko(new yo([])),r=new ih(n,e),i=new ih(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new ko(new yo([])),n=new ih(t,e),r=new ih(t,e+1),i=mc();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new ih(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ih=function(){function e(t,n){k(this,e),this.key=t,this.ls=n}return w(e,null,[{key:"ts",value:function(e,t){return ko.comparator(e.key,t.key)||co(e.ls,t.ls)}},{key:"ns",value:function(e,t){return co(e.ls,t.ls)||ko.comparator(e.key,t.key)}}]),e}(),ah=function(){function e(t,n){k(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new Jo(ih.ts)}return w(e,[{key:"checkEmpty",value:function(e){return Ro.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Ml(i,t,n,r);this.mutationQueue.push(a);var o,u=x(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new ih(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Ro.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ro.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return Ro.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ro.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Ro.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ih(t,0),i=new ih(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),Ro.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Jo(co);return t.forEach((function(e){var t=new ih(e,0),i=new ih(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Ro.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ko.isDocumentKey(i)||(i=i.child(""));var a=new ih(new ko(i),0),o=new Jo(co);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),Ro.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Qa(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return Ro.forEach(t.mutations,(function(i){var a=new ih(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ih(t,0),r=this.ds.firstAfterOrEqual(n);return Ro.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Ro.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),oh=function(){function e(t){k(this,e),this.ps=t,this.docs=new Xo(ko.comparator),this.size=0}return w(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ro.resolve(n?n.document.mutableCopy():Vu.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=sc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Vu.newInvalidDocument(e))})),Ro.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=sc(),i=new ko(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Co(To(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Ro.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Wa()}},{key:"Is",value:function(e,t){return Ro.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new uh(this)}},{key:"getSize",value:function(e){return Ro.resolve(this.size)}}]),e}(),uh=function(e){E(n,e);var t=A(n);function n(e){var r;return k(this,n),(r=t.call(this)).zn=e,r}return w(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),Ro.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(Kf),sh=function(){function e(t){k(this,e),this.persistence=t,this.Ts=new oc((function(e){return ju(e)}),zu),this.lastRemoteSnapshotVersion=vo.min(),this.highestTargetId=0,this.Es=0,this.As=new rh,this.targetCount=0,this.Rs=Rf.An()}return w(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Ro.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ro.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ro.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Ro.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Ro.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new Rf(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,Ro.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),Ro.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Ro.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ro.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ro.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Ro.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Ro.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ro.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),Ro.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Ro.resolve(n)}},{key:"containsKey",value:function(e,t){return Ro.resolve(this.As.containsKey(t))}}]),e}(),ch=function(){function e(t,n){var r=this;k(this,e),this.bs={},this.overlays={},this.Ps=new Go(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new sh(this),this.indexManager=new pf,this.remoteDocumentCache=new oh((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new Bl(n),this.Ds=new th(this.wt)}return w(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new nh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new ah(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;qa("MemoryPersistence","Starting transaction:",e);var i=new lh(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return Ro.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),lh=function(e){E(n,e);var t=A(n);function n(e){var r;return k(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return w(n)}(Do),fh=function(){function e(t){k(this,e),this.persistence=t,this.ks=new rh,this.Os=null}return w(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw Wa()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Ro.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Ro.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),Ro.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ro.forEach(this.Fs,(function(r){var i=ko.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,vo.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Ro.or([function(){return Ro.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}(),hh=function(){function e(t){k(this,e),this.wt=t}return w(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new Lo("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fl,{unique:!0}),e.createObjectStore("documentMutations")}(e),dh(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Ro.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),dh(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vo.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fl,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Ro.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Tl});t.createIndex("collectionPathOverlayIndex",Il,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Cl,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:pl});t.createIndex("documentKeyIndex",yl),t.createIndex("collectionGroupIndex",ml)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:xl}).createIndex("sequenceNumberIndex",_l,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Sl}).createIndex("documentKeyIndex",El,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=If(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return Ro.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return Ro.forEach(r,(function(r){Qa(r.userId===n.userId);var i=Gl(t.wt,r);return Tf(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new yo(n),o=function(e){return[0,ul(e)]}(a);r.push(t.get(o).next((function(n){return n?Ro.resolve():function(n){return t.put({targetId:0,path:ul(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Ro.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:wl});var n=t.store("collectionParents"),r=new yf,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ul(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new yo(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],ll(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=Hl(r),a=Wl(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new ko(yo.fromString(i.document.name).popFirst(5)):i.noDocument?ko.fromSegments(i.noDocument.path):i.unknownDocument?ko.fromSegments(i.unknownDocument.path):Wa()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Ro.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=Hf(this.wt),a=new ch(fh.Ms,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:mc();Gl(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Ro.forEach(r,(function(e,r){var o=new Ua(r),u=tf.se(n.wt,o),s=a.getIndexManager(o),c=Cf.se(o,n.wt,s,a.referenceDelegate);return new eh(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Ll(t,Go.ot),e).next()}))}))}}]),e}();function dh(e){e.createObjectStore("targetDocuments",{keyPath:kl}).createIndex("documentTargetsIndex",bl,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gl,{unique:!0}),e.createObjectStore("targetGlobal")}var vh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ph=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:14;if(k(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new Ya($a.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zf(this,i),this.ei=n+"main",this.wt=new Bl(s),this.ni=new Oo(this.ei,this.Hs,new hh(this.wt)),this.Vs=new Lf(this.referenceDelegate,this.wt),this.remoteDocumentCache=Hf(this.wt),this.Ds=new Jl,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&Ka("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return w(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Ya($a.FAILED_PRECONDITION,vh);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new Go(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=g(y().mark((function n(r){return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=g(y().mark((function t(n){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return mh(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(Vo(t))return qa("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return qa("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return yh(e).get("owner").next((function(e){return Ro.resolve(t.di(e))}))}},{key:"_i",value:function(e){return mh(e).delete(this.clientId)}},{key:"wi",value:function(){var e=g(y().mark((function e(){var t,n,r,i,a=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Ol(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Ro.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=x(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?Ro.resolve(!0):yh(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new Ya($a.FAILED_PRECONDITION,vh);return!1}}return!(!t.networkEnabled||!t.inForeground)||mh(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&qa("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=g(y().mark((function e(){var t=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Ll(e,Go.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return mh(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return Cf.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new gf(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return tf.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;qa("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?Rl:14===i?Pl:13===i?Nl:12===i?Dl:11===i?Al:void Wa();return this.ni.runTransaction(e,o,u,(function(i){return a=new Ll(i,r.Ps?r.Ps.next():Go.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw Ka("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new Ya($a.FAILED_PRECONDITION,Ao);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return yh(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Ya($a.FAILED_PRECONDITION,vh)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yh(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=yh(e);return n.get("owner").next((function(e){return t.di(e)?(qa("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ro.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ka("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),U()&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return qa("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ka("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(Ut){Ka("Failed to set zombie client id.",Ut)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(Ut){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return Oo.V()}}]),e}();function yh(e){return Ol(e,"owner")}function mh(e){return Ol(e,"clientMetadata")}function gh(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var kh=function(){function e(t,n,r,i){k(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return w(e,null,[{key:"Vi",value:function(t,n){var r,i=mc(),a=mc(),o=x(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),bh=function(){function e(){k(this,e),this.Si=!1}return w(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return Ro.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(vo.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Oi(t,o,n,r)?i.Ni(e,t):(za()<=re.DEBUG&&qa("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gs(t)),i.Mi(e,o,t,Eo(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new Jo(ws(e));return t.forEach((function(t,r){ks(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return za()<=re.DEBUG&&qa("QueryEngine","Using full collection scan to execute query:",gs(t)),this.Di.getDocumentsMatchingQuery(e,t,Io.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),wh=function(){function e(t,n,r,i){k(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new Xo(co),this.Bi=new oc((function(e){return ju(e)}),zu),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return w(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eh(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function xh(e,t,n,r){return new wh(e,t,n,r)}function _h(e,t){return Sh.apply(this,arguments)}function Sh(){return Sh=g(y().mark((function e(t,n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xa(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=mc(),s=x(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=x(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,v=x(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var y,m=x(p.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){v.e(k)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Sh.apply(this,arguments)}function Eh(e,t){var n=Xa(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ro.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Qa(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=mc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Th(e){var t=Xa(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function Ih(e,t){var n=Xa(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(nu.EMPTY_BYTE_STRING,vo.min()).withLastLimboFreeSnapshotVersion(vo.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=sc(),s=mc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ch(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(vo.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Ro.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function Ch(e,t,n){var r=mc(),i=mc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=sc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(vo.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):qa("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function Ah(e,t){var n=Xa(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Dh(e,t){var n=Xa(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,Ro.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new Ul(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function Nh(e,t,n){return Ph.apply(this,arguments)}function Ph(){return Ph=g(y().mark((function e(t,n,r){var i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Xa(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Vo(e.t1)){e.next=12;break}throw e.t1;case 12:qa("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Ph.apply(this,arguments)}function Rh(e,t,n){var r=Xa(e),i=vo.min(),a=mc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Xa(e),i=r.Bi.get(n);return void 0!==i?Ro.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,vs(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:vo.min(),n?a:mc())})).next((function(e){return Mh(r,bs(t),e),{documents:e,ji:a}}))}))}function Lh(e,t){var n=Xa(e),r=Xa(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function Oh(e,t){var n=Xa(e),r=n.Li.get(t)||vo.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,Eo(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Mh(n,t,e),e}))}function Mh(e,t,n){var r=vo.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function Fh(e,t,n,r){return Vh.apply(this,arguments)}function Vh(){return Vh=g(y().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,v;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Xa(t),o=mc(),u=sc(),s=x(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(p){s.e(p)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,Dh(a,function(e){return vs(cs(yo.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Ch(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Vh.apply(this,arguments)}function Uh(e,t){return Bh.apply(this,arguments)}function Bh(){return Bh=g(y().mark((function e(t,n){var r,i,a,o=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:mc(),e.next=3,Dh(t,vs(Ql(n.bundledQuery)));case 3:return i=e.sent,a=Xa(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Oc(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(nu.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Bh.apply(this,arguments)}function jh(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function zh(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function qh(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Kh=function(){function e(t,n,r,i){k(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return w(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Ya(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ka("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Gh=function(){function e(t,n,r){k(this,e),this.targetId=t,this.state=n,this.error=r}return w(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ya(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ka("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Hh=function(){function e(t,n){k(this,e),this.clientId=t,this.activeTargetIds=n}return w(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=kc(),o=0;i&&o<r.activeTargetIds.length;++o)i=vu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ka("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Wh=function(){function e(t,n){k(this,e),this.clientId=t,this.onlineState=n}return w(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ka("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Qh=function(){function e(){k(this,e),this.activeTargetIds=kc()}return w(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Xh=function(){function e(t,n,r,i,a){k(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Xo(co),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=jh(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new Qh),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return w(e,[{key:"start",value:function(){var e=g(y().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=x(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(jh(this.persistenceKey,i)))&&(o=Hh.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=x(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(qh(this.persistenceKey,e));if(n){var r=Gh.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(qh(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return qa("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){qa("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){qa("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(qa("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void Ka("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(g(y().mark((function e(){var r,i,a,o,u,s,c;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=Go.ot;if(null!=e)try{var n=JSON.parse(e);Qa("number"==typeof n),t=n}catch(e){Ka("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Go.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new Kh(this.currentUser,e,t,n),i=zh(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=zh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=qh(this.persistenceKey,e),i=new Gh(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return Hh.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Kh.Ji(new Ua(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return Gh.Ji(r,t)}},{key:"wr",value:function(e){return Wh.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:qa("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Mr(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=kc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),$h=function(){function e(){k(this,e),this.Fr=new Qh,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return w(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Qh,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Yh=function(){function e(){k(this,e)}return w(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Jh=function(){function e(){var t=this;k(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return w(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){qa("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=x(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){qa("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=x(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Zh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ed=function(){function e(t){k(this,e),this.jr=t.jr,this.Wr=t.Wr}return w(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),td=function(e){E(n,e);var t=A(n);function n(e){var r;return k(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return w(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Fa;o.listenOnce(Pa.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Na.NO_ERROR:var t=o.getResponseJson();qa("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Na.TIMEOUT:qa("Connection",'RPC "'+e+'" timed out'),a(new Ya($a.DEADLINE_EXCEEDED,"Request time out"));break;case Na.HTTP_ERROR:var n=o.getStatus();if(qa("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values($a).indexOf(t)>=0?t:$a.UNKNOWN}(r.status);a(new Ya(u,r.message))}else a(new Ya($a.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Ya($a.UNAVAILABLE,"Connection failed."));break;default:Wa()}}finally{qa("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Aa(),a=Da(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Oa({})),this.uo(o.initMessageHeaders,t,n),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(V())||"object"===typeof navigator&&"ReactNative"===navigator.product||V().indexOf("Electron/")>=0||function(){var e=V();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||V().indexOf("MSAppHost/")>=0||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");qa("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new ed({jr:function(e){l?qa("Connection","Not sending because WebChannel is closed:",e):(c||(qa("Connection","Opening WebChannel transport."),s.open(),c=!0),qa("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Ma.EventType.OPEN,(function(){l||qa("Connection","WebChannel transport opened.")})),h(s,Ma.EventType.CLOSE,(function(){l||(l=!0,qa("Connection","WebChannel transport closed"),f.eo())})),h(s,Ma.EventType.ERROR,(function(e){l||(l=!0,Ga("Connection","WebChannel transport errored:",e),f.eo(new Ya($a.UNAVAILABLE,"The operation could not be completed")))})),h(s,Ma.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Qa(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){qa("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Zs[e];if(void 0!==t)return ac(t)}(a),u=i.message;void 0===o&&(o=$a.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new Ya(o,u)),s.close()}else qa("Connection","WebChannel received:",n),f.no(n)}})),h(a,Ra.STAT_EVENT,(function(e){e.stat===La.PROXY?qa("Connection","Detected buffering proxy"):e.stat===La.NOPROXY&&qa("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){k(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return w(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);qa("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return qa("RestConnection","Received: ",e),e}),(function(t){throw Ga("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ba,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=Zh[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function nd(){return"undefined"!=typeof window?window:null}function rd(){return"undefined"!=typeof document?document:null}function id(e){return new Nc(e,!0)}var ad=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;k(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return w(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&qa("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),od=function(){function e(t,n,r,i,a,o,u,s){k(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new ad(t,n)}return w(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===$a.RESOURCE_EXHAUSTED?(Ka(n.toString()),Ka("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===$a.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new Ya($a.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(g(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return qa("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(qa("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),ud=function(e){E(n,e);var t=A(n);function n(e,r,i,a,o,u){var s;return k(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return w(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Wa()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(Qa(void 0===t||"string"==typeof t),nu.fromBase64String(t||"")):(Qa(void 0===t||t instanceof Uint8Array),nu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?$a.UNKNOWN:ac(e.code);return new Ya(t,e.message||"")}(o);n=new Sc(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Uc(e,s.document.name),l=Oc(s.document.updateTime),f=new Mu({mapValue:{fields:s.document.fields}}),h=Vu.newFoundDocument(c,l,f),d=s.targetIds||[],v=s.removedTargetIds||[];n=new xc(d,v,h.key,h)}else if("documentDelete"in t){t.documentDelete;var p=t.documentDelete;p.document;var y=Uc(e,p.document),m=p.readTime?Oc(p.readTime):vo.min(),g=Vu.newNoDocument(y,m),k=p.removedTargetIds||[];n=new xc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Uc(e,b.document),x=b.removedTargetIds||[];n=new xc([],x,w,null)}else{if(!("filter"in t))return Wa();t.filter;var _=t.filter;_.targetId;var S=_.count||0,E=new rc(S),T=_.targetId;n=new _c(T,E)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return vo.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?vo.min():t.readTime?Oc(t.readTime):vo.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=zc(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=qu(r)?{documents:Xc(e,r)}:{query:$c(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Rc(e,t.resumeToken):t.snapshotVersion.compareTo(vo.min())>0&&(n.readTime=Pc(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Wa()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=zc(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(od),sd=function(e){E(n,e);var t=A(n);function n(e,r,i,a,o,u){var s;return k(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return w(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,St(T(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(Qa(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(Qa(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Oc(e.updateTime):Oc(t);return n.isEqual(vo.min())&&(n=Oc(t)),new Us(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Oc(e.commitTime);return this.listener.Jo(n,t)}return Qa(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=zc(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Wc(t.wt,e)}))};this.Mo(n)}}]),n}(od),cd=function(e){E(n,e);var t=A(n);function n(e,r,i,a){var o;return k(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return w(n,[{key:"tu",value:function(){if(this.Zo)throw new Ya($a.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===$a.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Ya($a.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.bo.ao(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===$a.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Ya($a.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return w((function e(){k(this,e)}))}()),ld=function(){function e(t,n){k(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return w(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(Ka(t),this.su=!1):qa("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),fd=w((function e(t,n,r,i,a){var o=this;k(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=xd(o),!e.t0){e.next=5;break}return qa("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Xa(t)).lu.add(4),e.next=4,vd(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,hd(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new ld(r,i)}));function hd(e){return dd.apply(this,arguments)}function dd(){return dd=g(y().mark((function e(t){var n,r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!xd(t)){e.next=18;break}n=x(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),dd.apply(this,arguments)}function vd(e){return pd.apply(this,arguments)}function pd(){return pd=g(y().mark((function e(t){var n,r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=x(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),pd.apply(this,arguments)}function yd(e,t){var n=Xa(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),wd(n)?bd(n):Yd(n).Co()&&gd(n,t))}function md(e,t){var n=Xa(e),r=Yd(n);n.hu.delete(t),r.Co()&&kd(n,t),0===n.hu.size&&(r.Co()?r.ko():xd(n)&&n._u.set("Unknown"))}function gd(e,t){e.wu.Nt(t.targetId),Yd(e).Qo(t)}function kd(e,t){e.wu.Nt(t),Yd(e).jo(t)}function bd(e){e.wu=new Tc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),Yd(e).start(),e._u.iu()}function wd(e){return xd(e)&&!Yd(e).Do()&&e.hu.size>0}function xd(e){return 0===Xa(e).lu.size}function _d(e){e.wu=void 0}function Sd(e){return Ed.apply(this,arguments)}function Ed(){return Ed=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){gd(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Ed.apply(this,arguments)}function Td(e,t){return Id.apply(this,arguments)}function Id(){return Id=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_d(t),wd(t)?(t._u.uu(n),bd(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Id.apply(this,arguments)}function Cd(e,t,n){return Ad.apply(this,arguments)}function Ad(){return Ad=g(y().mark((function e(t,n,r){var i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Sc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=g(y().mark((function e(t,n){var r,i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=x(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),qa("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Dd(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof xc?t.wu.Ut(n):n instanceof _c?t.wu.zt(n):t.wu.Gt(n),r.isEqual(vo.min())){e.next=29;break}return e.prev=14,e.next=17,Th(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(nu.EMPTY_BYTE_STRING,n.snapshotVersion)),kd(e,t);var r=new Ul(n.target,t,1,n.sequenceNumber);gd(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),qa("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Dd(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Ad.apply(this,arguments)}function Dd(e,t,n){return Nd.apply(this,arguments)}function Nd(){return Nd=g(y().mark((function e(t,n,r){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vo(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,vd(t);case 5:t._u.set("Offline"),r||(r=function(){return Th(t.localStore)}),t.asyncQueue.enqueueRetryable(g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qa("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,hd(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Nd.apply(this,arguments)}function Pd(e,t){return t().catch((function(n){return Dd(e,n,t)}))}function Rd(e){return Ld.apply(this,arguments)}function Ld(){return Ld=g(y().mark((function e(t){var n,r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Xa(t),r=Jd(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!Od(n)){e.next=19;break}return e.prev=3,e.next=6,Ah(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Md(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Dd(n,e.t0);case 17:e.next=2;break;case 19:Fd(n)&&Vd(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Ld.apply(this,arguments)}function Od(e){return xd(e)&&e.au.length<10}function Md(e,t){e.au.push(t);var n=Jd(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Fd(e){return xd(e)&&!Jd(e).Do()&&e.au.length>0}function Vd(e){Jd(e).start()}function Ud(e){return Bd.apply(this,arguments)}function Bd(){return Bd=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Jd(t).Xo();case 1:case"end":return e.stop()}}),e)}))),Bd.apply(this,arguments)}function jd(e){return zd.apply(this,arguments)}function zd(){return zd=g(y().mark((function e(t){var n,r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Jd(t),r=x(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),zd.apply(this,arguments)}function qd(e,t,n){return Kd.apply(this,arguments)}function Kd(){return Kd=g(y().mark((function e(t,n,r){var i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=Fl.from(i,n,r),e.next=3,Pd(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Rd(t);case 5:case"end":return e.stop()}}),e)}))),Kd.apply(this,arguments)}function Gd(e,t){return Hd.apply(this,arguments)}function Hd(){return Hd=g(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Jd(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=g(y().mark((function e(t,n){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ic(i=n.code)||i===$a.ABORTED){e.next=7;break}return r=t.au.shift(),Jd(t).No(),e.next=5,Pd(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Rd(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Fd(t)&&Vd(t);case 5:case"end":return e.stop()}}),e)}))),Hd.apply(this,arguments)}function Wd(e,t){return Qd.apply(this,arguments)}function Qd(){return Qd=g(y().mark((function e(t,n){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Xa(t)).asyncQueue.verifyOperationInProgress(),qa("RemoteStore","RemoteStore received new credentials"),i=xd(r),r.lu.add(3),e.next=6,vd(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,hd(r);case 12:case"end":return e.stop()}}),e)}))),Qd.apply(this,arguments)}function Xd(e,t){return $d.apply(this,arguments)}function $d(){return $d=g(y().mark((function e(t,n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xa(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,hd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,vd(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),$d.apply(this,arguments)}function Yd(e){return e.mu||(e.mu=function(e,t,n){var r=Xa(e);return r.tu(),new ud(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Sd.bind(null,e),Jr:Td.bind(null,e),Go:Cd.bind(null,e)}),e.fu.push(function(){var t=g(y().mark((function t(n){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),wd(e)?bd(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:_d(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function Jd(e){return e.gu||(e.gu=function(e,t,n){var r=Xa(e);return r.tu(),new sd(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Ud.bind(null,e),Jr:Gd.bind(null,e),Yo:jd.bind(null,e),Jo:qd.bind(null,e)}),e.fu.push(function(){var t=g(y().mark((function t(n){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,Rd(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(qa("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var Zd=function(){function e(t,n,r,i,a){k(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ja,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return w(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ya($a.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ev(e,t){if(Ka("AsyncQueue","".concat(t,": ").concat(e)),Vo(e))return new Ya($a.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var tv=function(){function e(t){k(this,e),this.comparator=t?function(e,n){return t(e,n)||ko.comparator(e.key,n.key)}:function(e,t){return ko.comparator(e.key,t.key)},this.keyedMap=lc(),this.sortedSet=new Xo(this.comparator)}return w(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),nv=function(){function e(){k(this,e),this.yu=new Xo(ko.comparator)}return w(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Wa():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),rv=function(){function e(t,n,r,i,a,o,u,s){k(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return w(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ys(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,tv.emptySet(n),a,r,i,!0,!1)}}]),e}(),iv=w((function e(){k(this,e),this.Iu=void 0,this.listeners=[]})),av=w((function e(){k(this,e),this.queries=new oc((function(e){return ms(e)}),ys),this.onlineState="Unknown",this.Tu=new Set}));function ov(e,t){return uv.apply(this,arguments)}function uv(){return uv=g(y().mark((function e(t,n){var r,i,a,o,u;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xa(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new iv),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=ev(e.t0,"Initialization of query '".concat(gs(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&hv(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),uv.apply(this,arguments)}function sv(e,t){return cv.apply(this,arguments)}function cv(){return cv=g(y().mark((function e(t,n){var r,i,a,o,u;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xa(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),cv.apply(this,arguments)}function lv(e,t){var n,r=Xa(e),i=!1,a=x(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=x(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&hv(r)}function fv(e,t,n){var r=Xa(e),i=r.queries.get(t);if(i){var a,o=x(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function hv(e){e.Tu.forEach((function(e){e.next()}))}var dv=function(){function e(t,n,r){k(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return w(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=x(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new rv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=rv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),vv=function(){function e(t,n){k(this,e),this.payload=t,this.byteLength=n}return w(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),pv=function(){function e(t){k(this,e),this.wt=t}return w(e,[{key:"Wi",value:function(e){return Uc(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?Gc(this.wt,e.document,!1):Vu.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return Oc(e)}}]),e}(),yv=function(){function e(t,n,r){k(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mv(t)}return w(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=yo.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new pv(this.wt),i=x(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=x(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||mc()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=g(y().mark((function e(){var t,n,r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fh(this.localStore,new pv(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=x(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Uh(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function mv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var gv=w((function e(t){k(this,e),this.key=t})),kv=w((function e(t){k(this,e),this.key=t})),bv=function(){function e(t,n){k(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=mc(),this.mutatedKeys=mc(),this.Lu=ws(t),this.Uu=new tv(this.Lu)}return w(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new nv,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=ks(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),v=!0):l&&!f&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Oi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wa()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new rv(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new nv,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=mc(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new kv(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new gv(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=mc();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return rv.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),wv=w((function e(t,n,r){k(this,e),this.query=t,this.targetId=n,this.view=r})),xv=w((function e(t){k(this,e),this.key=t,this.Xu=!1})),_v=function(){function e(t,n,r,i,a,o){k(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new oc((function(e){return ms(e)}),ys),this.ec=new Map,this.nc=new Set,this.sc=new Xo(ko.comparator),this.ic=new Map,this.rc=new rh,this.oc={},this.uc=new Map,this.cc=Rf.Rn(),this.onlineState="Unknown",this.ac=void 0}return w(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function Sv(e,t){return Ev.apply(this,arguments)}function Ev(){return Ev=g(y().mark((function e(t,n){var r,i,a,o,u,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=mp(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,Dh(r.localStore,vs(n));case 8:return u=e.sent,r.isPrimaryClient&&yd(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Tv(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Ev.apply(this,arguments)}function Tv(e,t,n,r){return Iv.apply(this,arguments)}function Iv(){return Iv=g(y().mark((function e(t,n,r,i){var a,o,u,s,c,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=g(y().mark((function e(t,n,r,i){var a,o,u;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Oi,!e.t0){e.next=6;break}return e.next=5,Rh(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Wv(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Rh(t.localStore,n,!0);case 3:return a=e.sent,o=new bv(n,a.ji),u=o.Ku(a.documents),s=wc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Wv(t,r,c.zu),l=new wv(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Iv.apply(this,arguments)}function Cv(e,t){return Av.apply(this,arguments)}function Av(){return Av=g(y().mark((function e(t,n){var r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xa(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!ys(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Nh(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),md(r.remoteStore,i.targetId),Gv(r,i.targetId)})).catch(No);case 9:e.next=14;break;case 11:return Gv(r,i.targetId),e.next=14,Nh(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Av.apply(this,arguments)}function Dv(e,t,n){return Nv.apply(this,arguments)}function Nv(){return Nv=g(y().mark((function e(t,n,r){var i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gp(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Xa(e),a=ho.now(),o=t.reduce((function(e,t){return e.add(t.key)}),mc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=sc(),s=mc();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=x(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Hs(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Xs(c.key,l,Fu(l.value.mapValue),Bs.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:fc(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new Xo(co)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,$v(i,a.changes);case 9:return e.next=11,Rd(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ev(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Nv.apply(this,arguments)}function Pv(e,t){return Rv.apply(this,arguments)}function Rv(){return Rv=g(y().mark((function e(t,n){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xa(t),e.prev=1,e.next=4,Ih(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(Qa(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?Qa(n.Xu):e.removedDocuments.size>0&&(Qa(n.Xu),n.Xu=!1))})),e.next=8,$v(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,No(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Rv.apply(this,arguments)}function Lv(e,t,n){var r=Xa(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Xa(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=x(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&hv(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Ov(e,t,n){return Mv.apply(this,arguments)}function Mv(){return Mv=g(y().mark((function e(t,n,r){var i,a,o,u,s,c;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Xa(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Xo(ko.comparator)).insert(o,Vu.newNoDocument(o,vo.min())),s=mc().add(o),c=new bc(vo.min(),new Map,new Jo(co),u,s),e.next=9,Pv(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),Xv(i),e.next=16;break;case 14:return e.next=16,Nh(i.localStore,n,!1).then((function(){return Gv(i,n,r)})).catch(No);case 16:case"end":return e.stop()}}),e)}))),Mv.apply(this,arguments)}function Fv(e,t){return Vv.apply(this,arguments)}function Vv(){return Vv=g(y().mark((function e(t,n){var r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xa(t),i=n.batch.batchId,e.prev=1,e.next=4,Eh(r.localStore,n);case 4:return a=e.sent,Kv(r,i,null),qv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,$v(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,No(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Vv.apply(this,arguments)}function Uv(e,t,n){return Bv.apply(this,arguments)}function Bv(){return Bv=g(y().mark((function e(t,n,r){var i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xa(t),e.prev=1,e.next=4,function(e,t){var n=Xa(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Qa(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Kv(i,n,r),qv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,$v(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,No(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Bv.apply(this,arguments)}function jv(e,t){return zv.apply(this,arguments)}function zv(){return zv=g(y().mark((function e(t,n){var r,i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xd((r=Xa(t)).remoteStore)||qa("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Xa(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ev(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),zv.apply(this,arguments)}function qv(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function Kv(e,t,n){var r=Xa(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function Gv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=x(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||Hv(e,t)}))}function Hv(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(md(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),Xv(e))}function Wv(e,t,n){var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof gv?(e.rc.addReference(a.key,t),Qv(e,a)):a instanceof kv?(qa("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||Hv(e,a.key)):Wa()}}catch(o){i.e(o)}finally{i.f()}}function Qv(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(qa("SyncEngine","New document in limbo: "+n),e.nc.add(r),Xv(e))}function Xv(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new ko(yo.fromString(t)),r=e.cc.next();e.ic.set(r,new xv(n)),e.sc=e.sc.insert(n,r),yd(e.remoteStore,new Ul(vs(cs(n.path)),r,2,Go.ot))}}function $v(e,t,n){return Yv.apply(this,arguments)}function Yv(){return Yv=g(y().mark((function e(t,n,r){var i,a,o,u;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Xa(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=kh.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=g(y().mark((function e(t,n){var r,i,a,o,u,s,c,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xa(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ro.forEach(n,(function(t){return Ro.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ro.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Vo(e.t0)){e.next=10;break}throw e.t0;case 10:qa("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=x(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Yv.apply(this,arguments)}function Jv(e,t){return Zv.apply(this,arguments)}function Zv(){return Zv=g(y().mark((function e(t,n){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Xa(t)).currentUser.isEqual(n)){e.next=11;break}return qa("SyncEngine","User change. New user:",n.toKey()),e.next=5,_h(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new Ya($a.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,$v(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),Zv.apply(this,arguments)}function ep(e,t){var n=Xa(e),r=n.ic.get(t);if(r&&r.Xu)return mc().add(r.key);var i=mc(),a=n.ec.get(t);if(!a)return i;var o,u=x(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function tp(e,t){return np.apply(this,arguments)}function np(){return np=g(y().mark((function e(t,n){var r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xa(t),e.next=3,Rh(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&Wv(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),np.apply(this,arguments)}function rp(e,t){return ip.apply(this,arguments)}function ip(){return ip=g(y().mark((function e(t,n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xa(t),e.abrupt("return",Oh(r.localStore,n).then((function(e){return $v(r,e)})));case 2:case"end":return e.stop()}}),e)}))),ip.apply(this,arguments)}function ap(e,t,n,r){return op.apply(this,arguments)}function op(){return op=g(y().mark((function e(t,n,r,i){var a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Xa(t),e.next=3,function(e,t){var n=Xa(e),r=Xa(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Ro.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Rd(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Kv(a,n,i||null),qv(a,n),function(e,t){Xa(Xa(e).mutationQueue).In(t)}(a.localStore,n)):Wa();case 11:return e.next=13,$v(a,o);case 13:e.next=16;break;case 15:qa("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),op.apply(this,arguments)}function up(e,t){return sp.apply(this,arguments)}function sp(){return sp=g(y().mark((function e(t,n){var r,i,a,o,u,s,c,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mp(r=Xa(t)),gp(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,cp(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,Xd(r.remoteStore,!0);case 9:o=x(a);try{for(o.s();!(u=o.n()).done;)s=u.value,yd(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Gv(r,t),Nh(r.localStore,t,!0)})),md(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,cp(r,c);case 21:return function(e){var t=Xa(e);t.ic.forEach((function(e,n){md(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new Xo(ko.comparator)}(r),r.ac=!1,e.next=25,Xd(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),sp.apply(this,arguments)}function cp(e,t,n){return lp.apply(this,arguments)}function lp(){return lp=g(y().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,v,p,m,g;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Xa(t),a=[],o=[],u=x(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,Dh(i.localStore,vs(f[0]));case 11:l=e.sent,h=x(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return v=d.value,p=i.tc.get(v),e.next=20,tp(i,p);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Lh(i.localStore,c);case 36:return g=e.sent,e.next=39,Dh(i.localStore,g);case 39:return l=e.sent,e.next=42,Tv(i,fp(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),lp.apply(this,arguments)}function fp(e){return ss(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function hp(e){var t=Xa(e);return Xa(Xa(t.localStore).persistence).Ri()}function dp(e,t,n,r){return vp.apply(this,arguments)}function vp(){return vp=g(y().mark((function e(t,n,r,i){var a,o,u,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Xa(t)).ac){e.next=3;break}return e.abrupt("return",void qa("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Oh(a.localStore,bs(o[0]));case 10:return u=e.sent,s=bc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,$v(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Nh(a.localStore,n,!0);case 17:return Gv(a,n,i),e.abrupt("break",20);case 19:Wa();case 20:case"end":return e.stop()}}),e)}))),vp.apply(this,arguments)}function pp(e,t,n){return yp.apply(this,arguments)}function yp(){return yp=g(y().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=mp(t)).ac){e.next=45;break}a=x(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return qa("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Lh(i.localStore,u);case 12:return s=e.sent,e.next=15,Dh(i.localStore,s);case 15:return c=e.sent,e.next=18,Tv(i,fp(s),c.targetId,!1);case 18:yd(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=x(r),e.prev=30,h=y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,Nh(i.localStore,t,!1).then((function(){md(i.remoteStore,t),Gv(i,t)})).catch(No);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),yp.apply(this,arguments)}function mp(e){var t=Xa(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Pv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ep.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ov.bind(null,t),t.Zu.Go=lv.bind(null,t.eventManager),t.Zu.lc=fv.bind(null,t.eventManager),t}function gp(e){var t=Xa(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Uv.bind(null,t),t}function kp(e,t,n){var r=Xa(e);(function(){var e=g(y().mark((function e(t,n,r){var i,a,o,u,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Xa(e),r=Oc(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(mv(i)),a=new yv(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,$v(t,s.Mu,void 0);case 31:return e.next=33,function(e,t){var n=Xa(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Ga("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var bp=function(){function e(){k(this,e),this.synchronizeTabs=!1}return w(e,[{key:"initialize",value:function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=id(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return xh(this.persistence,new bh,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new ch(fh.Ms,this.wt)}},{key:"dc",value:function(e){return new $h}},{key:"terminate",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),wp=function(e){E(n,e);var t=A(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return w(n,[{key:"initialize",value:function(){var e=g(y().mark((function e(t){var r=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St(T(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,gp(this.yc.syncEngine);case 6:return e.next=8,Rd(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return xh(this.persistence,new bh,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Bf(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new Ko(t,this.persistence);return new qo(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=gh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ef.withCacheSize(this.cacheSizeBytes):Ef.DEFAULT;return new ph(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,nd(),rd(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new $h}}]),n}(bp),xp=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return w(n,[{key:"initialize",value:function(){var e=g(y().mark((function e(t){var r,i=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St(T(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof Xh,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:ap.bind(null,r),Or:dp.bind(null,r),Mr:pp.bind(null,r),Ri:hp.bind(null,r),Nr:rp.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,up(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=nd();if(!Xh.V(t))throw new Ya($a.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=gh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xh(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(wp),_p=function(){function e(){k(this,e)}return w(e,[{key:"initialize",value:function(){var e=g(y().mark((function e(t,n){var r=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Lv(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Jv.bind(null,this.syncEngine),e.next=12,Xd(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new av}},{key:"createDatastore",value:function(e){var t,n=id(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new td(t));return function(e,t,n,r){return new cd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Lv(o.syncEngine,e,0)},a=Jh.V()?new Jh:new Yh,new fd(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new _v(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Xa(t),qa("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,vd(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Sp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return g(y().mark((function r(){var i;return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Ep=function(){function e(t){k(this,e),this.observer=t,this.muted=!1}return w(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Tp=function(){function e(t,n){var r=this;k(this,e),this.Ec=t,this.wt=n,this.metadata=new Ja,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return w(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=g(y().mark((function e(){var t,n,r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new vv(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=g(y().mark((function e(){var t,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=g(y().mark((function e(){var t,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ip=function(){function e(t){k(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return w(e,[{key:"lookup",value:function(){var e=g(y().mark((function e(t){var n,r=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Ya($a.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=g(y().mark((function e(t,n){var r,i,a,o,u,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xa(t),i=zc(r.wt)+"/documents",a={documents:n.map((function(e){return Vc(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Hc(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Qa(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new tc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=g(y().mark((function e(){var t,n=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ko.fromPath(t);n.mutations.push(new nc(r,n.precondition(r)))})),e.next=7,function(){var e=g(y().mark((function e(t,n){var r,i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xa(t),i=zc(r.wt)+"/documents",a={writes:n.map((function(e){return Wc(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Wa();t=vo.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ya($a.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Bs.updateTime(t):Bs.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vo.min()))throw new Ya($a.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bs.updateTime(t)}return Bs.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Cp=function(){function e(t,n,r,i,a){k(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new ad(this.asyncQueue,"transaction_retry")}return w(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(g(y().mark((function t(){var n,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Ip(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!hu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!ic(t)}return!1}}]),e}(),Ap=function(){function e(t,n,r,i){var a=this;k(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ua.UNAUTHENTICATED,this.clientId=so.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qa("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return qa("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return w(e,[{key:"getConfiguration",value:function(){var e=g(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Ya($a.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ja;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(g(y().mark((function n(){var r;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ev(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Dp(e,t){return Np.apply(this,arguments)}function Np(){return Np=g(y().mark((function e(t,n){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),qa("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,_h(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Np.apply(this,arguments)}function Pp(e,t){return Rp.apply(this,arguments)}function Rp(){return Rp=g(y().mark((function e(t,n){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Lp(t);case 3:return r=e.sent,qa("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Wd(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Wd(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Rp.apply(this,arguments)}function Lp(e){return Op.apply(this,arguments)}function Op(){return Op=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return qa("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Dp(t,new bp);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Op.apply(this,arguments)}function Mp(e){return Fp.apply(this,arguments)}function Fp(){return Fp=g(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return qa("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Pp(t,new _p);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Fp.apply(this,arguments)}function Vp(e){return Lp(e).then((function(e){return e.persistence}))}function Up(e){return Lp(e).then((function(e){return e.localStore}))}function Bp(e){return Mp(e).then((function(e){return e.remoteStore}))}function jp(e){return Mp(e).then((function(e){return e.syncEngine}))}function zp(e){return qp.apply(this,arguments)}function qp(){return qp=g(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mp(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Sv.bind(null,n.syncEngine),r.onUnlisten=Cv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}function Kp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ja;return e.asyncQueue.enqueueAndForget(g(y().mark((function i(){return y().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Ep({next:function(a){t.enqueueAndForget((function(){return sv(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Ya($a.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Ya($a.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new dv(cs(n.path),a,{includeMetadataChanges:!0,Du:!0});return ov(e,o)},i.next=3,zp(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Gp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ja;return e.asyncQueue.enqueueAndForget(g(y().mark((function i(){return y().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Ep({next:function(n){t.enqueueAndForget((function(){return sv(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Ya($a.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new dv(n,a,{includeMetadataChanges:!0,Du:!0});return ov(e,o)},i.next=3,zp(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Hp=new Map;function Wp(e,t,n){if(!n)throw new Ya($a.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Qp(e,t,n,r){if(!0===t&&!0===r)throw new Ya($a.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Xp(e){if(!ko.isDocumentKey(e))throw new Ya($a.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function $p(e){if(ko.isDocumentKey(e))throw new Ya($a.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Yp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Wa()}function Jp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ya($a.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Yp(e);throw new Ya($a.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Zp(e,t){if(t<=0)throw new Ya($a.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var ey=function(){function e(t){var n;if(k(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Ya($a.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ya($a.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Qp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return w(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),ty=function(){function e(t,n,r){k(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ey({}),this._settingsFrozen=!1,t instanceof fu?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ya($a.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fu(e.options.projectId)}(t))}return w(e,[{key:"app",get:function(){if(!this._app)throw new Ya($a.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Ya($a.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ey(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new eo;switch(e.type){case"gapi":var t=e.client;return Qa(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new io(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ya($a.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Hp.get(e);t&&(qa("ComponentProvider","Removing Datastore"),Hp.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function ny(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Jp(e,ty))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ga("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ua.MOCK_USER;else{o=F(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Ya($a.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ua(s)}e._authCredentials=new to(new Za(o,u))}}var ry=function(){function e(t,n,r){k(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return w(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ay(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),iy=function(){function e(t,n,r){k(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return w(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ay=function(e){E(n,e);var t=A(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e,r,cs(i)))._path=i,a.type="collection",a}return w(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ry(this.firestore,null,new ko(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(iy);function oy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Y(e),Wp("collection","path",t),e instanceof ty){var a=yo.fromString.apply(yo,[t].concat(r));return $p(a),new ay(e,null,a)}if(!(e instanceof ry||e instanceof ay))throw new Ya($a.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(yo.fromString.apply(yo,[t].concat(r)));return $p(o),new ay(e.firestore,null,o)}function uy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Y(e),1===arguments.length&&(t=so.I()),Wp("doc","path",t),e instanceof ty){var a=yo.fromString.apply(yo,[t].concat(r));return Xp(a),new ry(e,null,new ko(a))}if(!(e instanceof ry||e instanceof ay))throw new Ya($a.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(yo.fromString.apply(yo,[t].concat(r)));return Xp(o),new ry(e.firestore,e instanceof ay?e.converter:null,new ko(o))}function sy(e,t){return e=Y(e),t=Y(t),(e instanceof ry||e instanceof ay)&&(t instanceof ry||t instanceof ay)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function cy(e,t){return e=Y(e),t=Y(t),e instanceof iy&&t instanceof iy&&e.firestore===t.firestore&&ys(e._query,t._query)&&e.converter===t.converter}var ly=function(){function e(){var t=this;k(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new ad(this,"async_queue_retry"),this.Kc=function(){var e=rd();e&&qa("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=rd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return w(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=rd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new Ja;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=g(y().mark((function e(){var t=this;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Vo(e.t0)){e.next=12;break}throw e.t0;case 12:qa("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ka("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=Zd.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&Wa()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=g(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=x(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=x(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function fy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=x(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var hy=function(){function e(){k(this,e),this._progressObserver={},this._taskCompletionResolver=new Ja,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return w(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),dy=function(e){E(n,e);var t=A(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new ly,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return w(n,[{key:"_terminate",value:function(){return this._firestoreClient||py(this),this._firestoreClient.terminate()}}]),n}(ty);function vy(e){return e._firestoreClient||py(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function py(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new lu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Ap(e._authCredentials,e._appCheckCredentials,e._queue,r)}function yy(e,t,n){var r=new Ja;return e.asyncQueue.enqueue(g(y().mark((function i(){var a;return y().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Dp(e,n);case 3:return i.next=5,Pp(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===$a.FAILED_PRECONDITION||e.code===$a.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function my(e){return function(e){return e.asyncQueue.enqueue(g(y().mark((function t(){var n,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Vp(e);case 2:return n=t.sent,t.next=5,Bp(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Xa(e);return t.lu.delete(0),hd(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(vy(e=Jp(e,dy)))}function gy(e){return function(e){return e.asyncQueue.enqueue(g(y().mark((function t(){var n,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Vp(e);case 2:return n=t.sent,t.next=5,Bp(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Xa(t)).lu.add(0),e.next=4,vd(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(vy(e=Jp(e,dy)))}function ky(e,t){var n=vy(e=Jp(e,dy)),r=new hy;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Tp(e,t)}(function(e,t){if(e instanceof Uint8Array)return Sp(e,t);if(e instanceof ArrayBuffer)return Sp(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,id(t));e.asyncQueue.enqueueAndForget(g(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=kp,t.next=3,jp(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function by(e,t){return function(e,t){return e.asyncQueue.enqueue(g(y().mark((function n(){return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Xa(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,Up(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(vy(e=Jp(e,dy)),t).then((function(t){return t?new iy(e,null,t.query):null}))}function wy(e){if(e._initialized||e._terminated)throw new Ya($a.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var xy=function(){function e(){k(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Ya($a.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new go(n)}return w(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var _y=function(){function e(t){k(this,e),this._byteString=t}return w(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(nu.fromBase64String(t))}catch(t){throw new Ya($a.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(nu.fromUint8Array(t))}}]),e}(),Sy=w((function e(t){k(this,e),this._methodName=t})),Ey=function(){function e(t,n){if(k(this,e),!isFinite(t)||t<-90||t>90)throw new Ya($a.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ya($a.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return w(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return co(this._lat,e._lat)||co(this._long,e._long)}}]),e}(),Ty=/^__.*__$/,Iy=function(){function e(t,n,r){k(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return w(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qs(e,this.data,t,this.fieldTransforms)}}]),e}(),Cy=function(){function e(t,n,r){k(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return w(e,[{key:"toMutation",value:function(e,t){return new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Ay(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wa()}}var Dy=function(){function e(t,n,r,i,a,o){k(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return w(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return $y(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Ay(this.Zc)&&Ty.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),Ny=function(){function e(t,n,r){k(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||id(t)}return w(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Dy({Zc:e,methodName:t,ca:n,path:go.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function Py(e){var t=e._freezeSettings(),n=id(e._databaseId);return new Ny(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ry(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);Hy("Data must be an object, but it was:",o,r);var u,s,c=Ky(r,o);if(a.merge)u=new tu(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=x(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,v=Wy(t,d,n);if(!o.contains(v))throw new Ya($a.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));Yy(f,v)||f.push(v)}}catch(p){h.e(p)}finally{h.f()}u=new tu(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Iy(new Mu(c),u,s)}var Ly=function(e){E(n,e);var t=A(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Sy);function Oy(e,t,n){return new Dy({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var My=function(e){E(n,e);var t=A(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"_toFieldTransform",value:function(e){return new Vs(e.path,new Ds)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Sy),Fy=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e)).ha=r,i}return w(n,[{key:"_toFieldTransform",value:function(e){var t=Oy(this,e,!0),n=this.ha.map((function(e){return qy(e,t)})),r=new Ns(n);return new Vs(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Sy),Vy=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e)).ha=r,i}return w(n,[{key:"_toFieldTransform",value:function(e){var t=Oy(this,e,!0),n=this.ha.map((function(e){return qy(e,t)})),r=new Rs(n);return new Vs(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Sy),Uy=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e)).la=r,i}return w(n,[{key:"_toFieldTransform",value:function(e){var t=new Os(e.wt,Es(e.wt,this.la));return new Vs(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Sy);function By(e,t,n,r){var i=e.aa(1,t,n);Hy("Data must be an object, but it was:",i,r);var a=[],o=Mu.empty();Wo(r,(function(e,r){var u=Xy(t,e,n);r=Y(r);var s=i.ia(u);if(r instanceof Ly)a.push(u);else{var c=qy(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new tu(a);return new Cy(o,u,i.fieldTransforms)}function jy(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[Wy(t,r,n)],s=[i];if(a.length%2!=0)throw new Ya($a.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Wy(t,a[c])),s.push(a[c+1]);for(var l=[],f=Mu.empty(),h=u.length-1;h>=0;--h)if(!Yy(l,u[h])){var d=u[h],v=s[h];v=Y(v);var p=o.ia(d);if(v instanceof Ly)l.push(d);else{var y=qy(v,p);null!=y&&(l.push(d),f.set(d,y))}}var m=new tu(l);return new Cy(f,m,o.fieldTransforms)}function zy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qy(n,e.aa(r?4:3,t))}function qy(e,t){if(Gy(e=Y(e)))return Hy("Unsupported field value:",t,e),Ky(e,t);if(e instanceof Sy)return function(e,t){if(!Ay(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=x(e);try{for(a.s();!(n=a.n()).done;){var o=qy(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Y(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Es(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=ho.fromDate(e);return{timestampValue:Pc(t.wt,n)}}if(e instanceof ho){var r=new ho(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Pc(t.wt,r)}}if(e instanceof Ey)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _y)return{bytesValue:Rc(t.wt,e._byteString)};if(e instanceof ry){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Mc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(Yp(e)))}(e,t)}function Ky(e,t){var n={};return Qo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wo(e,(function(e,r){var i=qy(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Gy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ho||e instanceof Ey||e instanceof _y||e instanceof ry||e instanceof Sy)}function Hy(e,t,n){if(!Gy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Yp(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function Wy(e,t,n){if((t=Y(t))instanceof xy)return t._internalPath;if("string"==typeof t)return Xy(e,t);throw $y("Field path arguments must be of type string or ",e,!1,void 0,n)}var Qy=new RegExp("[~\\*/\\[\\]]");function Xy(e,t,n){if(t.search(Qy)>=0)throw $y("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return D(xy,J(t.split(".")))._internalPath}catch(r){throw $y("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function $y(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Ya($a.INVALID_ARGUMENT,u+e+s)}function Yy(e,t){return e.some((function(e){return e.isEqual(t)}))}var Jy=function(){function e(t,n,r,i,a){k(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return w(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ry(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Zy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(em("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Zy=function(e){E(n,e);var t=A(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"data",value:function(){return St(T(n.prototype),"data",this).call(this)}}]),n}(Jy);function em(e,t){return"string"==typeof t?Xy(e,t):t instanceof xy?t._internalPath:t._delegate._internalPath}var tm=function(){function e(t,n){k(this,e),this.hasPendingWrites=t,this.fromCache=n}return w(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),nm=function(e){E(n,e);var t=A(n);function n(e,r,i,a,o,u){var s;return k(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return w(n,[{key:"exists",value:function(){return St(T(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new rm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(em("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Jy),rm=function(e){E(n,e);var t=A(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return St(T(n.prototype),"data",this).call(this,e)}}]),n}(nm),im=function(){function e(t,n,r,i){k(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new tm(i.hasPendingWrites,i.fromCache),this.query=r}return w(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new rm(n._firestore,n._userDataWriter,r.key,r,new tm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ya($a.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new rm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new rm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:am(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function am(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wa()}}function om(e,t){return e instanceof nm&&t instanceof nm?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof im&&t instanceof im&&e._firestore===t._firestore&&cy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function um(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ya($a.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sm=w((function e(){k(this,e)}));function cm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var lm=function(e){E(n,e);var t=A(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return w(n,[{key:"_apply",value:function(e){var t=Py(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Ya($a.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){wm(o,a);var s,c=[],l=x(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(bm(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=bm(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||wm(o,a),u=zy(n,"where",o,"in"===a||"not-in"===a);var h=Wu.create(i,a,u);return function(e,t){if(t.ht()){var n=fs(e);if(null!==n&&!n.isEqual(t.field))throw new Ya($a.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=ls(e);null!==r&&xm(e,t.field,r)}var i=function(e,t){var n,r=x(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Ya($a.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ya($a.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new iy(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new us(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(sm);var fm=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return w(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Ya($a.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ya($a.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new rs(t,n);return function(e,t){if(null===ls(e)){var n=fs(e);null!==n&&xm(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new iy(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new us(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(sm);var hm=function(e){E(n,e);var t=A(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return w(n,[{key:"_apply",value:function(e){return new iy(e.firestore,e.converter,ps(e._query,this.ma,this.ga))}}]),n}(sm);var dm=function(e){E(n,e);var t=A(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return w(n,[{key:"_apply",value:function(e){var t=km(e,this.type,this.ya,this.pa);return new iy(e.firestore,e.converter,function(e,t){return new us(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(sm);function vm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dm("startAt",t,!0)}function pm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dm("startAfter",t,!1)}var ym=function(e){E(n,e);var t=A(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return w(n,[{key:"_apply",value:function(e){var t=km(e,this.type,this.ya,this.pa);return new iy(e.firestore,e.converter,function(e,t){return new us(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(sm);function mm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ym("endBefore",t,!1)}function gm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ym("endAt",t,!0)}function km(e,t,n,r){if(n[0]=Y(n[0]),n[0]instanceof Jy)return function(e,t,n,r,i){if(!r)throw new Ya($a.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=x(ds(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Su(t,r.key));else{var c=r.data.field(s.field);if(uu(c))throw new Ya($a.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Ya($a.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new ns(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Py(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Ya($a.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Ya($a.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!hs(e)&&-1!==c.indexOf("/"))throw new Ya($a.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(yo.fromString(c));if(!ko.isDocumentKey(l))throw new Ya($a.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new ko(l);u.push(Su(t,f))}else{var h=zy(n,r,c);u.push(h)}}return new ns(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function bm(e,t,n){if("string"==typeof(n=Y(n))){if(""===n)throw new Ya($a.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hs(t)&&-1!==n.indexOf("/"))throw new Ya($a.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(yo.fromString(n));if(!ko.isDocumentKey(r))throw new Ya($a.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Su(e,new ko(r))}if(n instanceof ry)return Su(e,n._key);throw new Ya($a.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Yp(n),"."))}function wm(e,t){if(!Array.isArray(e)||0===e.length)throw new Ya($a.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Ya($a.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function xm(e,t,n){if(!n.isEqual(t))throw new Ya($a.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var _m={maxAttempts:5},Sm=function(){function e(){k(this,e)}return w(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(mu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return au(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ou(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Wa()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Wo(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Ey(au(e.latitude),au(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=su(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(cu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=iu(e);return new ho(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=yo.fromString(e);Qa(ol(n));var r=new fu(n.get(1),n.get(3)),i=new ko(n.popFirst(5));return r.isEqual(t)||Ka("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Em(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Tm=function(e){E(n,e);var t=A(n);function n(e){var r;return k(this,n),(r=t.call(this)).firestore=e,r}return w(n,[{key:"convertBytes",value:function(e){return new _y(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ry(this.firestore,null,t)}}]),n}(Sm),Im=function(){function e(t,n){k(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Py(t)}return w(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Cm(e,this._firestore),i=Em(r.converter,t,n),a=Ry(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Bs.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Cm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Y(t))||t instanceof xy?jy(this._dataReader,"WriteBatch.update",i._key,t,n,o):By(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Bs.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Cm(e,this._firestore);return this._mutations=this._mutations.concat(new tc(t._key,Bs.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Ya($a.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Cm(e,t){if((e=Y(e)).firestore!==t)throw new Ya($a.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Am=function(e){E(n,e);var t=A(n);function n(e){var r;return k(this,n),(r=t.call(this)).firestore=e,r}return w(n,[{key:"convertBytes",value:function(e){return new _y(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ry(this.firestore,null,t)}}]),n}(Sm);function Dm(e){e=Jp(e,ry);var t=Jp(e.firestore,dy),n=vy(t),r=new Am(t);return function(e,t){var n=new Ja;return e.asyncQueue.enqueueAndForget(g(y().mark((function r(){return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=g(y().mark((function e(t,n,r){var i,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Xa(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Ya($a.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ev(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Up(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new nm(t,r,e._key,n,new tm(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Nm(e){e=Jp(e,iy);var t=Jp(e.firestore,dy),n=vy(t),r=new Am(t);return function(e,t){var n=new Ja;return e.asyncQueue.enqueueAndForget(g(y().mark((function r(){return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=g(y().mark((function e(t,n,r){var i,a,o,u,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Rh(t,n,!0);case 3:i=e.sent,a=new bv(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=ev(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Up(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new im(t,r,e,n)}))}function Pm(e,t,n){e=Jp(e,ry);var r=Jp(e.firestore,dy),i=Em(e.converter,t,n);return Mm(r,[Ry(Py(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Bs.none())])}function Rm(e,t,n){e=Jp(e,ry);for(var r=Jp(e.firestore,dy),i=Py(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Mm(r,[("string"==typeof(t=Y(t))||t instanceof xy?jy(i,"updateDoc",e._key,t,n,o):By(i,"updateDoc",e._key,t)).toMutation(e._key,Bs.exists(!0))])}function Lm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Y(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||fy(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(fy(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof ry)l=Jp(e.firestore,dy),f=cs(e._key.path),c={next:function(t){n[s]&&n[s](Fm(l,e,t))},error:n[s+1],complete:n[s+2]};else{var v=Jp(e,iy);l=Jp(v.firestore,dy),f=v._query;var p=new Am(l);c={next:function(e){n[s]&&n[s](new im(l,p,v,e))},error:n[s+1],complete:n[s+2]},um(e._query)}return function(e,t,n,r){var i=new Ep(r),a=new dv(t,i,n);return e.asyncQueue.enqueueAndForget(g(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ov,t.next=3,zp(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(g(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=sv,t.next=3,zp(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(vy(l),f,h,c)}function Om(e,t){return function(e,t){var n=new Ep(t);return e.asyncQueue.enqueueAndForget(g(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Xa(e).Tu.add(t),t.next()},t.next=3,zp(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(g(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Xa(e).Tu.delete(t)},t.next=3,zp(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(vy(e=Jp(e,dy)),fy(t)?t:{next:t})}function Mm(e,t){return function(e,t){var n=new Ja;return e.asyncQueue.enqueueAndForget(g(y().mark((function r(){return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Dv,r.next=3,jp(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(vy(e),t)}function Fm(e,t,n){var r=n.docs.get(t._key),i=new Am(e);return new nm(e,i,t._key,r,new tm(n.hasPendingWrites,n.fromCache),t.converter)}var Vm=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r))._firestore=e,i}return w(n,[{key:"get",value:function(e){var t=this,r=Cm(e,this._firestore),i=new Am(this._firestore);return St(T(n.prototype),"get",this).call(this,e).then((function(e){return new nm(t._firestore,i,r._key,e._document,new tm(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){k(this,e),this._firestore=t,this._transaction=n,this._dataReader=Py(t)}return w(e,[{key:"get",value:function(e){var t=this,n=Cm(e,this._firestore),r=new Tm(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Wa();var i=e[0];if(i.isFoundDocument())return new Jy(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Jy(t._firestore,r,n._key,null,n.converter);throw Wa()}))}},{key:"set",value:function(e,t,n){var r=Cm(e,this._firestore),i=Em(r.converter,t,n),a=Ry(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Cm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Y(t))||t instanceof xy?jy(this._dataReader,"Transaction.update",i._key,t,n,o):By(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Cm(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Um(e,t,n){e=Jp(e,dy);var r=Object.assign(Object.assign({},_m),n);return function(e){if(e.maxAttempts<1)throw new Ya($a.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Ja;return e.asyncQueue.enqueueAndForget(g(y().mark((function i(){var a;return y().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return Mp(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new Cp(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(vy(e),(function(n){return t(new Vm(e,n))}),r)}function Bm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Fy("arrayUnion",t)}function jm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Vy("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ba=e}(He),Ue(new Z("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new dy(i,new no(e.getProvider("auth-internal")),new oo(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Je(Va,"3.4.13",e),Je(Va,"3.4.13","esm2017")}();function zm(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ya("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function qm(){if("undefined"===typeof Uint8Array)throw new Ya("unimplemented","Uint8Arrays are not available in this environment.")}function Km(){if("undefined"==typeof atob)throw new Ya("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Gm=function(){function e(t){k(this,e),this._delegate=t}return w(e,[{key:"toBase64",value:function(){return Km(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return qm(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Km(),new e(_y.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return qm(),new e(_y.fromUint8Array(t))}}]),e}();function Hm(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=x(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Wm=function(){function e(){k(this,e)}return w(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){wy(e=Jp(e,dy));var n=vy(e),r=e._freezeSettings(),i=new _p;return yy(n,i,new wp(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){wy(e=Jp(e,dy));var t=vy(e),n=e._freezeSettings(),r=new _p;return yy(t,r,new xp(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Ya($a.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Ja;return e._queue.enqueueAndForgetEvenWhileRestricted(g(y().mark((function n(){return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=g(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Oo.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Oo.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(gh(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Qm=function(){function e(t,n,r){var i=this;k(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof fu||(this._appCompat=t)}return w(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ga("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ny(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return my(this._delegate)}},{key:"disableNetwork",value:function(){return gy(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Qp("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Ja;return e.asyncQueue.enqueueAndForget(g(y().mark((function n(){return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=jv,n.next=3,jp(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(vy(e=Jp(e,dy)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Om(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Ya("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new sg(this,oy(this._delegate,e))}catch(t){throw eg(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Zm(this,uy(this._delegate,e))}catch(t){throw eg(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new ag(this,function(e,t){if(e=Jp(e,ty),Wp("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ya($a.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new iy(e,null,function(e){return new us(yo.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw eg(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Um(this._delegate,(function(n){return e(new $m(t,n))}))}},{key:"batch",value:function(){var e=this;return vy(this._delegate),new Ym(new Im(this._delegate,(function(t){return Mm(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return ky(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return by(this._delegate,e).then((function(e){return e?new ag(t,e):null}))}}]),e}(),Xm=function(e){E(n,e);var t=A(n);function n(e){var r;return k(this,n),(r=t.call(this)).firestore=e,r}return w(n,[{key:"convertBytes",value:function(e){return new Gm(new _y(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Zm.forKey(t,this.firestore,null)}}]),n}(Sm);var $m=function(){function e(t,n){k(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Xm(t)}return w(e,[{key:"get",value:function(e){var t=this,n=cg(e);return this._delegate.get(n).then((function(e){return new rg(t._firestore,new nm(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=cg(e);return n?(zm("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=cg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=cg(e);return this._delegate.delete(t),this}}]),e}(),Ym=function(){function e(t){k(this,e),this._delegate=t}return w(e,[{key:"set",value:function(e,t,n){var r=cg(e);return n?(zm("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=cg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=cg(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Jm=function(){function e(t,n,r){k(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return w(e,[{key:"fromFirestore",value:function(e,t){var n=new rm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ig(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Xm(t),n),i.set(n,a)),a}}]),e}();Jm.INSTANCES=new WeakMap;var Zm=function(){function e(t,n){k(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Xm(t)}return w(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new sg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new sg(this.firestore,oy(this._delegate,e))}catch(t){throw eg(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Y(e))instanceof ry&&sy(this._delegate,e)}},{key:"set",value:function(e,t){t=zm("DocumentReference.set",t);try{return t?Pm(this._delegate,e,t):Pm(this._delegate,e)}catch(n){throw eg(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Rm(this._delegate,e):Rm.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw eg(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Mm(Jp(e.firestore,dy),[new tc(e._key,Bs.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tg(n),a=ng(n,(function(t){return new rg(e.firestore,new nm(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Lm(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Dm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Jp(e,ry);var t=Jp(e.firestore,dy);return Kp(vy(t),e._key,{source:"server"}).then((function(n){return Fm(t,e,n)}))}(this._delegate):function(e){e=Jp(e,ry);var t=Jp(e.firestore,dy);return Kp(vy(t),e._key).then((function(n){return Fm(t,e,n)}))}(this._delegate),t.then((function(e){return new rg(n.firestore,new nm(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Jm.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Ya("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new ry(n._delegate,r,new ko(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new ry(n._delegate,r,t))}}]),e}();function eg(e,t,n){return e.message=e.message.replace(t,n),e}function tg(e){var t,n=x(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Hm(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function ng(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Hm(e[0])?e[0]:Hm(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var rg=function(){function e(t,n){k(this,e),this._firestore=t,this._delegate=n}return w(e,[{key:"ref",get:function(){return new Zm(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return om(this._delegate,e._delegate)}}]),e}(),ig=function(e){E(n,e);var t=A(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Wa()}(void 0!==t),t}}]),n}(rg),ag=function(){function e(t,n){k(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Xm(t)}return w(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,cm(this._delegate,function(e,t,n){var r=t,i=em("where",e);return new lm(i,r,n)}(t,n,r)))}catch(i){throw eg(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,cm(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=em("orderBy",e);return new fm(n,t)}(t,n)))}catch(r){throw eg(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,cm(this._delegate,function(e){return Zp("limit",e),new hm("limit",e,"F")}(t)))}catch(n){throw eg(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,cm(this._delegate,function(e){return Zp("limitToLast",e),new hm("limitToLast",e,"L")}(t)))}catch(n){throw eg(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,cm(this._delegate,vm.apply(void 0,arguments)))}catch(t){throw eg(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,cm(this._delegate,pm.apply(void 0,arguments)))}catch(t){throw eg(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,cm(this._delegate,mm.apply(void 0,arguments)))}catch(t){throw eg(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,cm(this._delegate,gm.apply(void 0,arguments)))}catch(t){throw eg(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return cy(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Nm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Jp(e,iy);var t=Jp(e.firestore,dy),n=vy(t),r=new Am(t);return Gp(n,e._query,{source:"server"}).then((function(n){return new im(t,r,e,n)}))}(this._delegate):function(e){e=Jp(e,iy);var t=Jp(e.firestore,dy),n=vy(t),r=new Am(t);return um(e._query),Gp(n,e._query).then((function(n){return new im(t,r,e,n)}))}(this._delegate),t.then((function(e){return new ug(n.firestore,new im(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tg(n),a=ng(n,(function(t){return new ug(e.firestore,new im(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Lm(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Jm.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),og=function(){function e(t,n){k(this,e),this._firestore=t,this._delegate=n}return w(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new ig(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),ug=function(){function e(t,n){k(this,e),this._firestore=t,this._delegate=n}return w(e,[{key:"query",get:function(){return new ag(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new ig(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new og(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new ig(n._firestore,r))}))}},{key:"isEqual",value:function(e){return om(this._delegate,e._delegate)}}]),e}(),sg=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return w(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Zm(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Zm(this.firestore,void 0===e?uy(this._delegate):uy(this._delegate,e))}catch(t){throw eg(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Jp(e.firestore,dy),r=uy(e),i=Em(e.converter,t);return Mm(n,[Ry(Py(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Bs.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Zm(t.firestore,e)}))}},{key:"isEqual",value:function(e){return sy(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Jm.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(ag);function cg(e){return Jp(e,ry)}var lg,fg=function(){function e(){k(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=D(xy,n)}return w(e,[{key:"isEqual",value:function(e){return(e=Y(e))instanceof xy&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(go.keyField().canonicalString())}}]),e}(),hg=function(){function e(t){k(this,e),this._delegate=t}return w(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new My("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Ly("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Bm.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=jm.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Uy("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),dg={Firestore:Qm,GeoPoint:Ey,Timestamp:ho,Blob:Gm,Transaction:$m,WriteBatch:Ym,DocumentReference:Zm,DocumentSnapshot:rg,Query:ag,QueryDocumentSnapshot:ig,QuerySnapshot:ug,CollectionReference:sg,FieldPath:fg,FieldValue:hg,setLogLevel:function(e){!function(e){ja.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Z("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},dg)))})(lg=xt,(function(e,t){return new Qm(e,t,new Wm)})),lg.registerVersion("@firebase/firestore-compat","0.1.22");var vg="firebasestorage.googleapis.com",pg=function(e){E(n,e);var t=A(n);function n(e,r){var i;return k(this,n),(i=t.call(this,yg(e),"Firebase Storage: ".concat(r," (").concat(yg(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(_(i),n.prototype),i}return w(n,[{key:"_codeEquals",value:function(e){return yg(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(j);function yg(e){return"storage/"+e}function mg(){return new pg("unknown","An unknown error occurred, please check the error payload for server response.")}function gg(){return new pg("canceled","User canceled the upload/download.")}function kg(){return new pg("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function bg(e){return new pg("invalid-argument",e)}function wg(){return new pg("app-deleted","The Firebase app was deleted.")}function xg(e){return new pg("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _g(e,t){return new pg("invalid-format","String does not match format '"+e+"': "+t)}function Sg(e){throw new pg("internal-error","Internal error: "+e)}var Eg,Tg=function(){function e(t,n){k(this,e),this.bucket=t,this.path_=n}return w(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new pg("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===vg?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new pg("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Ig=function(){function e(t){k(this,e),this.promise_=Promise.reject(t)}return w(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Cg(e){return"string"===typeof e||e instanceof String}function Ag(e){return Dg()&&e instanceof Blob}function Dg(){return"undefined"!==typeof Blob}function Ng(e,t,n,r){if(r<t)throw bg("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw bg("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Pg(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Rg(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Eg||(Eg={}));var Lg=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;k(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return w(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=mg();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?wg():gg());else i(new pg("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new Og(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var v=!1;function p(e){v||(v=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,p(!0)}),n),p}((function(t,n){if(n)t(!1,new Og(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Eg.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new Og(o,r))}else{var u=r.getErrorCode()===Eg.ABORT;t(!1,new Og(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),Og=w((function e(t,n,r){k(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Mg(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Fg(){for(var e=Mg(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Dg())return new Blob(n);throw new pg("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Vg={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ug=w((function e(t,n){k(this,e),this.data=t,this.contentType=n||null}));function Bg(e,t){switch(e){case Vg.RAW:return new Ug(jg(t));case Vg.BASE64:case Vg.BASE64URL:return new Ug(zg(e,t));case Vg.DATA_URL:return new Ug(function(e){var t=new qg(e);return t.base64?zg(Vg.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw _g(Vg.DATA_URL,"Malformed data URL.")}return jg(t)}(t.rest)}(t),new qg(t).contentType)}throw mg()}function jg(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function zg(e,t){switch(e){case Vg.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw _g(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Vg.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw _g(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw _g(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var qg=w((function e(t){k(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw _g(Vg.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var Kg=function(){function e(t,n){k(this,e);var r=0,i="";Ag(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return w(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Ag(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Dg()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Fg.apply(null,i))}var a=n.map((function(e){return Cg(e)?Bg(Vg.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function Gg(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Hg(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Wg(e,t){return t}var Qg=w((function e(t,n,r,i){k(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Wg})),Xg=null;function $g(){if(Xg)return Xg;var e=[];e.push(new Qg("bucket")),e.push(new Qg("generation")),e.push(new Qg("metageneration")),e.push(new Qg("name","fullPath",!0));var t=new Qg("name");t.xform=function(e,t){return function(e){return!Cg(e)||e.length<2?e:Hg(e)}(t)},e.push(t);var n=new Qg("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Qg("timeCreated")),e.push(new Qg("updated")),e.push(new Qg("md5Hash",null,!0)),e.push(new Qg("cacheControl",null,!0)),e.push(new Qg("contentDisposition",null,!0)),e.push(new Qg("contentEncoding",null,!0)),e.push(new Qg("contentLanguage",null,!0)),e.push(new Qg("contentType",null,!0)),e.push(new Qg("metadata","customMetadata",!0)),Xg=e}function Yg(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Tg(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Jg(e,t,n){var r=Gg(t);return null===r?null:Yg(e,r,n)}function Zg(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function ek(e,t,n){var r=Gg(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=x(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new Tg(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=x(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new Tg(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var tk=w((function e(t,n,r,i){k(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function nk(e){if(!e)throw mg()}function rk(e,t){return function(n,r){var i=Jg(e,r,t);return nk(null!==i),i}}function ik(e,t){return function(n,r){var i=Jg(e,r,t);return nk(null!==i),function(e,t,n,r){var i=Gg(t);if(null===i)return null;if(!Cg(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Pg("/b/"+o(i)+"/o/"+o(a),n,r)+Rg({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function ak(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new pg("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new pg("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new pg("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new pg("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function ok(e){var t=ak(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new pg("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function uk(e,t,n){var r=Pg(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new tk(r,"GET",rk(e,n),i);return a.errorHandler=ok(t),a}function sk(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Pg(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new tk(o,"GET",function(e,t){return function(n,r){var i=ek(e,t,r);return nk(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=ak(t),s}function ck(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function lk(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=ck(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Zg(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=Kg.getBlob(c,r,l);if(null===f)throw kg();var h={name:s.fullPath},d=Pg(a,e.host,e._protocol),v=e.maxUploadRetryTime,p=new tk(d,"POST",rk(e,n),v);return p.urlParams=h,p.headers=o,p.body=f.uploadData(),p.errorHandler=ak(t),p}var fk=w((function e(t,n,r,i){k(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function hk(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){nk(!1)}return nk(!!n&&-1!==(t||["active"]).indexOf(n)),n}var dk=262144;function vk(e,t,n,r,i,a,o,u){var s=new fk(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new pg("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},v=r.slice(f,h);if(null===v)throw kg();var p=t.maxUploadRetryTime,y=new tk(n,"POST",(function(e,n){var i,o=hk(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?rk(t,a)(e,n):null,new fk(u,c,"final"===o,i)}),p);return y.headers=d,y.body=v.uploadData(),y.progressCallback=u||null,y.errorHandler=ak(e),y}var pk={STATE_CHANGED:"state_changed"},yk={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mk(e){switch(e){case"running":case"pausing":case"canceling":return yk.RUNNING;case"paused":return yk.PAUSED;case"success":return yk.SUCCESS;case"canceled":return yk.CANCELED;default:return yk.ERROR}}var gk=w((function e(t,n,r){k(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function kk(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var bk=function(){function e(){var t=this;k(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Eg.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Eg.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Eg.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return w(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Sg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Sg("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Sg("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Sg("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Sg("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),wk=function(e){E(n,e);var t=A(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(bk);function xk(){return new wk}var _k=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;k(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=$g(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return w(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=c(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=ck(t,r,i),u={name:o.fullPath},s=Pg(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=Zg(o,n),f=e.maxUploadRetryTime,h=new tk(s,"POST",(function(e){var t;hk(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){nk(!1)}return nk(Cg(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=ak(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,xk,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new tk(n,"POST",(function(e){var t=hk(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){nk(!1)}n||nk(!1);var i=Number(n);return nk(!isNaN(i)),new fk(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=ak(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,xk,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=dk*this._chunkMultiplier,n=new fk(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=vk(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,xk,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){dk*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=uk(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,xk,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=lk(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,xk,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=gg(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=mk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new gk(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(mk(this._state)){case yk.SUCCESS:kk(this._resolve.bind(null,this.snapshot))();break;case yk.CANCELED:case yk.ERROR:kk(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(mk(this._state)){case yk.RUNNING:case yk.PAUSED:e.next&&kk(e.next.bind(e,this.snapshot))();break;case yk.SUCCESS:e.complete&&kk(e.complete.bind(e))();break;default:e.error&&kk(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Sk=function(){function e(t,n){k(this,e),this._service=t,this._location=n instanceof Tg?n:Tg.makeFromUrl(n,t.host)}return w(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Tg(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Hg(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Tg(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw xg(e)}}]),e}();function Ek(e,t,n){return Tk.apply(this,arguments)}function Tk(){return(Tk=g(y().mark((function e(t,n,r){var i,a,o,u;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,Ik(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,J(u.prefixes)),(a=n.items).push.apply(a,J(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,Ek(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ik(e,t){null!=t&&"number"===typeof t.maxResults&&Ng("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=sk(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,xk)}function Ck(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Pg(t.fullServerUrl(),e.host,e._protocol),a=Zg(n,r),o=e.maxOperationRetryTime,u=new tk(i,"PATCH",rk(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=ok(t),u}(e.storage,e._location,t,$g());return e.storage.makeRequestWithTokens(n,xk)}function Ak(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Pg(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new tk(r,"GET",ik(e,n),i);return a.errorHandler=ok(t),a}(e.storage,e._location,$g());return e.storage.makeRequestWithTokens(t,xk).then((function(e){if(null===e)throw new pg("no-download-url","The given file does not have any download URLs.");return e}))}function Dk(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Pg(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new tk(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=ok(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,xk)}function Nk(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Tg(e._location.bucket,n);return new Sk(e.storage,r)}function Pk(e,t){if(e instanceof Mk){var n=e;if(null==n._bucket)throw new pg("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Sk(n,n._bucket);return null!=t?Pk(r,t):r}return void 0!==t?Nk(e,t):e}function Rk(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Mk)return new Sk(e,t);throw bg("To use ref(service, url), the first argument must be a Storage instance.")}return Pk(e,t)}function Lk(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:Tg.makeFromBucketSpec(n,e)}function Ok(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:F(i,e.app.options.projectId))}var Mk=function(){function e(t,n,r,i,a){k(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=vg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Tg.makeFromBucketSpec(i,this._host):Lk(this._host,this.app.options)}return w(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Tg.makeFromBucketSpec(this._url,e):this._bucket=Lk(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Ng("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Ng("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=g(y().mark((function e(){var t,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=g(y().mark((function e(){var t,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Sk(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new Ig(wg());var a=function(e,t,n,r,i,a){var o=Rg(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new Lg(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=g(y().mark((function e(t,n){var r,i,a,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=c(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Fk="@firebase/storage",Vk="0.9.9",Uk="storage";function Bk(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new _k(e,new Kg(t),n)}(e=Y(e),t,n)}function jk(e){return function(e){e._throwIfRoot("getMetadata");var t=uk(e.storage,e._location,$g());return e.storage.makeRequestWithTokens(t,xk)}(e=Y(e))}function zk(e){return function(e){var t={prefixes:[],items:[]};return Ek(e,t).then((function(){return t}))}(e=Y(e))}function qk(e,t){return Rk(e=Y(e),t)}function Kk(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Ok(e,t,n,r)}function Gk(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Mk(r,i,a,n,He)}Ue(new Z(Uk,Gk,"PUBLIC").setMultipleInstances(!0)),Je(Fk,Vk,""),Je(Fk,Vk,"esm2017");var Hk=function(){function e(t,n,r){k(this,e),this._delegate=t,this.task=n,this.ref=r}return w(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),Wk=function(){function e(t,n){k(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return w(e,[{key:"snapshot",get:function(){return new Hk(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Hk(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new Hk(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Hk(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),Qk=function(){function e(t,n){k(this,e),this._delegate=t,this._service=n}return w(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Xk(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new Xk(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),Xk=function(){function e(t,n){k(this,e),this._delegate=t,this.storage=n}return w(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return Nk(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new Wk(Bk(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vg.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Bg(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Wk(new _k(this._delegate,new Kg(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return zk(this._delegate).then((function(t){return new Qk(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return Ik(e=Y(e),t)}(this._delegate,e||void 0).then((function(e){return new Qk(e,t.storage)}))}},{key:"getMetadata",value:function(){return jk(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return Ck(e=Y(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return Ak(Y(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),Dk(Y(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw xg(e)}}]),e}(),$k=function(){function e(t,n){k(this,e),this.app=t,this._delegate=n}return w(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Yk(e))throw bg("ref() expected a child path but got a URL, use refFromURL instead.");return new Xk(qk(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Yk(e))throw bg("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Tg.makeFromUrl(e,this._delegate.host)}catch(t){throw bg("refFromUrl() expected a valid full URL but got an invalid one.")}return new Xk(qk(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Kk(this._delegate,e,t,n)}}]),e}();function Yk(e){return/^[A-Za-z]+:\/\//.test(e)}function Jk(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new $k(r,i)}!function(e){var t={TaskState:yk,TaskEvent:pk,StringFormat:Vg,Storage:$k,Reference:Xk};e.INTERNAL.registerComponent(new Z("storage-compat",Jk,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.17")}(xt);var Zk=xt.initializeApp({apiKey:"AIzaSyDA1Qwtc8K8JepaFlBr7wS1MEJPa9NNVZk",authDomain:"mmphotos-29297.firebaseapp.com",projectId:"mmphotos-29297",storageBucket:"mmphotos-29297.appspot.com",messagingSenderId:"91052292589",appId:"1:91052292589:web:eee8baec25963114dd8fe4",measurementId:"G-478PBFZ2PH"}),eb=Zk.firestore(),tb=Zk.storage(),nb=xt.firestore.FieldValue.serverTimestamp;var rb=function(e,t){return rb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},rb(e,t)};function ib(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}rb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ab=function(){return ab=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ab.apply(this,arguments)};function ob(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function ub(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function sb(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var cb=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},lb={measureLayout:cb(["layout","layoutId","drag","_layoutResetTransform"]),animation:cb(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag"]),exit:cb(["exit"]),drag:cb(["drag","dragControls"]),focus:cb(["whileFocus"]),hover:cb(["whileHover","onHoverStart","onHoverEnd"]),tap:cb(["whileTap","onTap","onTapStart","onTapCancel"]),pan:cb(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),layoutAnimation:cb(["layout","layoutId"])};var fb=(0,t.createContext)({strict:!1}),hb=Object.keys(lb),db=hb.length;var vb=(0,t.createContext)({transformPagePoint:function(e){return e},isStatic:!1}),pb=(0,t.createContext)({});var yb=(0,t.createContext)(null);function mb(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}function gb(){var e=(0,t.useContext)(yb);if(null===e)return[!0,null];var n=e.isPresent,r=e.onExitComplete,i=e.register,a=xb();(0,t.useEffect)((function(){return i(a)}),[]);return!n&&r?[!1,function(){return null===r||void 0===r?void 0:r(a)}]:[!0]}function kb(e){return null===e||e.isPresent}var bb=0,wb=function(){return bb++},xb=function(){return mb(wb)},_b=(0,t.createContext)(null),Sb="undefined"!==typeof window,Eb=Sb?t.useLayoutEffect:t.useEffect;function Tb(e,n,r,i){var a=(0,t.useContext)(vb),o=(0,t.useContext)(fb),u=(0,t.useContext)(pb).visualElement,s=(0,t.useContext)(yb),c=function(e){var n=e.layoutId,r=(0,t.useContext)(_b);return r&&void 0!==n?r+"-"+n:n}(r),l=(0,t.useRef)(void 0);i||(i=o.renderer),!l.current&&i&&(l.current=i(e,{visualState:n,parent:u,props:ab(ab({},r),{layoutId:c}),presenceId:null===s||void 0===s?void 0:s.id,blockInitialAnimation:!1===(null===s||void 0===s?void 0:s.initial)}));var f=l.current;return Eb((function(){f&&(f.setProps(ab(ab(ab({},a),r),{layoutId:c})),f.isPresent=kb(s),f.isPresenceRoot=!u||u.presenceId!==(null===s||void 0===s?void 0:s.id),f.syncRender())})),(0,t.useEffect)((function(){var e;f&&(null===(e=f.animationState)||void 0===e||e.animateChanges())})),Eb((function(){return function(){return null===f||void 0===f?void 0:f.notifyUnmount()}}),[]),f}function Ib(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Cb(e){return Array.isArray(e)}function Ab(e){return"string"===typeof e||Cb(e)}function Db(e,t,n,r,i){var a;return void 0===r&&(r={}),void 0===i&&(i={}),"string"===typeof t&&(t=null===(a=e.variants)||void 0===a?void 0:a[t]),"function"===typeof t?t(null!==n&&void 0!==n?n:e.custom,r,i):t}function Nb(e,t,n){var r=e.getProps();return Db(r,t,null!==n&&void 0!==n?n:r.custom,function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.getVelocity()})),t}(e))}function Pb(e){var t;return"function"===typeof(null===(t=e.animate)||void 0===t?void 0:t.start)||Ab(e.initial)||Ab(e.animate)||Ab(e.whileHover)||Ab(e.whileDrag)||Ab(e.whileTap)||Ab(e.whileFocus)||Ab(e.exit)}function Rb(e){return Boolean(Pb(e)||e.variants)}function Lb(e,n){var r=function(e,t){if(Pb(e)){var n=e.initial,r=e.animate;return{initial:!1===n||Ab(n)?n:void 0,animate:Ab(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(pb)),i=r.initial,a=r.animate;return(0,t.useMemo)((function(){return{initial:i,animate:a}}),n?[Ob(i),Ob(a)]:[])}function Ob(e){return Array.isArray(e)?e.join(" "):e}function Mb(e){var n=e.preloadedFeatures,r=e.createVisualElement,i=e.useRender,a=e.useVisualState,o=e.Component;return n&&function(e){for(var t in e){var n=e[t];null!==n&&(lb[t].Component=n)}}(n),(0,t.forwardRef)((function(e,n){var u=(0,t.useContext)(vb).isStatic,s=null,c=Lb(e,u),l=a(e,u);return!u&&Sb&&(c.visualElement=Tb(o,l,e,r),s=function(e,n,r){var i=[];if((0,t.useContext)(fb),!n)return null;for(var a=0;a<db;a++){var o=hb[a],u=lb[o],s=u.isEnabled,c=u.Component;s(e)&&c&&i.push(t.createElement(c,ab({key:o},e,{visualElement:n})))}return i}(e,c.visualElement)),t.createElement(t.Fragment,null,t.createElement(pb.Provider,{value:c},i(o,e,function(e,n,r){return(0,t.useCallback)((function(t){var i;t&&(null===(i=e.mount)||void 0===i||i.call(e,t)),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):Ib(r)&&(r.current=t))}),[n])}(l,c.visualElement,n),l,u)),s)}))}function Fb(e){function t(t,n){return void 0===n&&(n={}),Mb(e(t,n))}var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var Vb=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function Ub(e){return"string"===typeof e&&!e.includes("-")&&!!(Vb.indexOf(e)>-1||/[A-Z]/.test(e))}var Bb={};var jb=["","X","Y","Z"],zb=["transformPerspective","x","y","z"];function qb(e,t){return zb.indexOf(e)-zb.indexOf(t)}["translate","scale","rotate","skew"].forEach((function(e){return jb.forEach((function(t){return zb.push(e+t)}))}));var Kb=new Set(zb);function Gb(e){return Kb.has(e)}var Hb=new Set(["originX","originY","originZ"]);function Wb(e){return Hb.has(e)}function Qb(e,t){var n=t.layout,r=t.layoutId;return Gb(e)||Wb(e)||(n||void 0!==r)&&(!!Bb[e]||"opacity"===e)}var Xb=function(e){return null!==e&&"object"===typeof e&&e.getVelocity},$b={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function Yb(e){return e.startsWith("--")}var Jb=function(e,t){return t&&"number"===typeof e?t.transform(e):e},Zb=function(e,t){return function(n){return Math.max(Math.min(n,t),e)}},ew=function(e){return e%1?Number(e.toFixed(5)):e},tw=/(-)?([\d]*\.?[\d])+/g,nw=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,rw=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function iw(e){return"string"===typeof e}var aw=function(e){return{test:function(t){return iw(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}},ow=aw("deg"),uw=aw("%"),sw=aw("px"),cw=aw("vh"),lw=aw("vw"),fw=ab(ab({},uw),{parse:function(e){return uw.parse(e)/100},transform:function(e){return uw.transform(100*e)}}),hw={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},dw=ab(ab({},hw),{transform:Zb(0,1)}),vw=ab(ab({},hw),{default:1}),pw=ab(ab({},hw),{transform:Math.round}),yw={borderWidth:sw,borderTopWidth:sw,borderRightWidth:sw,borderBottomWidth:sw,borderLeftWidth:sw,borderRadius:sw,radius:sw,borderTopLeftRadius:sw,borderTopRightRadius:sw,borderBottomRightRadius:sw,borderBottomLeftRadius:sw,width:sw,maxWidth:sw,height:sw,maxHeight:sw,size:sw,top:sw,right:sw,bottom:sw,left:sw,padding:sw,paddingTop:sw,paddingRight:sw,paddingBottom:sw,paddingLeft:sw,margin:sw,marginTop:sw,marginRight:sw,marginBottom:sw,marginLeft:sw,rotate:ow,rotateX:ow,rotateY:ow,rotateZ:ow,scale:vw,scaleX:vw,scaleY:vw,scaleZ:vw,skew:ow,skewX:ow,skewY:ow,distance:sw,translateX:sw,translateY:sw,translateZ:sw,x:sw,y:sw,z:sw,perspective:sw,transformPerspective:sw,opacity:dw,originX:fw,originY:fw,originZ:sw,zIndex:pw,fillOpacity:dw,strokeOpacity:dw,numOctaves:pw};function mw(e,t,n,r,i,a,o,u){var s,c=e.style,l=e.vars,f=e.transform,h=e.transformKeys,d=e.transformOrigin;h.length=0;var v=!1,p=!1,y=!0;for(var m in t){var g=t[m];if(Yb(m))l[m]=g;else{var k=yw[m],b=Jb(g,k);if(Gb(m)){if(v=!0,f[m]=b,h.push(m),!y)continue;g!==(null!==(s=k.default)&&void 0!==s?s:0)&&(y=!1)}else if(Wb(m))d[m]=b,p=!0;else if((null===n||void 0===n?void 0:n.isHydrated)&&(null===r||void 0===r?void 0:r.isHydrated)&&Bb[m]){var w=Bb[m].process(g,r,n),x=Bb[m].applyTo;if(x)for(var _=x.length,S=0;S<_;S++)c[x[S]]=w;else c[m]=w}else c[m]=b}}r&&n&&o&&u?(c.transform=o(r.deltaFinal,r.treeScale,v?f:void 0),a&&(c.transform=a(f,c.transform)),c.transformOrigin=u(r)):(v&&(c.transform=function(e,t,n,r){var i=e.transform,a=e.transformKeys,o=t.enableHardwareAcceleration,u=void 0===o||o,s=t.allowTransformNone,c=void 0===s||s,l="";a.sort(qb);for(var f=!1,h=a.length,d=0;d<h;d++){var v=a[d];l+=($b[v]||v)+"("+i[v]+") ","z"===v&&(f=!0)}return!f&&u?l+="translateZ(0)":l=l.trim(),r?l=r(i,n?"":l):c&&n&&(l="none"),l}(e,i,y,a)),p&&(c.transformOrigin=function(e){var t=e.originX,n=void 0===t?"50%":t,r=e.originY,i=void 0===r?"50%":r,a=e.originZ;return n+" "+i+" "+(void 0===a?0:a)}(d)))}var gw=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function kw(e,t,n){for(var r in t)Xb(t[r])||Qb(r,n)||(e[r]=t[r])}function bw(e,n,r){var i={};return kw(i,e.style||{},e),Object.assign(i,function(e,n,r){var i=e.transformTemplate;return(0,t.useMemo)((function(){var e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};mw(e,n,void 0,void 0,{enableHardwareAcceleration:!r},i);var t=e.style;return ab(ab({},e.vars),t)}),[n])}(e,n,r)),e.transformValues&&(i=e.transformValues(i)),i}function ww(e,t,n){var r={},i=bw(e,t,n);return Boolean(e.drag)&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),r.style=i,r}var xw=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","_layoutResetTransform","onLayoutAnimationComplete","onViewportBoxUpdate","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover"]);function _w(e){return xw.has(e)}var Sw=function(e){return!_w(e)};try{var Ew=n(213).Z;Sw=function(e){return e.startsWith("on")?!_w(e):Ew(e)}}catch(Hp){}function Tw(e,t,n){return"string"===typeof e?e:sw.transform(t+n*e)}var Iw=function(e,t){return sw.transform(e*t)},Cw={offset:"stroke-dashoffset",array:"stroke-dasharray"},Aw={offset:"strokeDashoffset",array:"strokeDasharray"};function Dw(e,t,n,r,i,a,o,u){var s=t.attrX,c=t.attrY,l=t.originX,f=t.originY,h=t.pathLength,d=t.pathSpacing,v=void 0===d?1:d,p=t.pathOffset,y=void 0===p?0:p;mw(e,ob(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,r,i,a,o,u),e.attrs=e.style,e.style={};var m=e.attrs,g=e.style,k=e.dimensions,b=e.totalPathLength;m.transform&&(k&&(g.transform=m.transform),delete m.transform),k&&(void 0!==l||void 0!==f||g.transform)&&(g.transformOrigin=function(e,t,n){return Tw(t,e.x,e.width)+" "+Tw(n,e.y,e.height)}(k,void 0!==l?l:.5,void 0!==f?f:.5)),void 0!==s&&(m.x=s),void 0!==c&&(m.y=c),void 0!==b&&void 0!==h&&function(e,t,n,r,i,a){void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=!0);var o=a?Cw:Aw;e[o.offset]=Iw(-i,t);var u=Iw(n,t),s=Iw(r,t);e[o.array]=u+" "+s}(m,b,h,v,y,!1)}var Nw=function(){return ab(ab({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function Pw(e,n){var r=(0,t.useMemo)((function(){var t=Nw();return Dw(t,n,void 0,void 0,{enableHardwareAcceleration:!1},e.transformTemplate),ab(ab({},t.attrs),{style:ab({},t.style)})}),[n]);if(e.style){var i={};kw(i,e.style,e),r.style=ab(ab({},i),r.style)}return r}function Rw(e){void 0===e&&(e=!1);return function(n,r,i,a,o){var u=a.latestValues,s=(Ub(n)?Pw:ww)(r,u,o),c=function(e,t,n){var r={};for(var i in e)(Sw(i)||!0===n&&_w(i)||!t&&!_w(i))&&(r[i]=e[i]);return r}(r,"string"===typeof n,e),l=ab(ab(ab({},c),s),{ref:i});return(0,t.createElement)(n,l)}}var Lw=/([a-z])([A-Z])/g,Ow=function(e){return e.replace(Lw,"$1-$2").toLowerCase()};function Mw(e,t){var n=t.style,r=t.vars;for(var i in Object.assign(e.style,n),r)e.style.setProperty(i,r[i])}var Fw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform"]);function Vw(e,t){for(var n in Mw(e,t),t.attrs)e.setAttribute(Fw.has(n)?n:Ow(n),t.attrs[n])}function Uw(e){var t=e.style,n={};for(var r in t)(Xb(t[r])||Qb(r,e))&&(n[r]=t[r]);return n}function Bw(e){var t=Uw(e);for(var n in e){if(Xb(e[n]))t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]}return t}function jw(e){return"object"===typeof e&&"function"===typeof e.start}var zw=function(e){return Array.isArray(e)},qw=function(e){return zw(e)?e[e.length-1]||0:e};function Kw(e){var t=Xb(e)?e.get():e;return function(e){return Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)}(t)?t.toValue():t}function Gw(e,t,n,r){var i=e.scrapeMotionValuesFromProps,a=e.createRenderState,o=e.onMount,u={latestValues:Ww(t,n,r,i),renderState:a()};return o&&(u.mount=function(e){return o(t,e,u)}),u}var Hw=function(e){return function(n,r){var i=(0,t.useContext)(pb),a=(0,t.useContext)(yb);return r?Gw(e,n,i,a):mb((function(){return Gw(e,n,i,a)}))}};function Ww(e,t,n,r){var i={},a=!1===(null===n||void 0===n?void 0:n.initial),o=r(e);for(var u in o)i[u]=Kw(o[u]);var s=e.initial,c=e.animate,l=Pb(e),f=Rb(e);t&&f&&!l&&!1!==e.inherit&&(null!==s&&void 0!==s||(s=t.initial),null!==c&&void 0!==c||(c=t.animate));var h=a||!1===s?c:s;h&&"boolean"!==typeof h&&!jw(h)&&(Array.isArray(h)?h:[h]).forEach((function(t){var n=Db(e,t);if(n){var r=n.transitionEnd;n.transition;var a=ob(n,["transitionEnd","transition"]);for(var o in a)i[o]=a[o];for(var o in r)i[o]=r[o]}}));return i}var Qw={useVisualState:Hw({scrapeMotionValuesFromProps:Bw,createRenderState:Nw,onMount:function(e,t,n){var r=n.renderState,i=n.latestValues;try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(a){r.dimensions={x:0,y:0,width:0,height:0}}"path"===t.tagName&&(r.totalPathLength=t.getTotalLength()),Dw(r,i,void 0,void 0,{enableHardwareAcceleration:!1},e.transformTemplate),Vw(t,r)}})};var Xw,$w={useVisualState:Hw({scrapeMotionValuesFromProps:Uw,createRenderState:gw})};function Yw(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function Jw(e,n,r,i){(0,t.useEffect)((function(){var t=e.current;if(r&&t)return Yw(t,n,r,i)}),[e,n,r,i])}function Zw(e){return"undefined"!==typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function ex(e){return!!e.touches}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.Exit="exit"}(Xw||(Xw={}));var tx={pageX:0,pageY:0};function nx(e,t){void 0===t&&(t="page");var n=e.touches[0]||e.changedTouches[0]||tx;return{x:n[t+"X"],y:n[t+"Y"]}}function rx(e,t){return void 0===t&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function ix(e,t){return void 0===t&&(t="page"),{point:ex(e)?nx(e,t):rx(e,t)}}var ax=function(e,t){void 0===t&&(t=!1);var n,r=function(t){return e(t,ix(t))};return t?(n=r,function(e){var t=e instanceof MouseEvent;(!t||t&&0===e.button)&&n(e)}):r},ox={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},ux={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function sx(e){return Sb&&null===window.onpointerdown?e:Sb&&null===window.ontouchstart?ux[e]:Sb&&null===window.onmousedown?ox[e]:e}function cx(e,t,n,r){return Yw(e,sx(t),ax(n,"pointerdown"===t),r)}function lx(e,t,n,r){return Jw(e,sx(t),n&&ax(n,"pointerdown"===t),r)}function fx(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var hx=fx("dragHorizontal"),dx=fx("dragVertical");function vx(e){var t=!1;if("y"===e)t=dx();else if("x"===e)t=hx();else{var n=hx(),r=dx();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function px(){var e=vx(!0);return!e||(e(),!1)}function yx(e,t,n){return function(r,i){var a;Zw(r)&&!px()&&(null===n||void 0===n||n(r,i),null===(a=e.animationState)||void 0===a||a.setActive(Xw.Hover,t))}}var mx=function e(t,n){return!!n&&(t===n||e(t,n.parentElement))};function gx(e){return(0,t.useEffect)((function(){return function(){return e()}}),[])}var kx=function(e,t){return function(n){return t(e(n))}},bx=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(kx)};var wx=function(e){return function(t){return e(t),null}},xx={tap:wx((function(e){var n=e.onTap,r=e.onTapStart,i=e.onTapCancel,a=e.whileTap,o=e.visualElement,u=n||r||i||a,s=(0,t.useRef)(!1),c=(0,t.useRef)(null);function l(){var e;null===(e=c.current)||void 0===e||e.call(c),c.current=null}function f(){var e;return l(),s.current=!1,null===(e=o.animationState)||void 0===e||e.setActive(Xw.Tap,!1),!px()}function h(e,t){f()&&(mx(o.getInstance(),e.target)?null===n||void 0===n||n(e,t):null===i||void 0===i||i(e,t))}function d(e,t){f()&&(null===i||void 0===i||i(e,t))}lx(o,"pointerdown",u?function(e,t){var n;l(),s.current||(s.current=!0,c.current=bx(cx(window,"pointerup",h),cx(window,"pointercancel",d)),null===r||void 0===r||r(e,t),null===(n=o.animationState)||void 0===n||n.setActive(Xw.Tap,!0))}:void 0),gx(l)})),focus:wx((function(e){var t=e.whileFocus,n=e.visualElement;Jw(n,"focus",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(Xw.Focus,!0)}:void 0),Jw(n,"blur",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(Xw.Focus,!1)}:void 0)})),hover:wx((function(e){var t=e.onHoverStart,n=e.onHoverEnd,r=e.whileHover,i=e.visualElement;lx(i,"pointerenter",t||r?yx(i,!0,t):void 0),lx(i,"pointerleave",n||r?yx(i,!1,n):void 0)}))};function _x(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var Sx=function(e,t,n){return Math.min(Math.max(n,e),t)},Ex=.001;function Tx(e){var t,n,r=e.duration,i=void 0===r?800:r,a=e.bounce,o=void 0===a?.25:a,u=e.velocity,s=void 0===u?0:u,c=e.mass,l=void 0===c?1:c,f=1-o;f=Sx(.05,1,f),i=Sx(.01,10,i/1e3),f<1?(t=function(e){var t=e*f,n=t*i,r=t-s,a=Ix(e,f),o=Math.exp(-n);return Ex-r/a*o},n=function(e){var n=e*f*i,r=n*s+s,a=Math.pow(f,2)*Math.pow(e,2)*i,o=Math.exp(-n),u=Ix(Math.pow(e,2),f);return(-t(e)+Ex>0?-1:1)*((r-a)*o)/u}):(t=function(e){return Math.exp(-e*i)*((e-s)*i+1)-.001},n=function(e){return Math.exp(-e*i)*(i*i*(s-e))});var h=function(e,t,n){for(var r=n,i=1;i<12;i++)r-=e(r)/t(r);return r}(t,n,5/i);if(i*=1e3,isNaN(h))return{stiffness:100,damping:10,duration:i};var d=Math.pow(h,2)*l;return{stiffness:d,damping:2*f*Math.sqrt(l*d),duration:i}}function Ix(e,t){return e*Math.sqrt(1-t*t)}var Cx=["duration","bounce"],Ax=["stiffness","damping","mass"];function Dx(e,t){return t.some((function(t){return void 0!==e[t]}))}function Nx(e){var t=e.from,n=void 0===t?0:t,r=e.to,i=void 0===r?1:r,a=e.restSpeed,o=void 0===a?2:a,u=e.restDelta,s=ob(e,["from","to","restSpeed","restDelta"]),c={done:!1,value:n},l=function(e){var t=ab({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Dx(e,Ax)&&Dx(e,Cx)){var n=Tx(e);(t=ab(ab(ab({},t),n),{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(s),f=l.stiffness,h=l.damping,d=l.mass,v=l.velocity,p=l.duration,y=l.isResolvedFromDuration,m=Px,g=Px;function k(){var e=v?-v/1e3:0,t=i-n,r=h/(2*Math.sqrt(f*d)),a=Math.sqrt(f/d)/1e3;if(null!==u&&void 0!==u||(u=Math.abs(i-n)<=1?.01:.4),r<1){var o=Ix(a,r);m=function(n){var u=Math.exp(-r*a*n);return i-u*((e+r*a*t)/o*Math.sin(o*n)+t*Math.cos(o*n))},g=function(n){var i=Math.exp(-r*a*n);return r*a*i*(Math.sin(o*n)*(e+r*a*t)/o+t*Math.cos(o*n))-i*(Math.cos(o*n)*(e+r*a*t)-o*t*Math.sin(o*n))}}else if(1===r)m=function(n){return i-Math.exp(-a*n)*(t+(e+a*t)*n)};else{var s=a*Math.sqrt(r*r-1);m=function(n){var o=Math.exp(-r*a*n),u=Math.min(s*n,300);return i-o*((e+r*a*t)*Math.sinh(u)+s*t*Math.cosh(u))/s}}}return k(),{next:function(e){var t=m(e);if(y)c.done=e>=p;else{var n=1e3*g(e),r=Math.abs(n)<=o,a=Math.abs(i-t)<=u;c.done=r&&a}return c.value=c.done?i:t,c},flipTarget:function(){var e;v=-v,n=(e=[i,n])[0],i=e[1],k()}}}Nx.needsInterpolation=function(e,t){return"string"===typeof e||"string"===typeof t};var Px=function(e){return 0},Rx=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r},Lx=function(e,t,n){return-n*e+n*t+e},Ox=function(e,t){return function(n){return Boolean(iw(n)&&rw.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))}},Mx=function(e,t,n){return function(r){var i;if(!iw(r))return r;var a=r.match(tw),o=a[0],u=a[1],s=a[2],c=a[3];return(i={})[e]=parseFloat(o),i[t]=parseFloat(u),i[n]=parseFloat(s),i.alpha=void 0!==c?parseFloat(c):1,i}},Fx=Zb(0,255),Vx=ab(ab({},hw),{transform:function(e){return Math.round(Fx(e))}}),Ux={test:Ox("rgb","red"),parse:Mx("red","green","blue"),transform:function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha,a=void 0===i?1:i;return"rgba("+Vx.transform(t)+", "+Vx.transform(n)+", "+Vx.transform(r)+", "+ew(dw.transform(a))+")"}};var Bx={test:Ox("#"),parse:function(e){var t="",n="",r="",i="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2),i=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),i=e.substr(4,1),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:Ux.transform},jx={test:Ox("hsl","hue"),parse:Mx("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha,a=void 0===i?1:i;return"hsla("+Math.round(t)+", "+uw.transform(ew(n))+", "+uw.transform(ew(r))+", "+ew(dw.transform(a))+")"}},zx=function(e,t,n){var r=e*e,i=t*t;return Math.sqrt(Math.max(0,n*(i-r)+r))},qx=[Bx,Ux,jx],Kx=function(e){return qx.find((function(t){return t.test(e)}))},Gx=function(e){return"'"+e+"' is not an animatable color. Use the equivalent color code instead."},Hx=function(e,t){var n=Kx(e),r=Kx(t);Gx(e),Gx(t),n.transform,r.transform;var i=n.parse(e),a=r.parse(t),o=ab({},i),u=n===jx?Lx:zx;return function(e){for(var t in o)"alpha"!==t&&(o[t]=u(i[t],a[t],e));return o.alpha=Lx(i.alpha,a.alpha,e),n.transform(o)}},Wx={test:function(e){return Ux.test(e)||Bx.test(e)||jx.test(e)},parse:function(e){return Ux.test(e)?Ux.parse(e):jx.test(e)?jx.parse(e):Bx.parse(e)},transform:function(e){return iw(e)?e:e.hasOwnProperty("red")?Ux.transform(e):jx.transform(e)}},Qx="${c}",Xx="${n}";function $x(e){var t=[],n=0,r=e.match(nw);r&&(n=r.length,e=e.replace(nw,Qx),t.push.apply(t,r.map(Wx.parse)));var i=e.match(tw);return i&&(e=e.replace(tw,Xx),t.push.apply(t,i.map(hw.parse))),{values:t,numColors:n,tokenised:e}}function Yx(e){return $x(e).values}function Jx(e){var t=$x(e),n=t.values,r=t.numColors,i=t.tokenised,a=n.length;return function(e){for(var t=i,n=0;n<a;n++)t=t.replace(n<r?Qx:Xx,n<r?Wx.transform(e[n]):ew(e[n]));return t}}var Zx=function(e){return"number"===typeof e?0:e};var e_={test:function(e){var t,n,r,i;return isNaN(e)&&iw(e)&&(null!==(n=null===(t=e.match(tw))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(i=null===(r=e.match(nw))||void 0===r?void 0:r.length)&&void 0!==i?i:0)>0},parse:Yx,createTransformer:Jx,getAnimatableNone:function(e){var t=Yx(e);return Jx(e)(t.map(Zx))}},t_=function(e){return"number"===typeof e};function n_(e,t){return t_(e)?function(n){return Lx(e,t,n)}:Wx.test(e)?Hx(e,t):o_(e,t)}var r_=function(e,t){var n=sb([],e),r=n.length,i=e.map((function(e,n){return n_(e,t[n])}));return function(e){for(var t=0;t<r;t++)n[t]=i[t](e);return n}},i_=function(e,t){var n=ab(ab({},e),t),r={};for(var i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=n_(e[i],t[i]));return function(e){for(var t in r)n[t]=r[t](e);return n}};function a_(e){for(var t=e_.parse(e),n=t.length,r=0,i=0,a=0,o=0;o<n;o++)r||"number"===typeof t[o]?r++:void 0!==t[o].hue?a++:i++;return{parsed:t,numNumbers:r,numRGB:i,numHSL:a}}var o_=function(e,t){var n=e_.createTransformer(t),r=a_(e),i=a_(t);return r.numHSL===i.numHSL&&r.numRGB===i.numRGB&&(r.numNumbers,i.numNumbers),bx(r_(r.parsed,i.parsed),n)},u_=function(e,t){return function(n){return Lx(e,t,n)}};function s_(e,t,n){for(var r=[],i=n||function(e){return"number"===typeof e?u_:"string"===typeof e?Wx.test(e)?Hx:o_:Array.isArray(e)?r_:"object"===typeof e?i_:void 0}(e[0]),a=e.length-1,o=0;o<a;o++){var u=i(e[o],e[o+1]);if(t){var s=Array.isArray(t)?t[o]:t;u=bx(s,u)}r.push(u)}return r}function c_(e,t,n){var r=void 0===n?{}:n,i=r.clamp,a=void 0===i||i,o=r.ease,u=r.mixer,s=e.length;t.length,!o||!Array.isArray(o)||o.length,e[0]>e[s-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());var c=s_(t,o,u),l=2===s?function(e,t){var n=e[0],r=e[1],i=t[0];return function(e){return i(Rx(n,r,e))}}(e,c):function(e,t){var n=e.length,r=n-1;return function(i){var a=0,o=!1;if(i<=e[0]?o=!0:i>=e[r]&&(a=r-1,o=!0),!o){for(var u=1;u<n&&!(e[u]>i||u===r);u++);a=u-1}var s=Rx(e[a],e[a+1],i);return t[a](s)}}(e,c);return a?function(t){return l(Sx(e[0],e[s-1],t))}:l}var l_,f_=function(e){return function(t){return 1-e(1-t)}},h_=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},d_=function(e){return function(t){return t*t*((e+1)*t-e)}},v_=function(e){return e},p_=(l_=2,function(e){return Math.pow(e,l_)}),y_=f_(p_),m_=h_(p_),g_=function(e){return 1-Math.sin(Math.acos(e))},k_=f_(g_),b_=h_(k_),w_=d_(1.525),x_=f_(w_),__=h_(w_),S_=function(e){var t=d_(e);return function(e){return(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))}}(1.525),E_=function(e){if(1===e||0===e)return e;var t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},T_=f_(E_);function I_(e,t){return e.map((function(){return t||m_})).splice(0,e.length-1)}function C_(e){var t=e.from,n=void 0===t?0:t,r=e.to,i=void 0===r?1:r,a=e.ease,o=e.offset,u=e.duration,s=void 0===u?300:u,c={done:!1,value:n},l=Array.isArray(i)?i:[n,i],f=function(e,t){return e.map((function(e){return e*t}))}(o&&o.length===l.length?o:function(e){var t=e.length;return e.map((function(e,n){return 0!==n?n/(t-1):0}))}(l),s);function h(){return c_(f,l,{ease:Array.isArray(a)?a:I_(l,a)})}var d=h();return{next:function(e){return c.value=d(e),c.done=e>=s,c},flipTarget:function(){l.reverse(),d=h()}}}var A_={keyframes:C_,spring:Nx,decay:function(e){var t=e.velocity,n=void 0===t?0:t,r=e.from,i=void 0===r?0:r,a=e.power,o=void 0===a?.8:a,u=e.timeConstant,s=void 0===u?350:u,c=e.restDelta,l=void 0===c?.5:c,f=e.modifyTarget,h={done:!1,value:i},d=o*n,v=i+d,p=void 0===f?v:f(v);return p!==v&&(d=p-i),{next:function(e){var t=-d*Math.exp(-e/s);return h.done=!(t>l||t<-l),h.value=h.done?p:p+t,h},flipTarget:function(){}}}};var D_=1/60*1e3,N_="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()},P_="undefined"!==typeof window?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout((function(){return e(N_())}),D_)};var R_=!0,L_=!1,O_=!1,M_={delta:0,timestamp:0},F_=["read","update","preRender","render","postRender"],V_=F_.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],r=0,i=!1,a=new WeakSet,o={schedule:function(e,o,u){void 0===o&&(o=!1),void 0===u&&(u=!1);var s=u&&i,c=s?t:n;return o&&a.add(e),-1===c.indexOf(e)&&(c.push(e),s&&i&&(r=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),a.delete(e)},process:function(u){var s;if(i=!0,t=(s=[n,t])[0],(n=s[1]).length=0,r=t.length)for(var c=0;c<r;c++){var l=t[c];l(u),a.has(l)&&(o.schedule(l),e())}i=!1}};return o}((function(){return L_=!0})),e}),{}),U_=F_.reduce((function(e,t){var n=V_[t];return e[t]=function(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),L_||K_(),n.schedule(e,t,r)},e}),{}),B_=F_.reduce((function(e,t){return e[t]=V_[t].cancel,e}),{}),j_=F_.reduce((function(e,t){return e[t]=function(){return V_[t].process(M_)},e}),{}),z_=function(e){return V_[e].process(M_)},q_=function e(t){L_=!1,M_.delta=R_?D_:Math.max(Math.min(t-M_.timestamp,40),1),M_.timestamp=t,O_=!0,F_.forEach(z_),O_=!1,L_&&(R_=!1,P_(e))},K_=function(){L_=!0,R_=!0,O_||P_(q_)},G_=function(){return M_},H_=U_;function W_(e,t,n){return void 0===n&&(n=0),e-t-n}var Q_=function(e){var t=function(t){var n=t.delta;return e(n)};return{start:function(){return H_.update(t,!0)},stop:function(){return B_.update(t)}}};function X_(e){var t,n,r,i,a,o=e.from,u=e.autoplay,s=void 0===u||u,c=e.driver,l=void 0===c?Q_:c,f=e.elapsed,h=void 0===f?0:f,d=e.repeat,v=void 0===d?0:d,p=e.repeatType,y=void 0===p?"loop":p,m=e.repeatDelay,g=void 0===m?0:m,k=e.onPlay,b=e.onStop,w=e.onComplete,x=e.onRepeat,_=e.onUpdate,S=ob(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),E=S.to,T=0,I=S.duration,C=!1,A=!0,D=function(e){if(Array.isArray(e.to))return C_;if(A_[e.type])return A_[e.type];var t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?C_:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?Nx:C_}(S);(null===(n=(t=D).needsInterpolation)||void 0===n?void 0:n.call(t,o,E))&&(a=c_([0,100],[o,E],{clamp:!1}),o=0,E=100);var N=D(ab(ab({},S),{from:o,to:E}));function P(){T++,"reverse"===y?h=function(e,t,n,r){return void 0===n&&(n=0),void 0===r&&(r=!0),r?W_(t+-e,t,n):t-(e-t)+n}(h,I,g,A=T%2===0):(h=W_(h,I,g),"mirror"===y&&N.flipTarget()),C=!1,x&&x()}function R(e){if(A||(e=-e),h+=e,!C){var t=N.next(Math.max(0,h));i=t.value,a&&(i=a(i)),C=A?t.done:h<=0}null===_||void 0===_||_(i),C&&(0===T&&(null!==I&&void 0!==I||(I=h)),T<v?function(e,t,n,r){return r?e>=t+n:e<=-n}(h,I,g,A)&&P():(r.stop(),w&&w()))}return s&&(null===k||void 0===k||k(),(r=l(R)).start()),{stop:function(){null===b||void 0===b||b(),r.stop()}}}function $_(e,t){return t?e*(1e3/t):0}var Y_=function(e){return 1e3*e},J_=function(e,t){return 1-3*t+3*e},Z_=function(e,t){return 3*t-6*e},eS=function(e){return 3*e},tS=function(e,t,n){return((J_(t,n)*e+Z_(t,n))*e+eS(t))*e},nS=function(e,t,n){return 3*J_(t,n)*e*e+2*Z_(t,n)*e+eS(t)};var rS=.1;function iS(e,t,n,r){if(e===t&&n===r)return v_;for(var i=new Float32Array(11),a=0;a<11;++a)i[a]=tS(a*rS,e,n);function o(t){for(var r=0,a=1;10!==a&&i[a]<=t;++a)r+=rS;--a;var o=r+(t-i[a])/(i[a+1]-i[a])*rS,u=nS(o,e,n);return u>=.001?function(e,t,n,r){for(var i=0;i<8;++i){var a=nS(t,n,r);if(0===a)return t;t-=(tS(t,n,r)-e)/a}return t}(t,o,e,n):0===u?o:function(e,t,n,r,i){var a,o,u=0;do{(a=tS(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o}while(Math.abs(a)>1e-7&&++u<10);return o}(t,r,r+rS,e,n)}return function(e){return 0===e||1===e?e:tS(o(e),t,r)}}var aS={linear:v_,easeIn:p_,easeInOut:m_,easeOut:y_,circIn:g_,circInOut:b_,circOut:k_,backIn:w_,backInOut:__,backOut:x_,anticipate:S_,bounceIn:T_,bounceInOut:function(e){return e<.5?.5*(1-E_(1-2*e)):.5*E_(2*e-1)+.5},bounceOut:E_},oS=function(e){if(Array.isArray(e)){e.length;var t=ub(e,4);return iS(t[0],t[1],t[2],t[3])}return"string"===typeof e?aS[e]:e},uS=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!e_.test(t)||t.startsWith("url(")))},sS=function(){return{type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10}},cS=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restDelta:.01,restSpeed:10}},lS=function(){return{type:"keyframes",ease:"linear",duration:.3}},fS=function(e){return{type:"keyframes",duration:.8,values:e}},hS={x:sS,y:sS,z:sS,rotate:sS,rotateX:sS,rotateY:sS,rotateZ:sS,scaleX:cS,scaleY:cS,scale:cS,opacity:lS,backgroundColor:lS,color:lS,default:cS},dS=new Set(["brightness","contrast","saturate","opacity"]);function vS(e){var t=e.slice(0,-1).split("("),n=t[0],r=t[1];if("drop-shadow"===n)return e;var i=(r.match(tw)||[])[0];if(!i)return e;var a=r.replace(i,""),o=dS.has(n)?1:0;return i!==r&&(o*=100),n+"("+o+a+")"}var pS=/([a-z-]*)\(.*?\)/g,yS=ab(ab({},e_),{getAnimatableNone:function(e){var t=e.match(pS);return t?t.map(vS).join(" "):e}}),mS=ab(ab({},yw),{color:Wx,backgroundColor:Wx,outlineColor:Wx,fill:Wx,stroke:Wx,borderColor:Wx,borderTopColor:Wx,borderRightColor:Wx,borderBottomColor:Wx,borderLeftColor:Wx,filter:yS,WebkitFilter:yS}),gS=function(e){return mS[e]};function kS(e,t){var n,r=gS(e);return r!==yS&&(r=e_),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,t)}function bS(e){var t=e.ease,n=e.times,r=e.yoyo,i=e.flip,a=e.loop,o=ob(e,["ease","times","yoyo","flip","loop"]),u=ab({},o);return n&&(u.offset=n),o.duration&&(u.duration=Y_(o.duration)),o.repeatDelay&&(u.repeatDelay=Y_(o.repeatDelay)),t&&(u.ease=function(e){return Array.isArray(e)&&"number"!==typeof e[0]}(t)?t.map(oS):oS(t)),"tween"===o.type&&(u.type="keyframes"),(r||a||i)&&(!0,r?u.repeatType="reverse":a?u.repeatType="loop":i&&(u.repeatType="mirror"),u.repeat=a||r||i||o.repeat),"spring"!==o.type&&(u.type="keyframes"),u}function wS(e,t,n){var r;return Array.isArray(t.to)&&(null!==(r=e.duration)&&void 0!==r||(e.duration=.8)),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=sb([],ub(e.to)),e.to[0]=e.from)}(t),function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=ob(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(t).length}(e)||(e=ab(ab({},e),function(e,t){var n;return n=zw(t)?fS:hS[e]||hS.default,ab({to:t},n(t))}(n,t.to))),ab(ab({},t),bS(e))}function xS(e,t,n,r,i){var a,o=ES(r,e),u=null!==(a=o.from)&&void 0!==a?a:t.get(),s=uS(e,n);"none"===u&&s&&"string"===typeof n?u=kS(e,n):_S(u)&&"string"===typeof n?u=SS(n):!Array.isArray(n)&&_S(n)&&"string"===typeof u&&(n=SS(u));var c=uS(e,u);return c&&s&&!1!==o.type?function(){var r={from:u,to:n,velocity:t.getVelocity(),onComplete:i,onUpdate:function(e){return t.set(e)}};return"inertia"===o.type||"decay"===o.type?function(e){var t,n=e.from,r=void 0===n?0:n,i=e.velocity,a=void 0===i?0:i,o=e.min,u=e.max,s=e.power,c=void 0===s?.8:s,l=e.timeConstant,f=void 0===l?750:l,h=e.bounceStiffness,d=void 0===h?500:h,v=e.bounceDamping,p=void 0===v?10:v,y=e.restDelta,m=void 0===y?1:y,g=e.modifyTarget,k=e.driver,b=e.onUpdate,w=e.onComplete;function x(e){return void 0!==o&&e<o||void 0!==u&&e>u}function _(e){return void 0===o?u:void 0===u||Math.abs(o-e)<Math.abs(u-e)?o:u}function S(e){null===t||void 0===t||t.stop(),t=X_(ab(ab({},e),{driver:k,onUpdate:function(t){var n;null===b||void 0===b||b(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:w}))}function E(e){S(ab({type:"spring",stiffness:d,damping:p,restDelta:m},e))}if(x(r))E({from:r,velocity:a,to:_(r)});else{var T=c*a+r;"undefined"!==typeof g&&(T=g(T));var I,C,A=_(T),D=A===o?-1:1;S({type:"decay",from:r,velocity:a,timeConstant:f,power:c,restDelta:m,modifyTarget:g,onUpdate:x(T)?function(e){I=C,C=e,a=$_(e-I,G_().delta),(1===D&&e>A||-1===D&&e<A)&&E({from:e,to:A,velocity:a})}:void 0})}return{stop:function(){return null===t||void 0===t?void 0:t.stop()}}}(ab(ab({},r),o)):X_(ab(ab({},wS(o,r,e)),{onUpdate:function(e){var t;r.onUpdate(e),null===(t=o.onUpdate)||void 0===t||t.call(o,e)},onComplete:function(){var e;r.onComplete(),null===(e=o.onComplete)||void 0===e||e.call(o)}}))}:function(){var e;return t.set(n),i(),null===(e=null===o||void 0===o?void 0:o.onComplete)||void 0===e||e.call(o),{stop:function(){}}}}function _S(e){return 0===e||"string"===typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function SS(e){return"number"===typeof e?0:kS("",e)}function ES(e,t){return e[t]||e.default||e}function TS(e,t,n,r){return void 0===r&&(r={}),t.start((function(i){var a,o,u=xS(e,t,n,r,i),s=function(e,t){var n;return null!==(n=(ES(e,t)||{}).delay)&&void 0!==n?n:0}(r,e),c=function(){return o=u()};return s?a=setTimeout(c,Y_(s)):c(),function(){clearTimeout(a),null===o||void 0===o||o.stop()}}))}var IS=function(e){return/^\-?\d*\.?\d+$/.test(e)};function CS(e,t){-1===e.indexOf(t)&&e.push(t)}function AS(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var DS=function(){function e(){this.subscriptions=[]}return e.prototype.add=function(e){var t=this;return CS(this.subscriptions,e),function(){return AS(t.subscriptions,e)}},e.prototype.notify=function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var i=0;i<r;i++){var a=this.subscriptions[i];a&&a(e,t,n)}},e.prototype.getSize=function(){return this.subscriptions.length},e.prototype.clear=function(){this.subscriptions.length=0},e}(),NS=function(){function e(e){var t,n=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new DS,this.velocityUpdateSubscribers=new DS,this.renderSubscribers=new DS,this.canTrackVelocity=!1,this.updateAndNotify=function(e,t){void 0===t&&(t=!0),n.prev=n.current,n.current=e;var r=G_(),i=r.delta,a=r.timestamp;n.lastUpdated!==a&&(n.timeDelta=i,n.lastUpdated=a,H_.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.updateSubscribers.notify(n.current),n.velocityUpdateSubscribers.getSize()&&n.velocityUpdateSubscribers.notify(n.getVelocity()),t&&n.renderSubscribers.notify(n.current)},this.scheduleVelocityCheck=function(){return H_.postRender(n.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==n.lastUpdated&&(n.prev=n.current,n.velocityUpdateSubscribers.notify(n.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t)))}return e.prototype.onChange=function(e){return this.updateSubscribers.add(e)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},e.prototype.onRenderRequest=function(e){return e(this.get()),this.renderSubscribers.add(e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?$_(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e}();function PS(e){return new NS(e)}var RS=function(e){return function(t){return t.test(e)}},LS=[hw,sw,uw,ow,lw,cw,{test:function(e){return"auto"===e},parse:function(e){return e}}],OS=function(e){return LS.find(RS(e))},MS=sb(sb([],ub(LS)),[Wx,e_]),FS=function(e){return MS.find(RS(e))};function VS(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,PS(n))}function US(e,t){var n=Nb(e,t),r=n?e.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,a=void 0===i?{}:i;r.transition;var o=ob(r,["transitionEnd","transition"]);for(var u in o=ab(ab({},o),a)){VS(e,u,qw(o[u]))}}function BS(e,t){if(t)return(t[e]||t.default||t).from}function jS(e,t,n){var r;void 0===n&&(n={});var i=Nb(e,t,n.custom),a=(i||{}).transition,o=void 0===a?e.getDefaultTransition()||{}:a;n.transitionOverride&&(o=n.transitionOverride);var u=i?function(){return zS(e,i,n)}:function(){return Promise.resolve()},s=(null===(r=e.variantChildren)||void 0===r?void 0:r.size)?function(r){void 0===r&&(r=0);var i=o.delayChildren,a=void 0===i?0:i,u=o.staggerChildren,s=o.staggerDirection;return function(e,t,n,r,i,a){void 0===n&&(n=0);void 0===r&&(r=0);void 0===i&&(i=1);var o=[],u=(e.variantChildren.size-1)*r,s=1===i?function(e){return void 0===e&&(e=0),e*r}:function(e){return void 0===e&&(e=0),u-e*r};return Array.from(e.variantChildren).sort(qS).forEach((function(e,r){o.push(jS(e,t,ab(ab({},a),{delay:n+s(r)})).then((function(){return e.notifyAnimationComplete(t)})))})),Promise.all(o)}(e,t,a+r,u,s,n)}:function(){return Promise.resolve()},c=o.when;if(c){var l=ub("beforeChildren"===c?[u,s]:[s,u],2),f=l[0],h=l[1];return f().then(h)}return Promise.all([u(),s(n.delay)])}function zS(e,t,n){var r,i=void 0===n?{}:n,a=i.delay,o=void 0===a?0:a,u=i.transitionOverride,s=i.type,c=e.makeTargetAnimatable(t),l=c.transition,f=void 0===l?e.getDefaultTransition():l,h=c.transitionEnd,d=ob(c,["transition","transitionEnd"]);u&&(f=u);var v=[],p=s&&(null===(r=e.animationState)||void 0===r?void 0:r.getState()[s]);for(var y in d){var m=e.getValue(y),g=d[y];if(!(!m||void 0===g||p&&KS(p,y))){var k=TS(y,m,g,ab({delay:o},f));v.push(k)}}return Promise.all(v).then((function(){h&&US(e,h)}))}function qS(e,t){return e.sortNodePosition(t)}function KS(e,t){var n=e.protectedKeys,r=e.needsAnimating,i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}var GS=[Xw.Animate,Xw.Hover,Xw.Tap,Xw.Drag,Xw.Focus,Xw.Exit],HS=sb([],ub(GS)).reverse(),WS=GS.length;function QS(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return function(e,t,n){var r;if(void 0===n&&(n={}),e.notifyAnimationStart(),Array.isArray(t)){var i=t.map((function(t){return jS(e,t,n)}));r=Promise.all(i)}else if("string"===typeof t)r=jS(e,t,n);else{var a="function"===typeof t?Nb(e,t,n.custom):t;r=zS(e,a,n)}return r.then((function(){return e.notifyAnimationComplete(t)}))}(e,n,r)})))}}function XS(e){var t=QS(e),n=function(){var e;return(e={})[Xw.Animate]=$S(!0),e[Xw.Hover]=$S(),e[Xw.Tap]=$S(),e[Xw.Drag]=$S(),e[Xw.Focus]=$S(),e[Xw.Exit]=$S(),e}(),r={},i=!0,a=function(t,n){var r=Nb(e,n);if(r){r.transition;var i=r.transitionEnd,a=ob(r,["transition","transitionEnd"]);t=ab(ab(ab({},t),a),i)}return t};function o(o,u){for(var s,c=e.getProps(),l=e.getVariantContext(!0)||{},f=[],h=new Set,d={},v=1/0,p=function(t){var r=HS[t],p=n[r],y=null!==(s=c[r])&&void 0!==s?s:l[r],m=Ab(y),g=r===u?p.isActive:null;!1===g&&(v=t);var k=y===l[r]&&y!==c[r]&&m;if(k&&i&&e.manuallyAnimateOnMount&&(k=!1),p.protectedKeys=ab({},d),!p.isActive&&null===g||!y&&!p.prevProp||jw(y)||"boolean"===typeof y)return"continue";var b=function(e,t){if("string"===typeof t)return t!==e;if(Cb(t))return!_x(t,e);return!1}(p.prevProp,y)||r===u&&p.isActive&&!k&&m||t>v&&m,w=Array.isArray(y)?y:[y],x=w.reduce(a,{});!1===g&&(x={});var _=p.prevResolvedValues,S=void 0===_?{}:_,E=ab(ab({},S),x),T=function(e){b=!0,h.delete(e),p.needsAnimating[e]=!0};for(var I in E){var C=x[I],A=S[I];d.hasOwnProperty(I)||(C!==A?zw(C)&&zw(A)?_x(C,A)?p.protectedKeys[I]=!0:T(I):void 0!==C?T(I):h.add(I):void 0!==C&&h.has(I)?T(I):p.protectedKeys[I]=!0)}p.prevProp=y,p.prevResolvedValues=x,p.isActive&&(d=ab(ab({},d),x)),i&&e.blockInitialAnimation&&(b=!1),b&&!k&&f.push.apply(f,sb([],ub(w.map((function(e){return{animation:e,options:ab({type:r},o)}})))))},y=0;y<WS;y++)p(y);if(r=ab({},d),h.size){var m={};h.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(m[t]=n)})),f.push({animation:m})}var g=Boolean(f.length);return i&&!1===c.initial&&!e.manuallyAnimateOnMount&&(g=!1),i=!1,g?t(f):Promise.resolve()}return{isAnimated:function(e){return void 0!==r[e]},animateChanges:o,setActive:function(t,r,i){var a;return n[t].isActive===r?Promise.resolve():(null===(a=e.variantChildren)||void 0===a||a.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r,o(i,t))},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function $S(e){return void 0===e&&(e=!1),{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var YS={animation:wx((function(e){var n=e.visualElement,r=e.animate;n.animationState||(n.animationState=XS(n)),jw(r)&&(0,t.useEffect)((function(){return r.subscribe(n)}),[r])})),exit:wx((function(e){var n=e.custom,r=e.visualElement,i=ub(gb(),2),a=i[0],o=i[1],u=(0,t.useContext)(yb);(0,t.useEffect)((function(){var e,t,i=null===(e=r.animationState)||void 0===e?void 0:e.setActive(Xw.Exit,!a,{custom:null!==(t=null===u||void 0===u?void 0:u.custom)&&void 0!==t?t:n});!a&&(null===i||void 0===i||i.then(o))}),[a])}))},JS=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},ZS=function(e){return JS(e)&&e.hasOwnProperty("z")},eE=function(e,t){return Math.abs(e-t)};function tE(e,t){if(t_(e)&&t_(t))return eE(e,t);if(JS(e)&&JS(t)){var n=eE(e.x,t.x),r=eE(e.y,t.y),i=ZS(e)&&ZS(t)?eE(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}}var nE=function(){function e(e,t,n){var r=this,i=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=aE(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=tE(e.offset,{x:0,y:0})>=3;if(t||n){var i=e.point,a=G_().timestamp;r.history.push(ab(ab({},i),{timestamp:a}));var o=r.handlers,u=o.onStart,s=o.onMove;t||(u&&u(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),s&&s(r.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=rE(t,r.transformPagePoint),Zw(e)&&0===e.buttons?r.handlePointerUp(e,t):H_.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){r.end();var n=r.handlers,i=n.onEnd,a=n.onSessionEnd,o=aE(rE(t,r.transformPagePoint),r.history);r.startEvent&&i&&i(e,o),a&&a(e,o)},!(ex(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=i;var a=rE(ix(e),this.transformPagePoint),o=a.point,u=G_().timestamp;this.history=[ab(ab({},o),{timestamp:u})];var s=t.onSessionStart;s&&s(e,aE(a,this.history)),this.removeListeners=bx(cx(window,"pointermove",this.handlePointerMove),cx(window,"pointerup",this.handlePointerUp),cx(window,"pointercancel",this.handlePointerUp))}}return e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),B_.update(this.updatePoint)},e}();function rE(e,t){return t?{point:t(e.point)}:e}function iE(e,t){return{x:e.x-t.x,y:e.y-t.y}}function aE(e,t){var n=e.point;return{point:n,delta:iE(n,uE(t)),offset:iE(n,oE(t)),velocity:sE(t,.1)}}function oE(e){return e[0]}function uE(e){return e[e.length-1]}function sE(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=uE(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Y_(t)));)n--;if(!r)return{x:0,y:0};var a=(i.timestamp-r.timestamp)/1e3;if(0===a)return{x:0,y:0};var o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function cE(e){return e}function lE(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}var fE={translate:0,scale:1,origin:0,originPoint:0};function hE(){return{x:ab({},fE),y:ab({},fE)}}function dE(e){return[e("x"),e("y")]}function vE(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?Lx(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?Lx(i,e,n.max):Math.min(e,i)),e}function pE(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function yE(e,t){var n,r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&(r=(n=ub([i,r],2))[0],i=n[1]),{min:e.min+r,max:e.min+i}}function mE(e,t,n){return{min:gE(e,t),max:gE(e,n)}}function gE(e,t){var n;return"number"===typeof e?e:null!==(n=e[t])&&void 0!==n?n:0}function kE(e,t){return lE(function(e,t){var n=e.top,r=e.left,i=e.bottom,a=e.right;void 0===t&&(t=cE);var o=t({x:r,y:n}),u=t({x:a,y:i});return{top:o.y,left:o.x,bottom:u.y,right:u.x}}(e.getBoundingClientRect(),t))}function bE(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=.01),tE(e,t)<n}function wE(e){return e.max-e.min}function xE(e,t){var n=.5,r=wE(e),i=wE(t);return i>r?n=Rx(t.min,t.max-r,e.min):r>i&&(n=Rx(e.min,e.max-i,t.min)),function(e){return Sx(0,1,e)}(n)}function _E(e,t,n,r){void 0===r&&(r=.5),e.origin=r,e.originPoint=Lx(t.min,t.max,e.origin),e.scale=wE(n)/wE(t),bE(e.scale,1,1e-4)&&(e.scale=1),e.translate=Lx(n.min,n.max,e.origin)-e.originPoint,bE(e.translate)&&(e.translate=0)}function SE(e,t,n,r){_E(e.x,t.x,n.x,EE(r.originX)),_E(e.y,t.y,n.y,EE(r.originY))}function EE(e){return"number"===typeof e?e:.5}function TE(e,t,n){e.min=n.min+t.min,e.max=e.min+wE(t)}var IE=function(e,t){return e.depth-t.depth};function CE(e){return e.projection.isEnabled||e.shouldResetTransform()}function AE(e,t){void 0===t&&(t=[]);var n=e.parent;return n&&AE(n,t),CE(e)&&t.push(e),t}function DE(e){if(!e.shouldResetTransform()){var t,n=e.getLayoutState();e.notifyBeforeLayoutMeasure(n.layout),n.isHydrated=!0,n.layout=e.measureViewportBox(),n.layoutCorrected=(t=n.layout,{x:ab({},t.x),y:ab({},t.y)}),e.notifyLayoutMeasure(n.layout,e.prevViewportBox||n.layout),H_.update((function(){return e.rebaseProjectionTarget()}))}}function NE(e,t){return{min:t.min-e.min,max:t.max-e.min}}function PE(e,t){return{x:NE(e.x,t.x),y:NE(e.y,t.y)}}function RE(e,t){var n=e.getLayoutId(),r=t.getLayoutId();return n!==r||void 0===r&&e!==t}function LE(e){var t=e.getProps(),n=t.drag,r=t._dragX;return n&&!r}function OE(e,t){e.min=t.min,e.max=t.max}function ME(e,t,n){return n+t*(e-n)}function FE(e,t,n,r,i){return void 0!==i&&(e=ME(e,i,r)),ME(e,n,r)+t}function VE(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),e.min=FE(e.min,t,n,r,i),e.max=FE(e.max,t,n,r,i)}function UE(e,t){var n=t.x,r=t.y;VE(e.x,n.translate,n.scale,n.originPoint),VE(e.y,r.translate,r.scale,r.originPoint)}function BE(e,t,n,r){var i=ub(r,3),a=i[0],o=i[1],u=i[2];e.min=t.min,e.max=t.max;var s=void 0!==n[u]?n[u]:.5,c=Lx(t.min,t.max,s);VE(e,n[a],n[o],c,n.scale)}var jE=["x","scaleX","originX"],zE=["y","scaleY","originY"];function qE(e,t,n){BE(e.x,t.x,n,jE),BE(e.y,t.y,n,zE)}function KE(e,t,n,r,i){return e=ME(e-=t,1/n,r),void 0!==i&&(e=ME(e,1/i,r)),e}function GE(e,t,n){var r=ub(n,3),i=r[0],a=r[1],o=r[2];!function(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=.5);var a=Lx(e.min,e.max,r)-t;e.min=KE(e.min,t,n,a,i),e.max=KE(e.max,t,n,a,i)}(e,t[i],t[a],t[o],t.scale)}function HE(e,t){GE(e.x,t,jE),GE(e.y,t,zE)}var WE=new Set;function QE(e,t,n){e[n]||(e[n]=[]),e[n].push(t)}function XE(e){return WE.add(e),function(){return WE.delete(e)}}function $E(){if(WE.size){var e=0,t=[[]],n=[],r=function(n){return QE(t,n,e)},i=function(t){QE(n,t,e),e++};WE.forEach((function(t){t(r,i),e=0})),WE.clear();for(var a=n.length,o=0;o<=a;o++)t[o]&&t[o].forEach(JE),n[o]&&n[o].forEach(JE)}}var YE,JE=function(e){return e()},ZE=new WeakMap,eT=function(){function e(e){var t=e.visualElement;this.isDragging=!1,this.currentDirection=null,this.constraints=!1,this.elastic={x:{min:0,max:1},y:{min:0,max:1}},this.props={},this.hasMutatedConstraints=!1,this.cursorProgress={x:.5,y:.5},this.originPoint={},this.openGlobalLock=null,this.panSession=null,this.visualElement=t,this.visualElement.enableLayoutProjection(),ZE.set(t,this)}return e.prototype.start=function(e,t){var n=this,r=void 0===t?{}:t,i=r.snapToCursor,a=void 0!==i&&i,o=r.cursorProgress,u=this.props.transformPagePoint;this.panSession=new nE(e,{onSessionStart:function(e){var t;n.stopMotion();var r=function(e){return ix(e,"client")}(e).point;null===(t=n.cancelLayout)||void 0===t||t.call(n),n.cancelLayout=XE((function(e,t){var i=AE(n.visualElement),u=function(e){var t=[];return e.children.forEach((function e(n){CE(n)&&t.push(n),n.children.forEach(e)})),t.sort(IE)}(n.visualElement),s=sb(sb([],ub(i)),ub(u)),c=!1;n.isLayoutDrag()&&n.visualElement.lockProjectionTarget(),t((function(){s.forEach((function(e){return e.resetTransform()}))})),e((function(){DE(n.visualElement),u.forEach(DE)})),t((function(){s.forEach((function(e){return e.restoreTransform()})),a&&(c=n.snapToCursor(r))})),e((function(){Boolean(n.getAxisMotionValue("x")&&!n.isExternalDrag())||n.visualElement.rebaseProjectionTarget(!0,n.visualElement.measureViewportBox(!1)),n.visualElement.scheduleUpdateLayoutProjection();var e=n.visualElement.projection;dE((function(t){if(!c){var i=e.target[t],a=i.min,u=i.max;n.cursorProgress[t]=o?o[t]:Rx(a,u,r[t])}var s=n.getAxisMotionValue(t);s&&(n.originPoint[t]=s.get())}))})),t((function(){j_.update(),j_.preRender(),j_.render(),j_.postRender()})),e((function(){return n.resolveDragConstraints()}))}))},onStart:function(e,t){var r,i,a,o=n.props,u=o.drag,s=o.dragPropagation;(!u||s||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=vx(u),n.openGlobalLock))&&($E(),n.isDragging=!0,n.currentDirection=null,null===(i=(r=n.props).onDragStart)||void 0===i||i.call(r,e,t),null===(a=n.visualElement.animationState)||void 0===a||a.setActive(Xw.Drag,!0))},onMove:function(e,t){var r,i,a,o,u=n.props,s=u.dragPropagation,c=u.dragDirectionLock;if(s||n.openGlobalLock){var l=t.offset;if(c&&null===n.currentDirection)return n.currentDirection=function(e,t){void 0===t&&(t=10);var n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(l),void(null!==n.currentDirection&&(null===(i=(r=n.props).onDirectionLock)||void 0===i||i.call(r,n.currentDirection)));n.updateAxis("x",t.point,l),n.updateAxis("y",t.point,l),null===(o=(a=n.props).onDrag)||void 0===o||o.call(a,e,t),YE=e}},onSessionEnd:function(e,t){return n.stop(e,t)}},{transformPagePoint:u})},e.prototype.resolveDragConstraints=function(){var e=this,t=this.props,n=t.dragConstraints,r=t.dragElastic,i=this.visualElement.getLayoutState().layoutCorrected;this.constraints=!!n&&(Ib(n)?this.resolveRefConstraints(i,n):function(e,t){var n=t.top,r=t.left,i=t.bottom,a=t.right;return{x:pE(e.x,r,a),y:pE(e.y,n,i)}}(i,n)),this.elastic=function(e){return!1===e?e=0:!0===e&&(e=.35),{x:mE(e,"left","right"),y:mE(e,"top","bottom")}}(r),this.constraints&&!this.hasMutatedConstraints&&dE((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i[t],e.constraints[t]))}))},e.prototype.resolveRefConstraints=function(e,t){var n=this.props,r=n.onMeasureDragConstraints,i=n.transformPagePoint,a=t.current;this.constraintsBox=kE(a,i);var o=function(e,t){return{x:yE(e.x,t.x),y:yE(e.y,t.y)}}(e,this.constraintsBox);if(r){var u=r(function(e){var t=e.x,n=e.y;return{top:n.min,bottom:n.max,left:t.min,right:t.max}}(o));this.hasMutatedConstraints=!!u,u&&(o=lE(u))}return o},e.prototype.cancelDrag=function(){var e,t;this.visualElement.unlockProjectionTarget(),null===(e=this.cancelLayout)||void 0===e||e.call(this),this.isDragging=!1,this.panSession&&this.panSession.end(),this.panSession=null,!this.props.dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(Xw.Drag,!1)},e.prototype.stop=function(e,t){var n,r,i;null===(n=this.panSession)||void 0===n||n.end(),this.panSession=null;var a=this.isDragging;if(this.cancelDrag(),a){var o=t.velocity;this.animateDragEnd(o),null===(i=(r=this.props).onDragEnd)||void 0===i||i.call(r,e,t)}},e.prototype.snapToCursor=function(e){var t=this;return dE((function(n){if(tT(n,t.props.drag,t.currentDirection)){var r=t.getAxisMotionValue(n);if(!r)return t.cursorProgress[n]=.5,!0;var i=t.visualElement.getLayoutState().layout,a=i[n].max-i[n].min,o=i[n].min+a/2,u=e[n]-o;t.originPoint[n]=e[n],r.set(u)}})).includes(!0)},e.prototype.updateAxis=function(e,t,n){if(tT(e,this.props.drag,this.currentDirection))return this.getAxisMotionValue(e)?this.updateAxisMotionValue(e,n):this.updateVisualElementAxis(e,t)},e.prototype.updateAxisMotionValue=function(e,t){var n=this.getAxisMotionValue(e);if(t&&n){var r=this.originPoint[e]+t[e],i=this.constraints?vE(r,this.constraints[e],this.elastic[e]):r;n.set(i)}},e.prototype.updateVisualElementAxis=function(e,t){var n,r=this.visualElement.getLayoutState().layout[e],i=r.max-r.min,a=this.cursorProgress[e],o=function(e,t,n,r,i){var a=e-t*n;return r?vE(a,r,i):a}(t[e],i,a,null===(n=this.constraints)||void 0===n?void 0:n[e],this.elastic[e]);this.visualElement.setProjectionTargetAxis(e,o,o+i)},e.prototype.setProps=function(e){var t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,i=void 0!==r&&r,a=e.dragPropagation,o=void 0!==a&&a,u=e.dragConstraints,s=void 0!==u&&u,c=e.dragElastic,l=void 0===c?.35:c,f=e.dragMomentum,h=void 0===f||f,d=ob(e,["drag","dragDirectionLock","dragPropagation","dragConstraints","dragElastic","dragMomentum"]);this.props=ab({drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:s,dragElastic:l,dragMomentum:h},d)},e.prototype.getAxisMotionValue=function(e){var t=this.props,n=t.layout,r=t.layoutId,i="_drag"+e.toUpperCase();return this.props[i]?this.props[i]:n||void 0!==r?void 0:this.visualElement.getValue(e,0)},e.prototype.isLayoutDrag=function(){return!this.getAxisMotionValue("x")},e.prototype.isExternalDrag=function(){var e=this.props,t=e._dragX,n=e._dragY;return t||n},e.prototype.animateDragEnd=function(e){var t=this,n=this.props,r=n.drag,i=n.dragMomentum,a=n.dragElastic,o=n.dragTransition,u=function(e,t){void 0===t&&(t=!0);var n,r=e.getProjectionParent();return!!r&&(t?HE(n=PE(r.projection.target,e.projection.target),r.getLatestValues()):n=PE(r.getLayoutState().layout,e.getLayoutState().layout),dE((function(t){return e.setProjectionTargetAxis(t,n[t].min,n[t].max,!0)})),!0)}(this.visualElement,this.isLayoutDrag()&&!this.isExternalDrag()),s=this.constraints||{};if(u&&Object.keys(s).length&&this.isLayoutDrag()){var c=this.visualElement.getProjectionParent();if(c){var l=PE(c.projection.targetFinal,s);dE((function(e){var t=l[e],n=t.min,r=t.max;s[e]={min:isNaN(n)?void 0:n,max:isNaN(r)?void 0:r}}))}}var f=dE((function(n){var c;if(tT(n,r,t.currentDirection)){var l=null!==(c=null===s||void 0===s?void 0:s[n])&&void 0!==c?c:{},f=a?200:1e6,h=a?40:1e7,d=ab(ab({type:"inertia",velocity:i?e[n]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10},o),l);return t.getAxisMotionValue(n)?t.startAxisValueAnimation(n,d):t.visualElement.startLayoutAnimation(n,d,u)}}));return Promise.all(f).then((function(){var e,n;null===(n=(e=t.props).onDragTransitionEnd)||void 0===n||n.call(e)}))},e.prototype.stopMotion=function(){var e=this;dE((function(t){var n=e.getAxisMotionValue(t);n?n.stop():e.visualElement.stopLayoutAnimation()}))},e.prototype.startAxisValueAnimation=function(e,t){var n=this.getAxisMotionValue(e);if(n){var r=n.get();return n.set(r),n.set(r),TS(e,n,0,t)}},e.prototype.scalePoint=function(){var e=this,t=this.props,n=t.drag;if(Ib(t.dragConstraints)&&this.constraintsBox){this.stopMotion();var r={x:0,y:0};dE((function(t){r[t]=xE(e.visualElement.projection.target[t],e.constraintsBox[t])})),this.updateConstraints((function(){dE((function(t){if(tT(t,n,null)){var i=function(e,t,n){var r=e.max-e.min,i=Lx(t.min,t.max-r,n);return{min:i,max:i+r}}(e.visualElement.projection.target[t],e.constraintsBox[t],r[t]),a=i.min,o=i.max;e.visualElement.setProjectionTargetAxis(t,a,o)}}))})),setTimeout($E,1)}},e.prototype.updateConstraints=function(e){var t=this;this.cancelLayout=XE((function(n,r){var i=AE(t.visualElement);r((function(){return i.forEach((function(e){return e.resetTransform()}))})),n((function(){return DE(t.visualElement)})),r((function(){return i.forEach((function(e){return e.restoreTransform()}))})),n((function(){t.resolveDragConstraints()})),e&&r(e)}))},e.prototype.mount=function(e){var t=this,n=cx(e.getInstance(),"pointerdown",(function(e){var n=t.props,r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&t.start(e)})),r=Yw(window,"resize",(function(){t.scalePoint()})),i=e.onLayoutUpdate((function(){t.isDragging&&t.resolveDragConstraints()})),a=e.prevDragCursor;return a&&this.start(YE,{cursorProgress:a}),function(){null===n||void 0===n||n(),null===r||void 0===r||r(),null===i||void 0===i||i(),t.cancelDrag()}},e}();function tT(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var nT,rT,iT={pan:wx((function(e){var n=e.onPan,r=e.onPanStart,i=e.onPanEnd,a=e.onPanSessionStart,o=e.visualElement,u=n||r||i||a,s=(0,t.useRef)(null),c=(0,t.useContext)(vb).transformPagePoint,l={onSessionStart:a,onStart:r,onMove:n,onEnd:function(e,t){s.current=null,i&&i(e,t)}};(0,t.useEffect)((function(){null!==s.current&&s.current.updateHandlers(l)})),lx(o,"pointerdown",u&&function(e){s.current=new nE(e,l,{transformPagePoint:c})}),gx((function(){return s.current&&s.current.end()}))})),drag:wx((function(e){var n=e.dragControls,r=e.visualElement,i=(0,t.useContext)(vb).transformPagePoint,a=mb((function(){return new eT({visualElement:r})}));a.setProps(ab(ab({},e),{transformPagePoint:i})),(0,t.useEffect)((function(){return n&&n.subscribe(a)}),[a]),(0,t.useEffect)((function(){return a.mount(r)}),[])}))};function aT(e){return"string"===typeof e&&e.startsWith("var(--")}!function(e){e[e.Entering=0]="Entering",e[e.Present=1]="Present",e[e.Exiting=2]="Exiting"}(nT||(nT={})),function(e){e[e.Hide=0]="Hide",e[e.Show=1]="Show"}(rT||(rT={}));var oT=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function uT(e,t,n){void 0===n&&(n=1);var r=ub(function(e){var t=oT.exec(e);if(!t)return[,];var n=ub(t,3);return[n[1],n[2]]}(e),2),i=r[0],a=r[1];if(i){var o=window.getComputedStyle(t).getPropertyValue(i);return o?o.trim():aT(a)?uT(a,t,n+1):a}}function sT(e,t){return e/(t.max-t.min)*100}var cT="_$css";var lT={process:function(e,t,n){var r=n.target;if("string"===typeof e){if(!sw.test(e))return e;e=parseFloat(e)}return sT(e,r.x)+"% "+sT(e,r.y)+"%"}},fT={borderRadius:ab(ab({},lT),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:lT,borderTopRightRadius:lT,borderBottomLeftRadius:lT,borderBottomRightRadius:lT,boxShadow:{process:function(e,t){var n=t.delta,r=t.treeScale,i=e,a=e.includes("var("),o=[];a&&(e=e.replace(oT,(function(e){return o.push(e),cT})));var u=e_.parse(e);if(u.length>5)return i;var s=e_.createTransformer(e),c="number"!==typeof u[0]?1:0,l=n.x.scale*r.x,f=n.y.scale*r.y;u[0+c]/=l,u[1+c]/=f;var h=Lx(l,f,.5);"number"===typeof u[2+c]&&(u[2+c]/=h),"number"===typeof u[3+c]&&(u[3+c]/=h);var d=s(u);if(a){var v=0;d=d.replace(cT,(function(){var e=o[v];return v++,e}))}return d}}},hT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frameTarget={x:{min:0,max:1},y:{min:0,max:1}},t.currentAnimationTarget={x:{min:0,max:1},y:{min:0,max:1}},t.isAnimating={x:!1,y:!1},t.stopAxisAnimation={x:void 0,y:void 0},t.isAnimatingTree=!1,t.animate=function(e,n,r){void 0===r&&(r={});var i=r.originBox,a=r.targetBox,o=r.visibilityAction,u=r.shouldStackAnimate,s=r.onComplete,c=r.prevParent,l=ob(r,["originBox","targetBox","visibilityAction","shouldStackAnimate","onComplete","prevParent"]),f=t.props,h=f.visualElement,d=f.layout;if(!1===u)return t.isAnimatingTree=!1,t.safeToRemove();if(!t.isAnimatingTree||!0===u){u&&(t.isAnimatingTree=!0),n=i||n,e=a||e;var v=!1,p=h.getProjectionParent();if(p){var y=p.prevViewportBox,m=p.getLayoutState().layout;c&&(a&&(m=c.getLayoutState().layout),i&&!RE(c,p)&&c.prevViewportBox&&(y=c.prevViewportBox)),y&&gT(c,i,a)&&(v=!0,n=PE(y,n),e=PE(m,e))}var g=dT(n,e),k=dE((function(r){var i,a;if("position"===d){var u=e[r].max-e[r].min;n[r].max=n[r].min+u}if(!h.projection.isTargetLocked)return void 0===o?g?t.animateAxis(r,e[r],n[r],ab(ab({},l),{isRelative:v})):(null===(a=(i=t.stopAxisAnimation)[r])||void 0===a||a.call(i),h.setProjectionTargetAxis(r,e[r].min,e[r].max,v)):void h.setVisibility(o===rT.Show)}));return h.syncRender(),Promise.all(k).then((function(){t.isAnimatingTree=!1,s&&s(),h.notifyLayoutAnimationComplete()}))}},t}return ib(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.visualElement;t.animateMotionValue=TS,t.enableLayoutProjection(),this.unsubLayoutReady=t.onLayoutUpdate(this.animate),t.layoutSafeToRemove=function(){return e.safeToRemove()},function(e){for(var t in e)Bb[t]=e[t]}(fT)},t.prototype.componentWillUnmount=function(){var e=this;this.unsubLayoutReady(),dE((function(t){var n,r;return null===(r=(n=e.stopAxisAnimation)[t])||void 0===r?void 0:r.call(n)}))},t.prototype.animateAxis=function(e,t,n,r){var i,a,o=this,u=void 0===r?{}:r,s=u.transition,c=u.isRelative;if(!this.isAnimating[e]||!yT(t,this.currentAnimationTarget[e])){null===(a=(i=this.stopAxisAnimation)[e])||void 0===a||a.call(i),this.isAnimating[e]=!0;var l=this.props.visualElement,f=this.frameTarget[e],h=l.getProjectionAnimationProgress()[e];h.clearListeners(),h.set(0),h.set(0);var d=function(){var r=h.get()/1e3;!function(e,t,n,r){e.min=Lx(t.min,n.min,r),e.max=Lx(t.max,n.max,r)}(f,n,t,r),l.setProjectionTargetAxis(e,f.min,f.max,c)};d();var v=h.onChange(d);this.stopAxisAnimation[e]=function(){o.isAnimating[e]=!1,h.stop(),v()},this.currentAnimationTarget[e]=t;var p=s||l.getDefaultTransition()||mT;return TS("x"===e?"layoutX":"layoutY",h,1e3,p&&ES(p,"layout")).then(this.stopAxisAnimation[e])}},t.prototype.safeToRemove=function(){var e,t;null===(t=(e=this.props).safeToRemove)||void 0===t||t.call(e)},t.prototype.render=function(){return null},t}(t.Component);function dT(e,t){return!pT(e)&&!pT(t)&&(!yT(e.x,t.x)||!yT(e.y,t.y))}var vT={min:0,max:0};function pT(e){return yT(e.x,vT)&&yT(e.y,vT)}function yT(e,t){return e.min===t.min&&e.max===t.max}var mT={duration:.45,ease:[.4,0,.1,1]};function gT(e,t,n){return e||!e&&!(t||n)}var kT={layoutReady:function(e){return e.notifyLayoutReady()}};function bT(){var e=new Set;return{add:function(t){return e.add(t)},flush:function(t){var n=void 0===t?kT:t,r=n.layoutReady,i=n.parent;XE((function(t,n){var a=Array.from(e).sort(IE),o=i?AE(i):[];n((function(){sb(sb([],ub(o)),ub(a)).forEach((function(e){return e.resetTransform()}))})),t((function(){a.forEach(DE)})),n((function(){o.forEach((function(e){return e.restoreTransform()})),a.forEach(r)})),t((function(){a.forEach((function(e){e.isPresent&&(e.presence=nT.Present)}))})),n((function(){j_.preRender(),j_.render()})),t((function(){H_.postRender((function(){return a.forEach(wT)})),e.clear()}))})),$E()}}}function wT(e){e.prevViewportBox=e.projection.target}var xT=(0,t.createContext)(bT()),_T=(0,t.createContext)(bT());function ST(e){return!!e.forceUpdate}var ET=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ib(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.syncLayout,n=e.framerSyncLayout,r=e.visualElement;ST(t)&&t.register(r),ST(n)&&n.register(r),r.onUnmount((function(){ST(t)&&t.remove(r),ST(n)&&n.remove(r)}))},t.prototype.getSnapshotBeforeUpdate=function(){var e=this.props,t=e.syncLayout,n=e.visualElement;return ST(t)?t.syncUpdate():(!function(e){e.shouldResetTransform()||(e.prevViewportBox=e.measureViewportBox(!1),e.rebaseProjectionTarget(!1,e.prevViewportBox))}(n),t.add(n)),null},t.prototype.componentDidUpdate=function(){var e=this.props.syncLayout;ST(e)||e.flush()},t.prototype.render=function(){return null},t}(t.Component);var TT={measureLayout:function(e){var n=(0,t.useContext)(xT),r=(0,t.useContext)(_T);return t.createElement(ET,ab({},e,{syncLayout:n,framerSyncLayout:r}))},layoutAnimation:function(e){var n=ub(gb(),2)[1];return t.createElement(hT,ab({},e,{safeToRemove:n}))}};function IT(){return{isHydrated:!1,layout:{x:{min:0,max:1},y:{min:0,max:1}},layoutCorrected:{x:{min:0,max:1},y:{min:0,max:1}},treeScale:{x:1,y:1},delta:hE(),deltaFinal:hE(),deltaTransform:""}}var CT=IT();function AT(e,t,n){var r=e.x,i=e.y,a="translate3d("+r.translate/t.x+"px, "+i.translate/t.y+"px, 0) ";if(n){var o=n.rotate,u=n.rotateX,s=n.rotateY;o&&(a+="rotate("+o+") "),u&&(a+="rotateX("+u+") "),s&&(a+="rotateY("+s+") ")}return a+="scale("+r.scale+", "+i.scale+")",n||a!==NT?a:""}function DT(e){var t=e.deltaFinal;return 100*t.x.origin+"% "+100*t.y.origin+"% 0"}var NT=AT(CT.delta,CT.treeScale,{x:1,y:1}),PT=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","SetAxisTarget","Unmount"];function RT(e,t,n,r){var i,a,o=e.delta,u=e.layout,s=e.layoutCorrected,c=e.treeScale,l=t.target;a=u,OE((i=s).x,a.x),OE(i.y,a.y),function(e,t,n){var r=n.length;if(r){var i,a;t.x=t.y=1;for(var o=0;o<r;o++)a=(i=n[o]).getLayoutState().delta,t.x*=a.x.scale,t.y*=a.y.scale,UE(e,a),LE(i)&&qE(e,e,i.getLatestValues())}}(s,c,n),SE(o,s,l,r)}var LT=function(){function e(){this.children=[],this.isDirty=!1}return e.prototype.add=function(e){CS(this.children,e),this.isDirty=!0},e.prototype.remove=function(e){AS(this.children,e),this.isDirty=!0},e.prototype.forEach=function(e){this.isDirty&&this.children.sort(IE),this.isDirty=!1,this.children.forEach(e)},e}();var OT=function(e){var t=e.treeType,n=void 0===t?"":t,r=e.build,i=e.getBaseTarget,a=e.makeTargetAnimatable,o=e.measureViewportBox,u=e.render,s=e.readValueFromInstance,c=e.resetTransform,l=e.restoreTransform,f=e.removeValueFromRenderState,h=e.sortNodePosition,d=e.scrapeMotionValuesFromProps;return function(e,t){var v=e.parent,p=e.props,y=e.presenceId,m=e.blockInitialAnimation,g=e.visualState;void 0===t&&(t={});var k,b,w,x,_,S,E=g.latestValues,T=g.renderState,I=function(){var e=PT.map((function(){return new DS})),t={},n={clearAllListeners:function(){return e.forEach((function(e){return e.clear()}))},updatePropListeners:function(e){return PT.forEach((function(r){var i;null===(i=t[r])||void 0===i||i.call(t);var a="on"+r,o=e[a];o&&(t[r]=n[a](o))}))}};return e.forEach((function(e,t){n["on"+PT[t]]=function(t){return e.add(t)},n["notify"+PT[t]]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.notify.apply(e,sb([],ub(t)))}})),n}(),C={isEnabled:!1,isHydrated:!1,isTargetLocked:!1,target:{x:{min:0,max:1},y:{min:0,max:1}},targetFinal:{x:{min:0,max:1},y:{min:0,max:1}}},A=C,D=E,N=IT(),P=!1,R=new Map,L=new Map,O={},M=ab({},E);function F(){k&&(H.isProjectionReady()&&(qE(A.targetFinal,A.target,D),SE(N.deltaFinal,N.layoutCorrected,A.targetFinal,E)),V(),u(k,T))}function V(){var e=E;if(x&&x.isActive()){var n=x.getCrossfadeState(H);n&&(e=n)}r(H,T,e,A,N,t,p)}function U(){I.notifyUpdate(E)}function B(){H.layoutTree.forEach(FT)}var j=d(p);for(var z in j){var q=j[z];void 0!==E[z]&&Xb(q)&&q.set(E[z],!1)}var K=Pb(p),G=Rb(p),H=ab(ab({treeType:n,current:null,depth:v?v.depth+1:0,parent:v,children:new Set,path:v?sb(sb([],ub(v.path)),[v]):[],layoutTree:v?v.layoutTree:new LT,presenceId:y,projection:C,variantChildren:G?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null===v||void 0===v?void 0:v.isMounted()),blockInitialAnimation:m,isMounted:function(){return Boolean(k)},mount:function(e){k=H.current=e,H.pointTo(H),G&&v&&!K&&(S=null===v||void 0===v?void 0:v.addVariantChild(H)),null===v||void 0===v||v.children.add(H)},unmount:function(){B_.update(U),B_.render(F),B_.preRender(H.updateLayoutProjection),L.forEach((function(e){return e()})),H.stopLayoutAnimation(),H.layoutTree.remove(H),null===S||void 0===S||S(),null===v||void 0===v||v.children.delete(H),null===w||void 0===w||w(),I.clearAllListeners()},addVariantChild:function(e){var t,n=H.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),function(){return n.variantChildren.delete(e)}},sortNodePosition:function(e){return h&&n===e.treeType?h(H.getInstance(),e.getInstance()):0},getClosestVariantNode:function(){return G?H:null===v||void 0===v?void 0:v.getClosestVariantNode()},scheduleUpdateLayoutProjection:v?v.scheduleUpdateLayoutProjection:function(){return H_.preRender(H.updateTreeLayoutProjection,!1,!0)},getLayoutId:function(){return p.layoutId},getInstance:function(){return k},getStaticValue:function(e){return E[e]},setStaticValue:function(e,t){return E[e]=t},getLatestValues:function(){return E},setVisibility:function(e){H.isVisible!==e&&(H.isVisible=e,H.scheduleRender())},makeTargetAnimatable:function(e,t){return void 0===t&&(t=!0),a(H,e,p,t)},addValue:function(e,t){H.hasValue(e)&&H.removeValue(e),R.set(e,t),E[e]=t.get(),function(e,t){var n=t.onChange((function(t){E[e]=t,p.onUpdate&&H_.update(U,!1,!0)})),r=t.onRenderRequest(H.scheduleRender);L.set(e,(function(){n(),r()}))}(e,t)},removeValue:function(e){var t;R.delete(e),null===(t=L.get(e))||void 0===t||t(),L.delete(e),delete E[e],f(e,T)},hasValue:function(e){return R.has(e)},getValue:function(e,t){var n=R.get(e);return void 0===n&&void 0!==t&&(n=PS(t),H.addValue(e,n)),n},forEachValue:function(e){return R.forEach(e)},readValue:function(e){var n;return null!==(n=E[e])&&void 0!==n?n:s(k,e,t)},setBaseTarget:function(e,t){M[e]=t},getBaseTarget:function(e){if(i){var t=i(p,e);if(void 0!==t&&!Xb(t))return t}return M[e]}},I),{build:function(){return V(),T},scheduleRender:function(){H_.render(F,!1,!0)},syncRender:F,setProps:function(e){p=e,I.updatePropListeners(e),O=function(e,t,n){var r;for(var i in t){var a=t[i],o=n[i];if(Xb(a))e.addValue(i,a);else if(Xb(o))e.addValue(i,PS(a));else if(o!==a)if(e.hasValue(i)){var u=e.getValue(i);!u.hasAnimated&&u.set(a)}else e.addValue(i,PS(null!==(r=e.getStaticValue(i))&&void 0!==r?r:a))}for(var i in n)void 0===t[i]&&e.removeValue(i);return t}(H,d(p),O)},getProps:function(){return p},getVariant:function(e){var t;return null===(t=p.variants)||void 0===t?void 0:t[e]},getDefaultTransition:function(){return p.transition},getVariantContext:function(e){if(void 0===e&&(e=!1),e)return null===v||void 0===v?void 0:v.getVariantContext();if(!K){var t=(null===v||void 0===v?void 0:v.getVariantContext())||{};return void 0!==p.initial&&(t.initial=p.initial),t}for(var n={},r=0;r<BT;r++){var i=UT[r],a=p[i];(Ab(a)||!1===a)&&(n[i]=a)}return n},enableLayoutProjection:function(){C.isEnabled=!0,H.layoutTree.add(H)},lockProjectionTarget:function(){C.isTargetLocked=!0},unlockProjectionTarget:function(){H.stopLayoutAnimation(),C.isTargetLocked=!1},getLayoutState:function(){return N},setCrossfader:function(e){x=e},isProjectionReady:function(){return C.isEnabled&&C.isHydrated&&N.isHydrated},startLayoutAnimation:function(e,t,n){void 0===n&&(n=!1);var r=H.getProjectionAnimationProgress()[e],i=n?C.relativeTarget[e]:C.target[e],a=i.min,o=i.max-a;return r.clearListeners(),r.set(a),r.set(a),r.onChange((function(t){H.setProjectionTargetAxis(e,t,t+o,n)})),H.animateMotionValue(e,r,0,t)},stopLayoutAnimation:function(){dE((function(e){return H.getProjectionAnimationProgress()[e].stop()}))},measureViewportBox:function(e){void 0===e&&(e=!0);var n=o(k,t);return e||HE(n,E),n},getProjectionAnimationProgress:function(){return _||(_={x:PS(0),y:PS(0)}),_},setProjectionTargetAxis:function(e,t,n,r){var i;void 0===r&&(r=!1),r?(C.relativeTarget||(C.relativeTarget={x:{min:0,max:1},y:{min:0,max:1}}),i=C.relativeTarget[e]):(C.relativeTarget=void 0,i=C.target[e]),C.isHydrated=!0,i.min=t,i.max=n,P=!0,I.notifySetAxisTarget()},rebaseProjectionTarget:function(e,t){void 0===t&&(t=N.layout);var n=H.getProjectionAnimationProgress(),r=n.x,i=n.y,a=!C.relativeTarget&&!C.isTargetLocked&&!r.isAnimating()&&!i.isAnimating();(e||a)&&dE((function(e){var n=t[e],r=n.min,i=n.max;H.setProjectionTargetAxis(e,r,i)}))},notifyLayoutReady:function(e){!function(e){var t=e.getProjectionParent();if(t){var n=PE(t.getLayoutState().layout,e.getLayoutState().layout);dE((function(t){e.setProjectionTargetAxis(t,n[t].min,n[t].max,!0)}))}else e.rebaseProjectionTarget()}(H),H.notifyLayoutUpdate(N.layout,H.prevViewportBox||N.layout,e)},resetTransform:function(){return c(H,k,p)},restoreTransform:function(){return l(k,T)},updateLayoutProjection:function(){if(H.isProjectionReady()){var e=N.delta,t=N.treeScale,n=t.x,r=t.y,i=N.deltaTransform;RT(N,A,H.path,E),P&&H.notifyViewportBoxUpdate(A.target,e),P=!1;var a=AT(e,t);a===i&&n===t.x&&r===t.y||H.scheduleRender(),N.deltaTransform=a}},updateTreeLayoutProjection:function(){H.layoutTree.forEach(MT),H_.preRender(B,!1,!0)},getProjectionParent:function(){if(void 0===b){for(var e=!1,t=H.path.length-1;t>=0;t--){var n=H.path[t];if(n.projection.isEnabled){e=n;break}}b=e}return b},resolveRelativeTargetBox:function(){var e=H.getProjectionParent();if(C.relativeTarget&&e&&(function(e,t){TE(e.target.x,e.relativeTarget.x,t.target.x),TE(e.target.y,e.relativeTarget.y,t.target.y)}(C,e.projection),LE(e))){var t=C.target;qE(t,t,e.getLatestValues())}},shouldResetTransform:function(){return Boolean(p._layoutResetTransform)},pointTo:function(e){A=e.projection,D=e.getLatestValues(),null===w||void 0===w||w(),w=bx(e.onSetAxisTarget(H.scheduleUpdateLayoutProjection),e.onLayoutAnimationComplete((function(){var e;H.isPresent?H.presence=nT.Present:null===(e=H.layoutSafeToRemove)||void 0===e||e.call(H)})))},isPresent:!0,presence:nT.Entering});return H}};function MT(e){e.resolveRelativeTargetBox()}function FT(e){e.updateLayoutProjection()}var VT,UT=sb(["initial"],ub(GS)),BT=UT.length,jT=new Set(["width","height","top","left","right","bottom","x","y"]),zT=function(e){return jT.has(e)},qT=function(e,t){e.set(t,!1),e.set(t)},KT=function(e){return e===hw||e===sw};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(VT||(VT={}));var GT=function(e,t){return parseFloat(e.split(", ")[t])},HT=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);if(a)return GT(a[1],t);var o=i.match(/^matrix\((.+)\)$/);return o?GT(o[1],e):0}},WT=new Set(["x","y","z"]),QT=zb.filter((function(e){return!WT.has(e)}));var XT={width:function(e){var t=e.x;return t.max-t.min},height:function(e){var t=e.y;return t.max-t.min},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:HT(4,13),y:HT(5,14)},$T=function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r={}),t=ab({},t),r=ab({},r);var i=Object.keys(t).filter(zT),a=[],o=!1,u=[];if(i.forEach((function(i){var s=e.getValue(i);if(e.hasValue(i)){var c,l=n[i],f=t[i],h=OS(l);if(zw(f))for(var d=f.length,v=null===f[0]?1:0;v<d;v++)c?OS(f[v]):(c=OS(f[v]))===h||KT(h)&&KT(c);else c=OS(f);if(h!==c)if(KT(h)&&KT(c)){var p=s.get();"string"===typeof p&&s.set(parseFloat(p)),"string"===typeof f?t[i]=parseFloat(f):Array.isArray(f)&&c===sw&&(t[i]=f.map(parseFloat))}else(null===h||void 0===h?void 0:h.transform)&&(null===c||void 0===c?void 0:c.transform)&&(0===l||0===f)?0===l?s.set(c.transform(l)):t[i]=h.transform(f):(o||(a=function(e){var t=[];return QT.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.syncRender(),t}(e),o=!0),u.push(i),r[i]=void 0!==r[i]?r[i]:t[i],qT(s,f))}})),u.length){var s=function(e,t,n){var r=t.measureViewportBox(),i=t.getInstance(),a=getComputedStyle(i),o=a.display,u={top:a.top,left:a.left,bottom:a.bottom,right:a.right,transform:a.transform};"none"===o&&t.setStaticValue("display",e.display||"block"),t.syncRender();var s=t.measureViewportBox();return n.forEach((function(n){var i=t.getValue(n);qT(i,XT[n](r,u)),e[n]=XT[n](s,a)})),e}(t,e,u);return a.length&&a.forEach((function(t){var n=ub(t,2),r=n[0],i=n[1];e.getValue(r).set(i)})),e.syncRender(),{target:s,transitionEnd:r}}return{target:t,transitionEnd:r}};function YT(e,t,n,r){return function(e){return Object.keys(e).some(zT)}(t)?$T(e,t,n,r):{target:t,transitionEnd:r}}var JT=function(e,t,n,r){var i=function(e,t,n){var r,i=ob(t,[]),a=e.getInstance();if(!(a instanceof HTMLElement))return{target:i,transitionEnd:n};for(var o in n&&(n=ab({},n)),e.forEachValue((function(e){var t=e.get();if(aT(t)){var n=uT(t,a);n&&e.set(n)}})),i){var u=i[o];if(aT(u)){var s=uT(u,a);s&&(i[o]=s,n&&(null!==(r=n[o])&&void 0!==r||(n[o]=u)))}}return{target:i,transitionEnd:n}}(e,t,r);return YT(e,t=i.target,n,r=i.transitionEnd)};var ZT={treeType:"dom",readValueFromInstance:function(e,t){if(Gb(t)){var n=gS(t);return n&&n.default||0}var r,i=(r=e,window.getComputedStyle(r));return(Yb(t)?i.getPropertyValue(t):i[t])||0},sortNodePosition:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1},getBaseTarget:function(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]},measureViewportBox:function(e,t){return kE(e,t.transformPagePoint)},resetTransform:function(e,t,n){var r=n.transformTemplate;t.style.transform=r?r({},""):"none",e.scheduleRender()},restoreTransform:function(e,t){e.style.transform=t.style.transform},removeValueFromRenderState:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]},makeTargetAnimatable:function(e,t,n,r){var i=n.transformValues;void 0===r&&(r=!0);var a=t.transition,o=t.transitionEnd,u=ob(t,["transition","transitionEnd"]),s=function(e,t,n){var r,i,a={};for(var o in e)a[o]=null!==(r=BS(o,t))&&void 0!==r?r:null===(i=n.getValue(o))||void 0===i?void 0:i.get();return a}(u,a||{},e);if(i&&(o&&(o=i(o)),u&&(u=i(u)),s&&(s=i(s))),r){!function(e,t,n){var r,i,a,o,u=Object.keys(t).filter((function(t){return!e.hasValue(t)})),s=u.length;if(s)for(var c=0;c<s;c++){var l=u[c],f=t[l],h=null;Array.isArray(f)&&(h=f[0]),null===h&&(h=null!==(i=null!==(r=n[l])&&void 0!==r?r:e.readValue(l))&&void 0!==i?i:t[l]),void 0!==h&&null!==h&&("string"===typeof h&&IS(h)?h=parseFloat(h):!FS(h)&&e_.test(f)&&(h=kS(l,f)),e.addValue(l,PS(h)),null!==(a=(o=n)[l])&&void 0!==a||(o[l]=h),e.setBaseTarget(l,h))}}(e,u,s);var c=JT(e,u,s,o);o=c.transitionEnd,u=c.target}return ab({transition:a,transitionEnd:o},u)},scrapeMotionValuesFromProps:Uw,build:function(e,t,n,r,i,a,o){void 0!==e.isVisible&&(t.style.visibility=e.isVisible?"visible":"hidden");var u=r.isEnabled&&i.isHydrated;mw(t,n,r,i,a,o.transformTemplate,u?AT:void 0,u?DT:void 0)},render:Mw},eI=OT(ZT),tI=OT(ab(ab({},ZT),{getBaseTarget:function(e,t){return e[t]},readValueFromInstance:function(e,t){var n;return Gb(t)?(null===(n=gS(t))||void 0===n?void 0:n.default)||0:(t=Fw.has(t)?t:Ow(t),e.getAttribute(t))},scrapeMotionValuesFromProps:Bw,build:function(e,t,n,r,i,a,o){var u=r.isEnabled&&i.isHydrated;Dw(t,n,r,i,a,o.transformTemplate,u?AT:void 0,u?DT:void 0)},render:Vw})),nI=function(e,t){return Ub(e)?tI(t,{enableHardwareAcceleration:!1}):eI(t,{enableHardwareAcceleration:!0})},rI=ab(ab(ab(ab({},YS),xx),iT),TT),iI=Fb((function(e,t){return function(e,t,n,r){var i=t.forwardMotionProps,a=void 0!==i&&i,o=Ub(e)?Qw:$w;return ab(ab({},o),{preloadedFeatures:n,useRender:Rw(a),createVisualElement:r,Component:e})}(e,t,rI,nI)}));var aI=function(e){var n=e.file,r=e.setFile,i=function(e){var n=c((0,t.useState)(0),2),r=n[0],i=n[1],a=c((0,t.useState)(null),2),o=a[0],u=a[1],s=c((0,t.useState)(null),2),l=s[0],f=s[1];return(0,t.useEffect)((function(){var t=tb.ref(e.name),n=eb.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;i(t)}),(function(e){u(e)}),g(y().mark((function e(){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:r=e.sent,f(r),i=nb(),n.add({url:r,timeAdded:i});case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:r,url:l,err:o}}(n),a=i.progress,o=i.url;return console.log(a),console.log(o),(0,t.useEffect)((function(){o&&r(null)}),[o,r]),(0,l.jsx)(iI.div,{className:"progress-bar",initial:{width:0},animate:{width:"".concat(a,"%")},transition:{delay:.3}})},oI=function(){var e=c((0,t.useState)(null),2),n=e[0],r=e[1],i=c((0,t.useState)(null),2),a=i[0],o=i[1];return(0,l.jsxs)("form",{children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"file",className:"hide",onChange:function(e){return function(e){var t=e.files[0];console.log(t),t&&["image/png","image/jpeg"].includes(t.type)?(r(t),o("")):(r(null),o("Please select a valid file type (png/jpeg)"))}(e.target)}}),(0,l.jsx)("div",{children:"+"})]}),(0,l.jsxs)("div",{className:"output",children:[a&&(0,l.jsx)("div",{className:"error",children:a}),n&&n.name,n&&(0,l.jsx)(aI,{file:n,setFile:r})]})]})};var uI=function(){var e=(0,t.useContext)(h).setSelectedImage,n=function(e){var n=c((0,t.useState)([]),2),r=n[0],i=n[1];return(0,t.useEffect)((function(){var t=eb.collection(e).orderBy("timeAdded","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(o(o({},e.data()),{},{id:e.id}))})),i(t)}));return function(){return t()}}),[e]),{docs:r}}("images"),r=n.docs;return console.log(r),(0,l.jsx)("div",{className:"image-grid",children:r&&r.map((function(t){return(0,l.jsx)(iI.div,{whileHover:{opacity:1},layout:!0,className:"image",onClick:function(){return e(t.url)},children:(0,l.jsx)(iI.img,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},src:t.url,alt:"uploaded img"})},t.id)}))})},sI=function(){var e=(0,t.useContext)(h),n=e.selectedImage,r=e.setSelectedImage;return n?(0,l.jsx)(iI.div,{className:"modal",onClick:function(e){e.target.classList.contains("modal")&&r(null)},initial:{opacity:0},animate:{opacity:1},children:(0,l.jsx)("img",{src:n,alt:"selected image"})}):null};var cI=function(){return(0,l.jsx)(d,{children:(0,l.jsxs)("div",{className:"App",children:[(0,l.jsx)(v,{}),(0,l.jsx)(oI,{}),(0,l.jsx)(uI,{}),(0,l.jsx)(sI,{})]})})};r.render((0,l.jsx)(t.StrictMode,{children:(0,l.jsx)(cI,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.833a20f1.js.map